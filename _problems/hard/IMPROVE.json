{"category_name":"hard","status":"success","problem_code":"IMPROVE","problem_name":"Improve the Permutation","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3> Read problems statements in <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/LTIME44\/mandarin\/IMPROVE.pdf\">Mandarin Chinese<\/a>, <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/LTIME44\/russian\/IMPROVE.pdf\">Russian<\/a> and <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/LTIME44\/vietnamese\/IMPROVE.pdf\">Vietnamese<\/a> as well.<\/h3>\n\n<p>Sergey thinks that some permutations are better than other permutations. He thinks that the permutations with the smaller number of inversions are nicer than the ones with the bigger number of inversions. So the smaller the number of inversions is, the nicer is the permutation.<\/p>\n\n<p>Sergey has a permutation <b>A<\/b> which he wants to make as nice as possible. This is kind of special permutation, because initially it doesn't have any index <b>i<\/b> such that <b>A<sub>i<\/sub><\/b> = <b>i<\/b> (Assume 1-based indexing). For making it nicer, he can swap two <b>adjacent<\/b> numbers in this permutation, but only if both of them are not on their places (i.e. if you swap <b>A<sub>i<\/sub><\/b> and <b>A<sub>i+1<\/sub><\/b>, then <b>A<sub>i<\/sub> \u2260 i<\/b> and <b>A<sub>i+1<\/sub> \u2260 i+1<\/b> should be held). He wants to perform such operation multiple times to make the number of inversions in the permutation as small as possible.<\/p>\n\n<p>Making the permutation the nicest of the possible ones has turned out to be a complicated problem, so Sergey asks you to help him and to provide <i>any<\/i> sequence of the allowed swaps that would lead him to obtaining the nicest permutation. Since Sergey is quite eager to see the way to improve his permutation, he wants the sequence to be not longer than <b>2 \u00d7 N<sup>2<\/sup><\/b>. It can be proved that such sequence can be found under this restriction.<\/p>\n\n\n<h3>Input<\/h3>\n<p>The first line of the input contains an integer <b>T<\/b> denoting the number of test cases. The description of <b>T<\/b> test cases follows.<\/li>\n\n<p>The first line of each test case contains a single integer <b>N<\/b> denoting the amount of numbers in the permutation. <\/p>\n\n<p>The second line contains <b>N<\/b> space-separated integers <b>A<sub>1<\/sub><\/b>, <b>A<sub>2<\/sub><\/b>, ..., <b>A<sub>N<\/sub><\/b> denoting the permutation itself.<\/p>\n\n<h3>Output<\/h3>\n<p>For each test case, output an answer in the following format:\n<ul>\n<li>The first line should contain a single integer <b>C<\/b> denoting the number of swap operations.<\/li>\n<li>On the following line, output <b>C<\/b> space-separated integers <b>D<sub>j<\/sub><\/b> denoting the swap of the <b>D<sub>j<\/sub><\/b><sup>th<\/sup> and the (<b>D<sub>j<\/sub>+1)<\/b><sup>th<\/sup> number in the permutation (1-indexed).\n<\/ul>\n<\/p>\n<p>The restrictions for the output sequence are:\n<ul>\n<li><b>1<\/b> \u2264 <b>C<\/b> \u2264 <b>2 \u00d7 N<sup>2<\/sup><\/b><\/li>\n<li><b>1<\/b> \u2264 <b>D<sub>j<\/sub><\/b> < <b>N<\/b><\/li>\n<\/ul>\n<\/p>\n\n<h3>Constraints<\/h3>\n<ul>\n<li><b>A<\/b> is a permutation.<\/li>\n<li><b>1<\/b> \u2264 <b>A<sub>i<\/sub><\/b> \u2264 <b>N<\/b><\/li>\n<li><b>A<sub>i<\/sub><\/b> \u2260 <b>i<\/b><\/li>\n<\/ul>\n\n<h3>Subtasks<\/h3>\n<ul>\n<li><b>Subtask #1 (23 points)<\/b>: <b>1<\/b> \u2264 <b>T<\/b> \u2264 <b>10<\/b>, <b>1<\/b> \u2264 <b>N<\/b> \u2264 <b>5<\/b><\/li>\n<li><b>Subtask #2 (77 points)<\/b>: <b>1<\/b> \u2264 <b>T<\/b> \u2264 <b>50<\/b>, <b>1<\/b> \u2264 <b>N<\/b> \u2264 <b>50<\/b><\/li>\n<\/ul>\n\n<h3>Example<\/h3>\n<pre><b>Input:<\/b>\n<tt>1\n4\n4 3 2 1<\/tt>\n\n<b>Output:<\/b>\n<tt>6\n1 3 2 3 1 2<\/tt>\n<\/pre>\n\n<h3>Explanation<\/h3>\n<p><b>Example case 1.<\/b> Let's perform these operations one-by-one. The positions having <b>A<sub>i<\/sub> = i<\/b> will be highlighted in bold:\n<ul>\n<li>Initially we have A = (4, 3, 2, 1)<\/li>\n<li>Then we swap <b>A<sub>1<\/sub><\/b> with <b>A<sub>2<\/sub><\/b>, obtaining A = (3, 4, 2, 1)<\/li>\n<li>Then we swap <b>A<sub>3<\/sub><\/b> with <b>A<sub>4<\/sub><\/b>, obtaining A = (3, 4, 1, 2)<\/li>\n<li>Then we swap <b>A<sub>2<\/sub><\/b> with <b>A<sub>3<\/sub><\/b>, obtaining A = (3, 1, 4, 2)<\/li>\n<li>Then we swap <b>A<sub>3<\/sub><\/b> with <b>A<sub>4<\/sub><\/b>, obtaining A = (3, 1, 2, <b>4<\/b>)<\/li>\n<li>Then we swap <b>A<sub>1<\/sub><\/b> with <b>A<sub>2<\/sub><\/b>, obtaining A = (<b>1<\/b>, 3, 2, <b>4<\/b>)<\/li>\n<li>Finally we swap <b>A<sub>2<\/sub><\/b> with <b>A<sub>3<\/sub><\/b>, obtaining A = (<b>1<\/b>, <b>2<\/b>, <b>3<\/b>, <b>4<\/b>)<\/li>\n<\/ul>\n<\/p>\n<p>\nThis way we've obtained the permutation with zero inversions. Obviously, this is the nicest possible permutation in this test case.\n<\/p>","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 4.9.2, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYPY, PYTH, PYTH 3.4, RUBY, SCALA, SCM chicken, SCM guile, SCM qobi, ST, TCL, TEXT, WSPC","max_timelimit":"1","source_sizelimit":"50000","problem_author":"xcwgf666","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>xcwgf666<\/span>","problem_tester":"errichto","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span>errichto<\/span>","date_added":"13-01-2017","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/ltime44'>\n                    ltime44\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/medium-hard'>\n                    medium-hard\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/permutation'>\n                    permutation\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/xcwgf666'>\n                    xcwgf666\n                <\/a>","editorial_url":"https:\/\/discuss.codechef.com\/problems\/IMPROVE","user":{"username":null},"time":{"view_start_date":1485622800,"submit_start_date":1485622800,"visible_start_date":1485622800,"end_date":1735669800,"current":1493556731},"todo":false,"problem_status":"unattempted"}