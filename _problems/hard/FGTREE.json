{"category_name":"hard","status":"success","problem_code":"FGTREE","problem_name":"Forgotten Tree 9","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/hindi\/FGTREE.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/bengali\/FGTREE.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/mandarin\/FGTREE.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/russian\/FGTREE.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/vietnamese\/FGTREE.pdf) as well.\r\n\r\nThere is a rooted binary tree with $N$ nodes. For each node with exactly two children, one of them is called the left child and the other is called the right child. If a node has only one child, it is still specifically called either the left child or the right child.\r\n\r\nThe nodes are labelled $1$ through $N$ according to the inorder traversal of the tree. That is, the labelling can be generated by the following pseudocode:\r\n```\r\ninteger index = 1\r\n\r\nfunction dfs(node n):\r\n    if n has left_child:\r\n        dfs(n.left_child)\r\n    n.label = index\r\n    index += 1\r\n    if n has right_child:\r\n        dfs(n.right_child)\r\n\r\nrun dfs(root)\r\n```\r\n\r\nFor each node $x$, the subtree of this node consists of the node $x$ itself and all its (direct or indirect) descendants. Since the nodes are labelled according to inorder traversal, the subtree of node $x$ can be described by two integers $a_x$ and $b_x$ in the following way: the nodes $a_x, a_x+1, \\ldots, b_x$ all belong to the subtree of node $x$ and all other nodes do not belong to this subtree.\r\n\r\nYou do not know the structure of the tree. You would like to reconstruct it by asking questions in the form: \"Is $a_x$ equal to $a$ and also $b_x$ equal to $b$?\" You may ask at most $300$ such questions. Find the root and the parent of each non-root node.\r\n\r\n### Interaction\r\n- First, you should read a line containing a single integer $T$ \u2014 the number of test cases. The description of interaction for $T$ test cases follows.\r\n- For each test case, you should start by reading a line containing a single integer $N$.\r\n- Afterwards, you may ask questions. To ask a question, print a line containing the character 'Q' followed by a space and three space-separated integers $x$, $a$ and $b$ ($1 \\le x \\le N$, $1 \\le a \\le x \\le b \\le N$). Then, you should read a line containing the string `\"Yes\"` if $a$ is equal to $a_x$ and $b$ is equal to $b_x$ or `\"No\"` otherwise.\r\n- When you are ready to answer, print a line containing the character 'A' followed by a space and $N$ space-separated integers $p_1, p_2, \\ldots, p_N$. For each valid $i$, $p_i$ should denote the parent of the $i$-th node or, if the $i$-th node is the root, it should be $-1$. Your answer will be considered correct if it exactly describes the hidden tree.\r\n\r\nDon't forget to flush the output after printing each line!\r\n\r\n### Constraints\r\n- $1 \\le T \\le 100$\r\n\r\n### Subtasks\r\n**Subtask #1 (20 points):** $1 \\le N \\le 10$\r\n\r\n**Subtask #2 (20 points):** $1 \\le N \\le 20$\r\n\r\n**Subtask #3 (30 points):** $1 \\le N \\le 50$\r\n\r\n**Subtask #4 (30 points):** $1 \\le N \\le 100$\r\n\r\n### Example Input\r\n```\r\nGrader  | You\r\n2       |\r\n2       |\r\n        | Q 1 1 2\r\nNo      |\r\n        | A 2 -1\r\n5       |\r\n        | Q 4 1 5\r\nYes     |\r\n        | Q 1 1 4\r\nNo      |\r\n        | Q 3 1 3\r\nYes     |\r\n        | Q 1 1 2\r\nYes     |\r\n        | A 3 1 4 -1 4\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** The tree has only two nodes \u2014 node $2$ is the root and node $1$ is its left child. In this case, we have $a_1 = 1$, $b_1 = 1$, $a_2 = 1$ and $b_2 = 2$. First, we ask if the subtree of node $1$ subtree contains the nodes $1$ and $2$. The answer is \"No\", so we know that node $2$ is the root and node $1$ is its child, which is what we needed to find out.\r\n\r\n**Example case 2:** In the first question, we ask if nodes $1$ through $5$ are all in the subtree of node $4$. In this case, the answer is \"Yes\", so we know that node $4$ is the root of the whole tree. We still need to ask more questions to determine how nodes $1$, $2$, $3$ and $5$ are connected to it.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/hindi\/FGTREE.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/bengali\/FGTREE.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/mandarin\/FGTREE.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/russian\/FGTREE.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/vietnamese\/FGTREE.pdf) as well.\r\n\r\nThere is a rooted binary tree with $N$ nodes. For each node with exactly two children, one of them is called the left child and the other is called the right child. If a node has only one child, it is still specifically called either the left child or the right child.\r\n\r\nThe nodes are labelled $1$ through $N$ according to the inorder traversal of the tree. That is, the labelling can be generated by the following pseudocode:\r\n```\r\ninteger index = 1\r\n\r\nfunction dfs(node n):\r\n    if n has left_child:\r\n        dfs(n.left_child)\r\n    n.label = index\r\n    index += 1\r\n    if n has right_child:\r\n        dfs(n.right_child)\r\n\r\nrun dfs(root)\r\n```\r\n\r\nFor each node $x$, the subtree of this node consists of the node $x$ itself and all its (direct or indirect) descendants. Since the nodes are labelled according to inorder traversal, the subtree of node $x$ can be described by two integers $a_x$ and $b_x$ in the following way: the nodes $a_x, a_x+1, \\ldots, b_x$ all belong to the subtree of node $x$ and all other nodes do not belong to this subtree.\r\n\r\nYou do not know the structure of the tree. You would like to reconstruct it by asking questions in the form: \"Is $a_x$ equal to $a$ and also $b_x$ equal to $b$?\" You may ask at most $300$ such questions. Find the root and the parent of each non-root node.\r\n\r\n### Interaction\r\n- First, you should read a line containing a single integer $T$ \u2014 the number of test cases. The description of interaction for $T$ test cases follows.\r\n- For each test case, you should start by reading a line containing a single integer $N$.\r\n- Afterwards, you may ask questions. To ask a question, print a line containing the character 'Q' followed by a space and three space-separated integers $x$, $a$ and $b$ ($1 \\le x \\le N$, $1 \\le a \\le x \\le b \\le N$). Then, you should read a line containing the string `\"Yes\"` if $a$ is equal to $a_x$ and $b$ is equal to $b_x$ or `\"No\"` otherwise.\r\n- When you are ready to answer, print a line containing the character 'A' followed by a space and $N$ space-separated integers $p_1, p_2, \\ldots, p_N$. For each valid $i$, $p_i$ should denote the parent of the $i$-th node or, if the $i$-th node is the root, it should be $-1$. Your answer will be considered correct if it exactly describes the hidden tree.\r\n\r\nDon't forget to flush the output after printing each line!\r\n\r\n### Constraints\r\n- $1 \\le T \\le 100$\r\n\r\n### Subtasks\r\n**Subtask #1 (20 points):** $1 \\le N \\le 10$\r\n\r\n**Subtask #2 (20 points):** $1 \\le N \\le 20$\r\n\r\n**Subtask #3 (30 points):** $1 \\le N \\le 50$\r\n\r\n**Subtask #4 (30 points):** $1 \\le N \\le 100$\r\n\r\n### Example Input\r\n```\r\nGrader  | You\r\n2       |\r\n2       |\r\n        | Q 1 1 2\r\nNo      |\r\n        | A 2 -1\r\n5       |\r\n        | Q 4 1 5\r\nYes     |\r\n        | Q 1 1 4\r\nNo      |\r\n        | Q 3 1 3\r\nYes     |\r\n        | Q 1 1 2\r\nYes     |\r\n        | A 3 1 4 -1 4\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** The tree has only two nodes \u2014 node $2$ is the root and node $1$ is its left child. In this case, we have $a_1 = 1$, $b_1 = 1$, $a_2 = 1$ and $b_2 = 2$. First, we ask if the subtree of node $1$ subtree contains the nodes $1$ and $2$. The answer is \"No\", so we know that node $2$ is the root and node $1$ is its child, which is what we needed to find out.\r\n\r\n**Example case 2:** In the first question, we ask if nodes $1$ through $5$ are all in the subtree of node $4$. In this case, the answer is \"Yes\", so we know that node $4$ is the root of the whole tree. We still need to ask more questions to determine how nodes $1$, $2$, $3$ and $5$ are connected to it.\r\n","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, NEM","max_timelimit":"3","source_sizelimit":"50000","problem_author":"lg5293","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #D0011B;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>7&#9733;<\/span><span class='m-username--link'>lg5293<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"9-05-2019","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/june19'>june19<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/junechallenge'>junechallenge<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/lg5293'>lg5293<\/a>","problem_difficulty_level":"Hard","user_zen_mode":false,"best_tag":"","editorial_url":"https:\/\/discuss.codechef.com\/problems\/FGTREE","time":{"view_start_date":1560763800,"submit_start_date":1560763800,"visible_start_date":1560763800,"end_date":1735669800,"current":1643797995},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=FGTREE","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}