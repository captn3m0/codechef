{"category_name":"hard","status":"success","problem_code":"LELUCKYN","problem_name":"Little Elephant and Lucky Segment","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><p>\nThe Little Elephant from the Zoo of Lviv likes lucky digits. Everybody knows that the lucky digits are digits <b>4<\/b> and <b>7<\/b>.\n<\/p>\n\n<p>\nThis time he has an array <b>A<\/b> that consists of <b>N<\/b> integers: <b>A[1]<\/b>, <b>A[2]<\/b>, ..., <b>A[N]<\/b>. Let <b>F4(x)<\/b> be the number of digits <b>4<\/b> in the decimal representation of <b>x<\/b>, and <b>F7(x)<\/b> be the number of digits <b>7<\/b> in the decimal representation of <b>x<\/b>. For example, <b>F4(5) = 0<\/b>, <b>F4(4467) = 2<\/b> and <b>F7(457747) = 3<\/b>.\n<\/p>\n\n<p>\nConsider some pair of integers <b>L<\/b> and <b>R<\/b> such that <b>1<\/b> \u2264 <b>L<\/b> \u2264 <b>R<\/b> \u2264 <b>N<\/b>. Let <b>C4<\/b> be the total number of digits <b>4<\/b> in decimal representation of integers <b>A[L], A[L + 1] ..., A[R]<\/b>, i. e.,\n<\/p>\n\n<p>\n<b>C4 = F4(A[L]) + F4(A[L + 1]) + ... + F4(A[R])<\/b>.\n<\/p>\n\n<p>\nSimilarly, let <b>C7<\/b> be the the total number of digits <b>7<\/b> in decimal representation of integers <b>A[L], A[L + 1] ..., A[R]<\/b>, i. e.,\n<\/p>\n\n<p>\n<b>C7 = F7(A[L]) + F7(A[L + 1]) + ... + F7(A[R])<\/b>.\n<\/p>\n\n<p>\nThe Little Elephant wants to know the number of such pairs <b>(L; R)<\/b> for which <b>C4<sup>C7<\/sup> \u2264 R \u2212 L + 1<\/b>. But he believes that the number <b>2<\/b> is unlucky. Hence he discards all pairs where <b>C4 = 2<\/b> or <b>C7 = 2<\/b>.\n<\/p>\n\n<p>\nHelp the Little Elephant to find the answer for the problem.\n<\/p>\n\n<p>\n<b>Remark.<\/b> <b>0<sup>0<\/sup> = 1<\/b>. It is a standard mathematical definition.\n<\/p>\n\n<h3>Input<\/h3>\n\n<p>\nThe first line of the input contains a single integer <b>T<\/b>, the number of test cases. Then <b>T<\/b> test cases follow. The first line of each test case contains a single integer <b>N<\/b>, the size of the array <b>A<\/b> for the corresponding test case. The second line contains <b>N<\/b> space separated integers <b>A[1]<\/b>, <b>A[2]<\/b>, ..., <b>A[N]<\/b>.\n<\/p>\n\n<h3>Output<\/h3>\n\n<p>\nFor each test case output a single line containing the answer for the corresponding test case.\n<\/p>\n\n<h3>Constraints<\/h3>\n<p>\n<b>1<\/b> \u2264 <b>T<\/b> \u2264 <b>3<\/b> <br \/>\n<b>1<\/b> \u2264 <b>N<\/b> \u2264 <b>10<sup>5<\/sup><\/b> <br \/>\n<b>1<\/b> \u2264 <b>A[i]<\/b> \u2264 <b>10<sup>9<\/sup><\/b><br \/>\n<\/p>\n\n<h3>Example<\/h3>\n\n<pre>\n<b>Input:<\/b>\n3\n3\n1 2 1\n4\n47 2 4 77548\n1\n777\n\n\n<b>Output:<\/b>\n6\n5\n1\n<\/pre>\n\n<h3>Explanation<\/h3>\n\n<p>\n<b>Case 1.<\/b> Here <b>C4 = C7 = 0<\/b> for all pairs <b>(L; R)<\/b>. So <b>0<sup>0<\/sup> = 1 \u2264 R \u2212 L + 1<\/b> for each pair. There are <b>6<\/b> pairs <b>(L; R)<\/b> in all: <b>(1; 1), (1; 2), (1; 3), (2; 2), (2; 3), (3; 3)<\/b>. So the answer is <b>6<\/b>.\n<\/p>\n\n<p>\n<b>Case 2.<\/b> Here we have 10 pairs of <b>(L; R)<\/b> in all. Consider them all.\n<\/p>\n\n<p>\n<ul>\n<li> <b>L = 1<\/b>, <b>R = 1<\/b>: <b>C4 = 1<\/b>, <b>C7 = 1<\/b>, <b>C4<sup>C7<\/sup> = 1<sup>1<\/sup> = 1 \u2264 1 = R \u2212 L + 1<\/b>. <b>The pair is counted.<\/b><\/li>\n<li> <b>L = 1<\/b>, <b>R = 2<\/b>: <b>C4 = 1<\/b>, <b>C7 = 1<\/b>, <b>C4<sup>C7<\/sup> = 1<sup>1<\/sup> = 1 \u2264 2 = R \u2212 L + 1<\/b>. <b>The pair is counted.<\/b><\/li>\n<li> <b>L = 1<\/b>, <b>R = 3<\/b>: <b>C4 = 2<\/b>, <b>C7 = 1<\/b>, <b>C4<sup>C7<\/sup> = 2<sup>1<\/sup> = 2 \u2264 3 = R \u2212 L + 1<\/b>. But the pair is not counted since <b>C4 = 2<\/b>.<\/li>\n<li> <b>L = 1<\/b>, <b>R = 4<\/b>: <b>C4 = 3<\/b>, <b>C7 = 3<\/b>, <b>C4<sup>C7<\/sup> = 3<sup>3<\/sup> = 27 &gt; 4 = R \u2212 L + 1<\/b>. The pair is not counted.<\/li>\n<li> <b>L = 2<\/b>, <b>R = 2<\/b>: <b>C4 = 0<\/b>, <b>C7 = 0<\/b>, <b>C4<sup>C7<\/sup> = 0<sup>0<\/sup> = 1 \u2264 1 = R \u2212 L + 1<\/b>. <b>The pair is counted.<\/b><\/li>\n<li> <b>L = 2<\/b>, <b>R = 3<\/b>: <b>C4 = 1<\/b>, <b>C7 = 0<\/b>, <b>C4<sup>C7<\/sup> = 1<sup>0<\/sup> = 1 \u2264 2 = R \u2212 L + 1<\/b>. <b>The pair is counted.<\/b><\/li>\n<li> <b>L = 2<\/b>, <b>R = 4<\/b>: <b>C4 = 2<\/b>, <b>C7 = 2<\/b>, <b>C4<sup>C7<\/sup> = 2<sup>2<\/sup> = 4 &gt; 3 = R \u2212 L + 1<\/b>. The pair is not counted. It is also not counted since <b>C4 = 2<\/b>, and also since <b>C7 = 2<\/b>.<\/li>\n<li> <b>L = 3<\/b>, <b>R = 3<\/b>: <b>C4 = 1<\/b>, <b>C7 = 0<\/b>, <b>C4<sup>C7<\/sup> = 1<sup>0<\/sup> = 1 \u2264 1 = R \u2212 L + 1<\/b>. <b>The pair is counted.<\/b><\/li>\n<li> <b>L = 3<\/b>, <b>R = 4<\/b>: <b>C4 = 2<\/b>, <b>C7 = 2<\/b>, <b>C4<sup>C7<\/sup> = 2<sup>2<\/sup> = 4 &gt; 2 = R \u2212 L + 1<\/b>. The pair is not counted. It is also not counted since <b>C4 = 2<\/b>, and also since <b>C7 = 2<\/b>.<\/li>\n<li> <b>L = 4<\/b>, <b>R = 4<\/b>: <b>C4 = 1<\/b>, <b>C7 = 2<\/b>, <b>C4<sup>C7<\/sup> = 1<sup>2<\/sup> = 1 \u2264 1 = R \u2212 L + 1<\/b>. But the pair is not counted since <b>C7 = 2<\/b>.<\/li>\n<\/ul>\n<\/p>\n\n<p>\nAs we see there are exactly <b>5<\/b> pairs <b>(L; R)<\/b> that satisfy required constraints.\n<\/p>\n\n<p>\n<b>Case 3.<\/b> Here we have the only pair <b>(L; R) = (1; 1)<\/b> for which <b>C4 = 0<\/b>, <b>C7 = 3<\/b> and <b>C4<sup>C7<\/sup> = 0<sup>3<\/sup> = 0 \u2264 1 = R \u2212 L + 1<\/b>. So it is counted, and the answer is <b>1<\/b>.\n<\/p>","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 4.9.2, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYTH, PYTH 3.4, RUBY, SCALA, SCM guile, SCM qobi, ST, TCL, TEXT, WSPC","max_timelimit":"5","source_sizelimit":"50000","problem_author":"witua","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #684273;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>4&#9733;<\/span><span>witua<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"6-06-2012","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/binary-search'>\n                    binary-search\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/cook28'>\n                    cook28\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/maths'>\n                    maths\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/medium-hard'>\n                    medium-hard\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/witua'>\n                    witua\n                <\/a>","user":{"username":null},"time":{"view_start_date":1353262903,"submit_start_date":1353262903,"visible_start_date":1353263400,"end_date":1735669800,"current":1493556752},"todo":false,"problem_status":"unattempted"}