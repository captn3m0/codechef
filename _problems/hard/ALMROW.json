{"category_name":"hard","status":"success","problem_code":"ALMROW","problem_name":"Bear and Almost Row","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3> Read problems statements in <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/LTIME46\/mandarin\/ALMROW.pdf\">Mandarin Chinese<\/a>, <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/LTIME46\/russian\/ALMROW.pdf\">Russian<\/a> and <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/LTIME46\/vietnamese\/ALMROW.pdf\">Vietnamese<\/a> as well.<\/h3>\n\n\n<p>Bearland has <b>N<\/b> cities, numbered 1 through <b>N<\/b>.\nFor every i between 1 and <b>N<\/b>-1 inclusive, there is a road between cities i and i+1.\nThere <b>K<\/b> extra roads: the i-th of them connects two different cities <b>a<\/b><sub>i<\/sub> and <b>b<\/b><sub>i<\/sub>.\nSo, there are <b>N<\/b>-1+<b>K<\/b> roads in total.\nAll roads are bidirectional.<\/p>\n\n<p>You can assume that every two cities are connected by at most one road.<\/p>\n\n<p>Let f(s, t) denote the distance between cities s and t, i.e. the minimum possible number of roads needed to get from one city to the other.<\/p>\n\n<p>Your task is to find the sum of f(s,\u2009t) over all pairs of cities (s,\u2009t) such that s\u2009<\u2009t.<\/p>\n\n\n\n\n\n<h3>Input<\/h3>\n\n<p>The first line of the input contains an integer <b>T<\/b> denoting the number of test cases. The description of <b>T<\/b> test cases follows.<\/p>\n\n<p>\nThe first line of each test case contains an integer <b>N<\/b> denoting the number of cities.\n<\/p>\n\n<p>\nThe second line contains an integer <b>K<\/b> denoting the number of extra roads.\nNote the unusual constraint for <b>K<\/b> (in the constraints section below).\n<\/p>\n\n<p>The i-th of the following <b>K<\/b> lines contains two different integers <b>a<\/b><sub>i<\/sub> and <b>b<\/b><sub>i<\/sub>, denoting cities connected by the i-th road.\nAll <b>N<\/b>-1+<b>K<\/b> roads will be distinct.<\/p>\n\n\n<h3>Output<\/h3>\n<p>For each test case, output a single line containing one integer \u2014 the sum of f(s, t) over all pairs (s, t) such that s < t.\nFor the given constraints, it can be proved that the answer fits in the 64-bit signed type.<\/p>\n\n\n<h3>Constraints<\/h3>\n\n<ul>\n<li>1 \u2264 <b>T<\/b> \u2264 1000<\/li>\n<li>2 \u2264 <b>N<\/b> \u2264 10<sup>6<\/sup><\/li>\n<li>0 \u2264 <b>K<\/b> \u2264 10<\/li>\n<li>1 \u2264 <b>a<\/b><sub>i<\/sub>, <b>b<\/b><sub>i<\/sub> \u2264 <b>N<\/b><\/li>\n<li><b>a<\/b><sub>i<\/sub> \u2260<b>b<\/b><sub>i<\/sub><\/li>\n<li>All <b>N<\/b>-1+<b>K<\/b> roads will be distinct.<\/li>\n<\/ul>\n\n<h3>Subtasks<\/h3>\n<ul>\n<li>Subtask #1 (15 points): 2 \u2264 <b>N<\/b> \u2264 40<\/li>\n<li>Subtask #2 (35 points): The sum of <b>N<\/b> in all test cases won't exceed 200,000.<\/li>\n<li>Subtask #3 (15 points): 0 \u2264 <b>K<\/b> \u2264 1<\/li>\n<li>Subtask #4 (35 points): Original constraints.<\/li>\n<\/ul>\n\n\n\n\n<h3>Example<\/h3>\n\n<pre><b>Input:<\/b>\n4\n4\n2\n1 3\n4 1\n5\n1\n2 5\n20\n3\n1 7\n3 12\n17 19\n1000000\n0\n\n<b>Output:<\/b>\n7\n16\n891\n166666666666500000\n<\/pre>\n\n\n\n<h3>Explanation<\/h3>\n\n<p>The provided example test contains <b>T<\/b> = 4 test cases.\nThe following drawings show the situation for the first two test cases (extra roads are red):<\/p>\n\n<p><img src=\"https:\/\/codechef_shared.s3.amazonaws.com\/uploads\/2017\/03\/LTIME46\/ALMROW.png\" \/><\/p>\n\n<p>In the first test case, there are 4 cities and 2 extra roads 1-3 and 4-1.\nSo we have 5 roads in total: 1-2, 1-3, 1-4, 2-3, 3-4 (see the left drawing).\nThe sought values are:<\/p>\n\n<ul>\n<li>f(1, 2) = f(1, 3) = f(1, 4) = f(2, 3) = f(3, 4) = 1<\/li>\n<li>f(2, 4) = 2<\/li>\n<\/ul>\n\n<p>The answer is 1 + 1 + 1 + 1 + 1 + 2 = 7.<\/p>","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 4.9.2, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYPY, PYTH, PYTH 3.4, RUBY, SCALA, SCM chicken, SCM guile, SCM qobi, ST, TCL, TEXT, WSPC","max_timelimit":"2.5 - 7","source_sizelimit":"50000","problem_author":"errichto","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span>errichto<\/span>","problem_tester":"kingofnumbers","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span>kingofnumbers<\/span>","date_added":"24-03-2017","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/errichto'>\n                    errichto\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/floyd-warshall'>\n                    floyd-warshall\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/hard'>\n                    hard\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/ltime46'>\n                    ltime46\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/shortest-path'>\n                    shortest-path\n                <\/a>","user":{"username":null},"time":{"view_start_date":1490461200,"submit_start_date":1490461200,"visible_start_date":1490461200,"end_date":1735669800,"current":1493556605},"todo":false,"problem_status":"unattempted"}