{"category_name":"hard","status":"success","problem_code":"LMATRIX3","problem_name":"Make It Zero 3","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3> Read problems statements in <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/APRIL14\/mandarin\/LMATRIX3.pdf\">Mandarin Chinese <\/a> and <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/APRIL14\/russian\/LMATRIX3.pdf\">Russian<\/a>.<\/h3>\n<h3>Problem description.<\/h3>\n<p>\nAleksandra is the most popular girl in the city.<br \/>\nEach boy can only dream about dating her.<br \/>\nOther girls want to be like her.\n<\/p>\n<p>\nAleksandra is going to find herself a boyfriend.<br \/>\nOf course such a beauty needs someone special.<br \/>\nThat's why she is going to announce a quiz.<br \/>\nEven you can try your chances at this.<br \/>\nApart from boys, the girl also loves math.<br \/>\nThat's why this quiz is going to be mathematical.\n<\/p>\n<p>\nHas you heard this story before?<br \/>\nIn fact, Aleksandra gave the problem<br \/>\n<a target=\"_blank\" href=\"http:\/\/www.codechef.com\/FEB14\/problems\/LMATRIX2\">Make It Zero 2<\/a><br \/>\nin CodeChef Febrary Challenge.<br \/>\nUnfortunately, no boy can solve that problem optimally in all cases.<br \/>\nTherefore, Aleksandra refactors the problem and asks for the optimal solutions to all boys in the <\/p>\n<p>city.\n<\/p>\n<p>\nShe has one number <b>P<\/b> and one array with <b>N<\/b> elements each.<br \/>\nLet <b>A<sub>i<\/sub><\/b> be the <b>i<\/b><sup>th<\/sup> element of the array.<br \/>\nShe likes <b>0<\/b>, that's why she is going to get rid of all non zero numbers in the array.<br \/>\nIn each turn she may choose 3 integers:<\/p>\n<ul>\n<li><b>1 \u2264 s \u2264 t \u2264 N<\/b><\/li>\n<li><b>0 \u2264 k \u2264 10000<\/b><\/li>\n<\/ul>\n<p>and after this, for all numbers <b>i<\/b> in the array such that: <b>s \u2264 i \u2264 t<\/b>,<br \/>\nshe does the following:<\/p>\n<ul>\n<li><b>A<sub>i<\/sub> = (k + A<sub>i<\/sub>) modulo P<\/b><\/li>\n<\/ul>\n<p>It takes her a lot of turns to do this. That's why she gives this problem to all boys in the <\/p>\n<p>city<br \/>\nand promises to go for a date with the one who will solve all tasks with the fewest number of <\/p>\n<p>moves.<br \/>\nIt is your chance to walk with such a wonderful girl. Just do it!\n<\/p>\n<h3>Input<\/h3>\n<p>\nThe first line contains one interger <b>T<\/b> indicates the number of testcases.\n<\/p>\n<p>\nThe first line of each testcase contains two space-separated integers <b>N<\/b> and <b>P<\/b>,<br \/>\ndenoting the size of the array and the parameter <b>P<\/b>.\n<\/p>\n<p>\nThe size of the array may be very large.<br \/>\nWe represent it by concatenating (in order) many subarrays.<br \/>\nThe next line contains one interger <b>M<\/b>, denoting number of subarrays.<br \/>\nThe next <b>M<\/b> lines each contains 4 integers <b>F<sub>i<\/sub><\/b>,<br \/>\n<b>C<sub>i<\/sub><\/b>, <b>D<sub>i<\/sub><\/b> and <b>L<sub>i<\/sub><\/b>.<br \/>\nAll subarrays are generated as follows:<\/p>\n<ul>\n<li>Denote <b>B<sub>i,j<\/sub><\/b> as the <b>j<sup>th<\/sup><\/b> element of the <b>i<sup>th<\/sup><\/b> subarray.<\/li>\n<li><b>B<sub>i,1<\/sub> = F<sub>i<\/sub><\/b><\/li>\n<li>For each <b>1 &lt; j \u2264 L<sub>i<\/sub><\/b>, <b>B<sub>i,j<\/sub> = (B<sub>i,j-1<\/sub> * C<sub>i<\/sub> + D<sub>i<\/sub>) module P<\/b><\/li>\n<\/ul>\n\n<p>\nYou can assume that <b>N = L<sub>1<\/sub> + L<sub>2<\/sub> + ... + L<sub>M<\/sub><\/b>.\n<\/p>\n<h3>Output<\/h3>\n<p>For each testcase, print one line containing one integer <b>C<\/b>,<br \/>\ndenoting the minimal number of the moves for erasing all non zero numbers from the array. <\/p>\n<h3>Constraints<\/h3>\n<ul>\n<li><b>1<\/b> \u2264 <b>T<\/b> \u2264 <b>100<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>M<\/b> \u2264 <b>100<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>P<\/b> \u2264 <b>10<\/b><\/li>\n<li><b>0<\/b> \u2264 <b>F<sub>i<\/sub><\/b>, <b>C<sub>i<\/sub><\/b>, <b>D<sub>i<\/sub><\/b> &lt; <b>P<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>L<sub>i<\/sub><\/b> \u2264 <b>10<sup>15<\/sup><\/b><\/li>\n<\/ul>\n<h3>Example<\/h3>\n<pre>\n<b>Input:<\/b>\n3\n3 1\n1\n0 0 0 3\n4 10\n4\n3 0 0 1\n5 0 0 1\n5 0 0 1\n3 0 0 1\n6 6\n1\n0 1 1 6\n\n<b>Output:<\/b>\n0\n2\n5\n\n<\/pre><h3>Explanation<\/h3>\n<p>\n<b> Example case 1: <\/b> All numbers are zero.\n<\/p>\n<p>\n<b> Example case 2: <\/b> Initially, A = {3, 5, 5, 3}. In the first turn, we choose s=2, t=3, and k=8, after which A = {3, 3, 3, 3}. Then all numbers will become zero after the second turn.\n<\/p>\n<p>\n<b> Example case 3: <\/b> Initially, A = {0, 1, 2, 3, 4, 5}. One optimal solution is to change non-zero numbers to zero one by one.\n<\/p>\n","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 4.9.2, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYTH, PYTH 3.4, RUBY, SCALA, SCM guile, SCM qobi, ST, TCL, TEXT, WSPC","max_timelimit":"5","source_sizelimit":"50000","problem_author":"ACRush","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #D0011B;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>7&#9733;<\/span><span>ACRush<\/span>","problem_tester":"white_king","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span>white_king<\/span>","date_added":"3-03-2014","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/ACRush'>\n                    ACRush\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/april14'>\n                    april14\n                <\/a>","editorial_url":"http:\/\/discuss.codechef.com\/problems\/LMATRIX3","user":{"username":null},"time":{"view_start_date":1397468225,"submit_start_date":1397468225,"visible_start_date":1397467741,"end_date":1735669800,"current":1493556759},"todo":false,"problem_status":"unattempted"}