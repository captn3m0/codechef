{"category_name":"challenge","status":"success","problem_code":"SEASNAKE","problem_name":"Sereja and Snake","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><p>This problem is about the classical video game, called Snake.<br \/>We ask you to solve the simplified version of the game.<\/p>\n<p>The rules are quite simple and natural, but they will be described here formally.<\/p>\n<p>You are given a rectangular field of <b>N<\/b> rows and <b>M<\/b> columns. Cells in this field are identified by their coordinates.<br \/>\n(<b>X<\/b>, <b>Y<\/b>) is co-ordinate of a cell in this field if <b>0 \u2264 X \u2264 N-1<\/b> and <b>0 \u2264 Y \u2264 M-1<\/b>, where <b>X<\/b> is row number of the cell and <b>Y<\/b> is column number of the cell.<\/p>\n<p>There is a snake in the field. Initially it consists of a single cell, but it can grow. A Snake can be described by the sequence of distinct cells it occupies in the field, <b>(X<sub>1<\/sub>, Y<sub>1<\/sub>), (X<sub>2<\/sub>, Y<sub>2<\/sub>) ... (X<sub>K<\/sub>, Y<sub>K<\/sub>) <\/b>. The first cell of this sequence is called the <i>head<\/i> and the last cell is called its <i>tail<\/i>. Initially, the snake consists of a single cell (<b>0<\/b>, <b>0<\/b>), and this cell is the head as well as the tail at the same time.<\/p>\n<p>\nThe snake can make a move in four directions. The head cell (<b>X<sub>1<\/sub><\/b>, <b>Y<sub>1<\/sub><\/b>) can be moved to one of the cells ((<b>X<sub>1<\/sub><\/b>-1+<b>N<\/b>)%<b>N<\/b>, <b>Y<sub>1<\/sub><\/b>), ((<b>X<sub>1<\/sub><\/b>+1)%<b>N<\/b>, <b>Y<sub>1<\/sub><\/b>),<br \/>\n(<b>X<sub>1<\/sub><\/b>, (<b>Y<sub>1<\/sub><\/b>-1+<b>M<\/b>)%<b>M<\/b>) or (<b>X<sub>1<\/sub><\/b>, (<b>Y<sub>1<\/sub><\/b>+1)%<b>M<\/b>), i.e. to one of the four neighbours. Let the coordinate of the new cell to which snake's head moves be <b>(X<sub>new<\/sub>, Y<sub>new<\/sub>)<\/b>. Then, there are two cases:<\/p>\n<p>\n<b>1<\/b>) The new cell <b>(X<sub>new<\/sub>, Y<sub>new<\/sub>)<\/b> contains an apple. In this case, the snake <i>eats<\/i> the apple, and the sequence describing the new state of snake becomes <b>(X<sub>new<\/sub>, Y<sub>new<\/sub>), (X<sub>1<\/sub>, Y<sub>1<\/sub>), (X<sub>2<\/sub>, Y<sub>2<\/sub>) ... (X<sub>K<\/sub>, Y<sub>K<\/sub>) <\/b>. That is, the new cell is appended to the beginning of the sequence by shifting all previous elements to the right. Obviously, the length of the snake will be increased by one after this move. Then, the apple is removed from this cell, and a new apple appears somewhere else.<\/p>\n<p>\n<b>2<\/b>) Otherwise, <i>first<\/i>, the length of snake is shortened by 1 by removing the tail. Then the new cell is appended to the beginning of the sequence, just like in previous case. In this case, the sequence describing the new state of snake becomes <b>(X<sub>new<\/sub>, Y<sub>new<\/sub>), (X<sub>1<\/sub>, Y<sub>1<\/sub>), (X<sub>2<\/sub>, Y<sub>2<\/sub>) ... (X<sub>K-1<\/sub>, Y<sub>K-1<\/sub>) <\/b>. The only difference from the previous case is that the tail cell will disappear, so the number of cells will not change. Note that <b>(X<sub>new<\/sub>, Y<sub>new<\/sub>)<\/b> can be same as <b>(X<sub>K<\/sub>, Y<sub>K<\/sub>)<\/b> in this case without causing any conflict. <b>(X<sub>K-1<\/sub>, Y<sub>K-1<\/sub>)<\/b> will become the new tail cell [unless <b>K=1<\/b> in which case <b>(X<sub>new<\/sub>, Y<sub>new<\/sub>)<\/b> will be the head as well as the tail].<\/p>\n<p><b>N*M-1<\/b> apples will appear in the field. You are given the sequence of <b>N*M-1<\/b> cells (not necessarily distinct). Initially, there will be an apple in the first cell from the sequence. When the snake eats it, a new apple appears in the second cell from the sequence, and so on. Your goal here is to make the snake eat all the <b>N*M-1<\/b> apples in <i>minimal<\/i> number of moves.<\/p>\n<p>It is guaranteed that the first apple will not appear in the cell (<b>0<\/b>, <b>0<\/b>). It is also guaranteed that any two consecutive cells from the sequence will not be the same. You can also assume that <b>N*M<\/b> is even.<\/p>\n<p>\n<b>Note<\/b><\/p>\n<ul>\n<li>You should move your snake in such a way that at all times, the sequence describing the snake has distinct elements.<\/li>\n<li>The game is different from conventional video game because the new apple can arrive on a cell already occupied by the snake. This case is no different and the snake must <i>eat<\/i> this apple as well by moving its <i>head<\/i> to location of the apple.<\/li>\n<\/ul>\n<h3>Input<\/h3>\n<p>The first line of the input consists of two numbers - <b>N<\/b> and <b>M<\/b>.<br \/><br \/>\nThen, <b>N*M-1<\/b> lines follow, the i-th such line consists of two integers - the coordinates of the cell where the <b>i<\/b>-th apple will appear.<\/p>\n<h3>Output<\/h3>\n<p>The first line of the output should contain <b>Q<\/b> - the number of moves. <b>Q<\/b> should not exceed <b>900000<\/b>.<br \/><br \/>\nThen, <b>Q<\/b> lines should follow. The <b>i<\/b>-th number should be equal to:<br \/><br \/>\n<b>0<\/b> - in case you move the head of the snake to the cell ((<b>X<sub>1<\/sub><\/b>-1+<b>N<\/b>)%<b>N<\/b>, <b>Y<sub>1<\/sub><\/b>)<br \/><br \/>\n<b>1<\/b> - in case you move the head of the snake to the cell ((<b>X<sub>1<\/sub><\/b>+1)%<b>N<\/b>, <b>Y<sub>1<\/sub><\/b>)<br \/><br \/>\n<b>2<\/b> - in case you move the head of the snake to the cell (<b>X<sub>1<\/sub><\/b>, (<b>Y<sub>1<\/sub><\/b>+<b>M<\/b>-1)%<b>M<\/b>)<br \/><br \/>\n<b>3<\/b> - in case you move the head of the snake to the cell (<b>X<sub>1<\/sub><\/b>, (<b>Y<sub>1<\/sub><\/b>+1)%<b>M<\/b>)<br \/><\/p>\n<h3>Constraints<\/h3>\n<p><ul>\n<li>1 &lt;= <b>N<\/b> &lt;= 30<\/li>\n<li>1 &lt;= <b>M<\/b> &lt;= 30<\/li>\n<\/ul>\n<\/p>\n<h3>Example<\/h3>\n<pre><b>Input:<\/b>\n2 2\n1 1\n1 0\n0 1\n\n<b>Output:<\/b>\n5\n3 1 3 1 3\n\n<\/pre><h3>Scoring &amp; the test data generation<\/h3>\n<p>Your score is the number of the moves made, you should minimise it.<br \/><br \/>\nThe sequence of the cells is generated randomly and the cells are distributed uniformly.<\/p>\n","languages_supported":"C, CPP14, JAVA, PYTH, PYTH 3.5, CS2, PAS fpc, PAS gpc, RUBY, PHP, GO, NODEJS, HASK, SCALA, D, PERL, FORT, WSPC, ADA, CAML, ICK, BF, ASM, CLPS, PRLG, ICON, SCM qobi, PIKE, ST, NICE, LUA, BASH, NEM, LISP sbcl, LISP clisp, SCM guile, JS, ERL, TCL, PERL6, TEXT, CLOJ, FS","max_timelimit":"1","source_sizelimit":"50000","problem_author":"sereja","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>sereja<\/span>","problem_tester":"xcwgf666","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>xcwgf666<\/span>","date_added":"8-08-2013","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/challenge'>challenge<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/sept13'>sept13<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/sereja'>sereja<\/a>","editorial_url":"http:\/\/discuss.codechef.com\/problems\/SEASNAKE","time":{"view_start_date":1379324373,"submit_start_date":1379324373,"visible_start_date":1379323800,"end_date":1735669800,"current":1525199673},"user":{"username":""},"todo":false,"problem_status":"unattempted","is_direct_submittable":false}