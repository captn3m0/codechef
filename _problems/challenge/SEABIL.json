{"category_name":"challenge","status":"success","problem_code":"SEABIL","problem_name":"(CH) Serejs and Billiards","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3> Read problems statements in <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/APRIL17\/mandarin\/SEABIL.pdf\">Mandarin Chinese<\/a>, <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/APRIL17\/russian\/SEABIL.pdf\">Russian<\/a> and <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/APRIL17\/vietnamese\/SEABIL.pdf\">Vietnamese<\/a> as well.<\/h3>\n\nSereja likes to play billiards. Here is simplified version of it.\n<p> <\/p>\nInitially there is a table of size <b>N*N<\/b>. The table is divided by <b>N+1<\/b> horizontal and <b>N+1<\/b> vertical lines. The lines are numbered from <b>0<\/b>  to <b>N<\/b> from left to the right and in the same way from <b>0<\/b> in the top to <b>N<\/b> in the bottom. The intersection of the horizontal Line <b>i<\/b> and the vertical Line <b>j<\/b> is a point which will be denoted by <b>(i,j)<\/b>. The points <b>(0,0), (0, N), (N, 0), (N, N)<\/b> are the corners of the table. Initially, there are <b>M<\/b> balls on the table, at the points <b>(X<sub>i<\/sub>, Y<sub>i<\/sub>) (0 \u2264 X<sub>i<\/sub>, Y<sub>i<\/sub> \u2264 N)<\/b>. Each ball has its cost <b>Z<sub>i<\/sub><\/b>. \n<p><\/p>\nIn one move, Sereja can hit any one ball by giving it a velocity <b>(V<sub>x<\/sub>, V<sub>y<\/sub>)<\/b>, (<b>V<sub>x<\/sub><\/b> and <b>V<sub>y<\/sub><\/b> should belong to the set {-1, 0, 1}) and a starting energy <b>E (1 \u2264 E \u2264 4 * N)<\/b>. After this there will be <b>E<\/b> actions:\n<ul>\n<li>At the beginning of each action, the ball will be moving from the old point <b>(X, Y)<\/b> to a new point <b>(X', Y')<\/b>. We initially set <b>X' = X+V<sub>x<\/sub><\/b> and <b>Y' = Y+V<sub>y<\/sub><\/b>.<\/li>\n<li>But if the new point becomes equal to <b>(-1, -1)<\/b> or <b>(-1, N + 1)<\/b> or <b>(N + 1, -1)<\/b> or <b>(N + 1, N + 1)<\/b> then it is counted as the ball being pocketed, and hence the cost of the ball is added to the total score. The ball is then removed from the table, and no more actions are produced. This move ends.<\/li>\n<li>If <b>X'<\/b> becomes equal to <b>-1<\/b>, we replace <b>X'<\/b> by <b>1<\/b> and <b>V<sub>x<\/sub><\/b> by <b>1<\/b>.<\/li>\n<li>If <b>X'<\/b> becomes equal to <b>N + 1<\/b>, we replace <b>X'<\/b> by <b>N-1<\/b> and <b>V<sub>x<\/sub><\/b> by <b>-1<\/b>.<\/li>\n<li>If <b>Y'<\/b> becomes equal to <b>-1<\/b>, we replace <b>Y'<\/b> by <b>1<\/b> and <b>V<sub>y<\/sub><\/b> by <b>1<\/b>.<\/li>\n<li>If <b>Y'<\/b> becomes equal to <b>N + 1<\/b>, we replace <b>Y'<\/b> by <b>N-1<\/b> and <b>V<sub>y<\/sub><\/b> by <b>-1<\/b>.<\/li>\n<li>If the new point already contains another ball we remove the old ball and the new ball will have a new cost which is the sum of both the balls. The process will be continued with the new ball, with whatever velocity it already had.<\/li>\n<\/ul>\nSereja wants to make at most <b>4*M<\/b> moves. Each move also decreases the total score by <b>1<\/b>. Your task is to play the game so as to maximize the total score.\n<p> <\/p>\n\n\n\n<h3>Input<\/h3>\n<ul>\n<li>The first line of the input contains an integer <b>T<\/b> denoting the number of test cases.<\/li>\n<li>The first line of each test case contains two integers <b>N,M<\/b>.<\/li>\n<li>The next <b>M<\/b> lines of the test case contains three numbers <b>X<sub>i<\/sub>, Y<sub>i<\/sub>, Z<sub>i<\/sub><\/b> each.<\/li>\n<\/ul>\n<p> <\/p>\n\n<h3>Output<\/h3>\n<ul>\n<li>For each test case, the first line should be an integer <b>K<\/b> - the number of moves you want to make.<\/li>\n<li>The next <b>K<\/b> lines should contain five numbers <b>X, Y, V<sub>x<\/sub>, V<sub>y<\/sub>, E<\/b>. You should ensure that the point <b>(X, Y)<\/b> contains some ball at that moment. Otherwise, your solution will be marked as WA.<\/li>\n<\/ul> \n<p> <\/p>\n\n<h3>Constraints<\/h3>\n<li><b>1<\/b> \u2264 <b>T<\/b> \u2264 <b>10<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>N<\/b> \u2264 <b>100<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>M<\/b> \u2264 <b>1000<\/b><\/li>\n<li><b>0<\/b> \u2264 <b> X<sub>i<\/sub>, Y<sub>i<\/sub> <\/b> \u2264 <b>N<\/b><\/li>\n<li><b>-100<\/b> \u2264 <b> Z<sub>i<\/sub> <\/b> \u2264 <b>100<\/b><\/li>\n<li>Initially, no two balls will be at the same point.<\/li>\n<\/ul>\n<p> <\/p>\n<h3>Example<\/h3>\n<pre><b>Input:<\/b>\n3\n3 3\n1 1 2\n2 2 2\n3 0 2\n100 1\n99 99 15\n100 2\n60 70 0\n90 15 -100\n\n<b>Output:<\/b>\n2\n2 2 -1 -1 4\n3 0 -1 1 4\n1\n99 99 1 1 50\n0\n\n\n<\/pre>\n\n<h3>Explanation<\/h3>\n\n<p><b>Test case 2.<\/b> The grid size is <b>N<\/b> = 100. To get points for the only ball, we should give it velocity (1, 1) and the starting energy at least 2, so it could reach the point (101, 101). The starting energy is 50 in the provided output, what is also allowed and will lead to the ball reaching the point (101, 101) after 2 units of time and giving us 15 points. But because we have made 1 move, the total score reduces by 1, and hence the final total score is 15 - 1 = 14.<\/p> \n\n<p><b>Test case 3.<\/b> There are two balls, both with non-positive score (cost). Please note that it's allowed to not make moves at all, as you can see in the provided output.<\/p>\n\n<h3>Scoring<\/h3>\nYour judge score for each test case will be calculated as <b>max(total_score, 1)<\/b>, where <b>total_score<\/b> is the total score described in the statement. \nIf <b>S<\/b> is your total judge score over all the tests, and if <b>W<\/b> is the maximum total judge score among all participants, then your displayed score will be equal to <b>S\/W<\/b>.\n<p><\/p>\n<h3>Test generation<\/h3>\nEach test will contain <b>T=10<\/b> and <b>N = 100<\/b>. <b>M<\/b> will be generated randomly in range [500, 1000]. All balls positions will be generated randomly. There will be four types of tests:\n<ul>\n<li>Each Z<sub>i<\/sub> is a random value in the range [1, 3]<\/li>\n<li>Each Z<sub>i<\/sub> is a random value in the range [-3, 3]<\/li>\n<li>Each Z<sub>i<\/sub> is a random value in the range [1, 100]<\/li>\n<li>Each Z<sub>i<\/sub> is a random value in the range [-100, 100]<\/li>\n<\/ul>\n<p><\/p>","languages_supported":"C, CPP14, JAVA, PYTH, PYTH 3.5, PYPY, CS2, PAS fpc, PAS gpc, RUBY, PHP, GO, NODEJS, HASK, SCALA, D, PERL, FORT, WSPC, ADA, CAML, ICK, BF, ASM, CLPS, PRLG, ICON, SCM qobi, PIKE, ST, NICE, LUA, BASH, NEM, LISP sbcl, LISP clisp, SCM guile, JS, ERL, TCL, PERL6, TEXT, SCM chicken, CLOJ, FS","max_timelimit":"1","source_sizelimit":"50000","problem_author":"sereja","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>sereja<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"7-10-2016","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/april17'>april17<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/challenge'>challenge<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/sereja'>sereja<\/a>","time":{"view_start_date":1492421400,"submit_start_date":1492421400,"visible_start_date":1492421400,"end_date":1735669800,"current":1525199670},"user":{"username":""},"todo":false,"problem_status":"unattempted","is_direct_submittable":false}