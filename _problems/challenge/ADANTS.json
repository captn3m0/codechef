{"category_name":"challenge","status":"success","problem_code":"ADANTS","problem_name":"(Challenge) 300 IQ Ants","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/hindi\/ADANTS.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/bengali\/ADANTS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/mandarin\/ADANTS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/russian\/ADANTS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/vietnamese\/ADANTS.pdf) as well.\r\n\r\nThere are $N$ ants (numbered $1$ through $N$) in a plane. For simplicity, we will represent the ants by points. For each valid $i$, initially, the position of the $i$-th ant is $(X_i,Y_i)$.\r\n\r\nAda wants to gather all ants at a single point. In order to do that, she wants to give instructions to the ants. In each instruction:\r\n- First, Ada chooses a simple convex polygon with $M$ vertices (numbered $1$ through $M$ clockwise) such that there is at least one ant in each of its vertices and no three of its vertices are collinear. The polygon may have area $0$, in which case it is a line segment with only two vertices.\r\n- Then, for each $i$ from $1$ to $M-1$ (inclusive) in this order:\r\n    - Let's denote the set of all ants currently standing at the $i$-th vertex by $A_i$. Also, let $B_i$ denote its subset that consists of all ants that were standing at this vertex when Ada chose this polygon.\r\n    - Ada chooses an ant from the set $B_i$ (let's denote it by $c_i$) and tells this ant, together with all other ants from the set $A_i$, to move to the nearest point $P$ with integer coordinates (different from the $i$-th vertex) that belongs to the side of the polygon between vertices $i$ and $i+1$.\r\n    - If the point $P$ already contains some other ants, then these ants and the ants from the set $A_i$ will never separate and they will move together from then on. In other words, whenever two ants $a$ and $b$ are at the same position and Ada tells ant $a$ to move, then ant $b$ will move together with ant $a$.\r\n\r\nAnts are very intelligent creatures (with an IQ around 300), so they can easily perform this instruction. However, ants are lazy, so the sum of $M$ over all instructions must not exceed $5 \\cdot 10^5$. Help Ada minimise the number of instructions she needs to give to the ants in order to gather them at a single point.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $N$.\r\n- $N$ lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $X_i$ and $Y_i$ denoting the position of the $i$-th ant.\r\n\r\n### Output\r\nFirst, print a line containing a single integer $Q$ \u2015 the number of instructions. Then, print $Q$ lines; each of these lines should describe one instruction in the format `M c_1 c_2 ... c_M`.\r\n\r\n### Example Input\r\n```\r\n5\r\n0 0\r\n2 4\r\n4 3\r\n5 1\r\n3 0\r\n```\r\n\r\n### Example Output\r\n```\r\n2\r\n4 1 2 3 4\r\n3 1 3 5\r\n```\r\n\r\n### Explanation\r\nIn the first instruction, ant A moves to the point $(1,2)$, then ant B moves to ant C, and then they move together to ant D.\r\n\r\n<img src=\"https:\/\/codechef_shared.s3.amazonaws.com\/download\/MARCH20\/ADANTS\/ADANTS1.png\"><\/img>\r\n\r\nAfter the second instruction, the three ants end up at the point $(3,0)$.\r\n\r\n<img src=\"https:\/\/codechef_shared.s3.amazonaws.com\/download\/MARCH20\/ADANTS\/ADANTS2.png\"><\/img>\r\n\r\n### Test generation and constraints\r\nThere are five test files.\r\n- In test file 1, the ants are placed in a chessboard-like pattern, i.e. at all points $(x, y)$ such that $0 \\le x,y \\le 500$ and $x+y$ is even.\r\n- In test file 2, the positions of the ants are generated in the following way:\r\n    - Consider the square $S$ whose lower left corner is $(0,0)$ and upper right corner is $(2^{10}, 2^{10})$.\r\n    - Repeat the following: Choose two points $P$ and $Q$ on the perimeter of $S$ uniformly randomly. Consider all points on the line segment $\\mathsf{PQ}$ with integer coordinates that do not contain ants yet. Sort these points first by non-decreasing first coordinate and then by non-decreasing second coordinate. Add an ant at each of these points, in this order.\r\n    - The process continues until we get $N = 2^{17}$ distinct points with ants.\r\n- In test file 3, the positions of the ants are generated similarly to test file 2, but the points $P$ and $Q$ are always chosen uniformly randomly among all points inside or on the perimeter of the square $S$.\r\n- In test files 4 and 5, the positions of the ants are $N = 2^{17}$ distinct points with coordinates chosen independently and uniformly randomly between $0$ and $2^{10}$ (inclusive).\r\n\r\n### Scoring\r\nIf any of your instructions are invalid, the sum of $M$ over all instructions exceeds $5 \\cdot 10^5$ or the ants are not gathered at a single point after performing all instructions, you will receive the Wrong Answer verdict. Otherwise, the score of a test file is the number of performed instuctions. The score of a submission is the sum of scores of all test files. Your goal is to minimise the score of your submission.\r\n\r\nThere are five test files. During the contest, the displayed score will account for exactly 3 test files, i.e. your score reflects your submission's performance on 60% of the test files. However, if your program gets a non-AC verdict on any test file, your submission's verdict will be non-AC. In other words, an AC verdict denotes that your program runs successfully on all the test files. After the end of the contest, your score will be changed to include the sum of your program's scores over the other 2 test files.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/hindi\/ADANTS.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/bengali\/ADANTS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/mandarin\/ADANTS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/russian\/ADANTS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/MARCH20\/vietnamese\/ADANTS.pdf) as well.\r\n\r\nThere are $N$ ants (numbered $1$ through $N$) in a plane. For simplicity, we will represent the ants by points. For each valid $i$, initially, the position of the $i$-th ant is $(X_i,Y_i)$.\r\n\r\nAda wants to gather all ants at a single point. In order to do that, she wants to give instructions to the ants. In each instruction:\r\n- First, Ada chooses a simple convex polygon with $M$ vertices (numbered $1$ through $M$ clockwise) such that there is at least one ant in each of its vertices and no three of its vertices are collinear. The polygon may have area $0$, in which case it is a line segment with only two vertices.\r\n- Then, for each $i$ from $1$ to $M-1$ (inclusive) in this order:\r\n    - Let's denote the set of all ants currently standing at the $i$-th vertex by $A_i$. Also, let $B_i$ denote its subset that consists of all ants that were standing at this vertex when Ada chose this polygon.\r\n    - Ada chooses an ant from the set $B_i$ (let's denote it by $c_i$) and tells this ant, together with all other ants from the set $A_i$, to move to the nearest point $P$ with integer coordinates (different from the $i$-th vertex) that belongs to the side of the polygon between vertices $i$ and $i+1$.\r\n    - If the point $P$ already contains some other ants, then these ants and the ants from the set $A_i$ will never separate and they will move together from then on. In other words, whenever two ants $a$ and $b$ are at the same position and Ada tells ant $a$ to move, then ant $b$ will move together with ant $a$.\r\n\r\nAnts are very intelligent creatures (with an IQ around 300), so they can easily perform this instruction. However, ants are lazy, so the sum of $M$ over all instructions must not exceed $5 \\cdot 10^5$. Help Ada minimise the number of instructions she needs to give to the ants in order to gather them at a single point.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $N$.\r\n- $N$ lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $X_i$ and $Y_i$ denoting the position of the $i$-th ant.\r\n\r\n### Output\r\nFirst, print a line containing a single integer $Q$ \u2015 the number of instructions. Then, print $Q$ lines; each of these lines should describe one instruction in the format `M c_1 c_2 ... c_M`.\r\n\r\n### Example Input\r\n```\r\n5\r\n0 0\r\n2 4\r\n4 3\r\n5 1\r\n3 0\r\n```\r\n\r\n### Example Output\r\n```\r\n2\r\n4 1 2 3 4\r\n3 1 3 5\r\n```\r\n\r\n### Explanation\r\nIn the first instruction, ant A moves to the point $(1,2)$, then ant B moves to ant C, and then they move together to ant D.\r\n\r\n<img src=\"https:\/\/codechef_shared.s3.amazonaws.com\/download\/MARCH20\/ADANTS\/ADANTS1.png\"><\/img>\r\n\r\nAfter the second instruction, the three ants end up at the point $(3,0)$.\r\n\r\n<img src=\"https:\/\/codechef_shared.s3.amazonaws.com\/download\/MARCH20\/ADANTS\/ADANTS2.png\"><\/img>\r\n\r\n### Test generation and constraints\r\nThere are five test files.\r\n- In test file 1, the ants are placed in a chessboard-like pattern, i.e. at all points $(x, y)$ such that $0 \\le x,y \\le 500$ and $x+y$ is even.\r\n- In test file 2, the positions of the ants are generated in the following way:\r\n    - Consider the square $S$ whose lower left corner is $(0,0)$ and upper right corner is $(2^{10}, 2^{10})$.\r\n    - Repeat the following: Choose two points $P$ and $Q$ on the perimeter of $S$ uniformly randomly. Consider all points on the line segment $\\mathsf{PQ}$ with integer coordinates that do not contain ants yet. Sort these points first by non-decreasing first coordinate and then by non-decreasing second coordinate. Add an ant at each of these points, in this order.\r\n    - The process continues until we get $N = 2^{17}$ distinct points with ants.\r\n- In test file 3, the positions of the ants are generated similarly to test file 2, but the points $P$ and $Q$ are always chosen uniformly randomly among all points inside or on the perimeter of the square $S$.\r\n- In test files 4 and 5, the positions of the ants are $N = 2^{17}$ distinct points with coordinates chosen independently and uniformly randomly between $0$ and $2^{10}$ (inclusive).\r\n\r\n### Scoring\r\nIf any of your instructions are invalid, the sum of $M$ over all instructions exceeds $5 \\cdot 10^5$ or the ants are not gathered at a single point after performing all instructions, you will receive the Wrong Answer verdict. Otherwise, the score of a test file is the number of performed instuctions. The score of a submission is the sum of scores of all test files. Your goal is to minimise the score of your submission.\r\n\r\nThere are five test files. During the contest, the displayed score will account for exactly 3 test files, i.e. your score reflects your submission's performance on 60% of the test files. However, if your program gets a non-AC verdict on any test file, your submission's verdict will be non-AC. In other words, an AC verdict denotes that your program runs successfully on all the test files. After the end of the contest, your score will be changed to include the sum of your program's scores over the other 2 test files.\r\n","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, NEM","max_timelimit":"7","source_sizelimit":"50000","problem_author":"alei","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #D0011B;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>7&#9733;<\/span><span class='m-username--link'>alei<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"19-02-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/alei'>alei<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/challenge'>challenge<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/march20'>march20<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/tmwilliamlin'>tmwilliamlin<\/a>","problem_difficulty_level":"Unavailable","user_zen_mode":false,"best_tag":"","editorial_url":"https:\/\/discuss.codechef.com\/problems\/ADANTS","time":{"view_start_date":1112031000,"submit_start_date":1112031000,"visible_start_date":1112031000,"end_date":1735669800,"current":1643798005},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=ADANTS","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}