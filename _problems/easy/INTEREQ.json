{"category_name":"easy","status":"success","problem_code":"INTEREQ","problem_name":"Interactive Equivalency","body":"### Read problems statements in [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK132\/mandarin\/INTEREQ.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/COOK132\/russian\/INTEREQ.pdf), and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK132\/bengali\/INTEREQ.pdf) as well.\n\nTwo arrays $A$ and $B$ of size $N$ are **equivalent** if for every $(i,j)$ $(1 \\le i \\lt j \\le N)$, $B_i = B_j$ if and only if $A_i = A_j$. For example, $[1,2,2]$, $[10,11,11]$, $[5,1,1]$ are equivalent, while $[1,2,3,1]$, $[10,20,10,10]$ are not.\n\nThere is a hidden array of $N$ integers, where the elements are numbered from $A_1, A_2, \\dots, A_N$. Your task is to guess any array which is equivalent to the hidden array by asking the following query at most $Q$ times. The elements of the guessed array must be within the range $[1,10^{9}]$.\n\nIn each query, you give a subset of indices $\\{i_1,i_2,\\dots,i_k\\}$ in the array i.e some subset of $\\{1,2,\\dots,N\\}$ and the judge returns the frequency of **most** frequent element among $\\{A_{i_1}, A_{i_2}, \\dots, A_{i_k}\\}$. Note that the indices must be distinct and the order doesn't matter.\n\nFor example, consider the array $[10,3,1,10,1,1,3]$.\n- The ouput of query $\\{2,3,4,7\\}$ is $2$. ($3$ occurs maximum number of times i.e $2$ times)\n- Ouput of query $\\{2,3,1,4,5\\}$ is $2$. (Both $1$ and $10$ occur $2$ times)\n\n### Interaction\nFirst, you should read the number of test cases $T$.\n\nFor each test case, you should read two integers $N$ and $Q$.\n\nThen you may ask questions:\n- Output $?$ followed by an integer denoting the number of elements in subset followed by the indices $? k i_1 i_2 \\dots i_k$.\n- Read an integer $x$ denoting the answer to your query.\n- If the query was invalid or you have exceeded the query limit, judge prints `'-1'` and exits with wrong answer verdict. In this case, you must also terminate your program.\n\nWhen you have determined the answer, print the character $!$ followed by $N$ space-separated integers denoting the array $! A_1 A_2 \\dots A_N$. Note that this does not count towards a query.\n\nNow you must read an integer denoting that your answer is correct or not.\n- If your answer is correct, judge prints `'1'`. In this case, you should continue solving the remaining test cases.\n- If your answer is incorrect, judge prints `'-1'` and exits with wrong answer verdict. You must also terminate your program in this case otherwise, you may receive any verdict. \n\n### Constraints\n- $1 \\leq T \\leq 10$\n- $2 \\leq N \\leq 100$\n- $Q = 6N$\n- For the given constraints, it is guaranteed that the answer can be found in the given number of queries.\n\n### Sample interaction\n<pre>\nYou       Grader\n          1\n          3 18\n? 2 1 2\n          1\n? 3 1 2 3 \n          2\n? 2 2 3\n          1\n? 2 1 3\n          2\n! 3 4 3\n          1\n<\/pre>\n### Explanation\nThe hidden array was $A$ = $[10,20,10]$.\n- We ask a query for subset $\\{1,2\\}$. The grader responds with $1$ since both $10$ and $20$ occur $1$ time.\n- Then we query for $\\{1,2,3\\}$. The grader responds with $2$ because frequency of $10$ is $2$.\n- Then we query for $\\{2,3\\}$. Grader responds with $1$ since both elements are distinct.\n- Lastly we query for $\\{1,3\\}$ and the grader responds with $2$ i.e frequency of $10$.\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"- $1 \\leq T \\leq 10$\n- $2 \\leq N \\leq 100$\n- $Q = 6N$","constraintsState":false,"subtasks":"- 30 points : $1 \\leq R \\leq 10000$\n- 70 points : $1 \\leq R \\leq 10^9$\n","subtasksState":false,"statement":"### Read problems statements in [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK132\/mandarin\/INTEREQ.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/COOK132\/russian\/INTEREQ.pdf), and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK132\/bengali\/INTEREQ.pdf) as well.\n\nTwo arrays $A$ and $B$ of size $N$ are **equivalent** if for every $(i,j)$ $(1 \\le i \\lt j \\le N)$, $B_i = B_j$ if and only if $A_i = A_j$. For example, $[1,2,2]$, $[10,11,11]$, $[5,1,1]$ are equivalent, while $[1,2,3,1]$, $[10,20,10,10]$ are not.\n\nThere is a hidden array of $N$ integers, where the elements are numbered from $A_1, A_2, \\dots, A_N$. Your task is to guess any array which is equivalent to the hidden array by asking the following query at most $Q$ times. The elements of the guessed array must be within the range $[1,10^{9}]$.\n\nIn each query, you give a subset of indices $\\{i_1,i_2,\\dots,i_k\\}$ in the array i.e some subset of $\\{1,2,\\dots,N\\}$ and the judge returns the frequency of **most** frequent element among $\\{A_{i_1}, A_{i_2}, \\dots, A_{i_k}\\}$. Note that the indices must be distinct and the order doesn't matter.\n\nFor example, consider the array $[10,3,1,10,1,1,3]$.\n- The ouput of query $\\{2,3,4,7\\}$ is $2$. ($3$ occurs maximum number of times i.e $2$ times)\n- Ouput of query $\\{2,3,1,4,5\\}$ is $2$. (Both $1$ and $10$ occur $2$ times)\n\n### Interaction\nFirst, you should read the number of test cases $T$.\n\nFor each test case, you should read two integers $N$ and $Q$.\n\nThen you may ask questions:\n- Output $?$ followed by an integer denoting the number of elements in subset followed by the indices $? k i_1 i_2 \\dots i_k$.\n- Read an integer $x$ denoting the answer to your query.\n- If the query was invalid or you have exceeded the query limit, judge prints `'-1'` and exits with wrong answer verdict. In this case, you must also terminate your program.\n\nWhen you have determined the answer, print the character $!$ followed by $N$ space-separated integers denoting the array $! A_1 A_2 \\dots A_N$. Note that this does not count towards a query.\n\nNow you must read an integer denoting that your answer is correct or not.\n- If your answer is correct, judge prints `'1'`. In this case, you should continue solving the remaining test cases.\n- If your answer is incorrect, judge prints `'-1'` and exits with wrong answer verdict. You must also terminate your program in this case otherwise, you may receive any verdict. \n\n### Constraints\n- $1 \\leq T \\leq 10$\n- $2 \\leq N \\leq 100$\n- $Q = 6N$\n- For the given constraints, it is guaranteed that the answer can be found in the given number of queries.\n\n### Sample interaction\n<pre>\nYou       Grader\n          1\n          3 18\n? 2 1 2\n          1\n? 3 1 2 3 \n          2\n? 2 2 3\n          1\n? 2 1 3\n          2\n! 3 4 3\n          1\n<\/pre>\n### Explanation\nThe hidden array was $A$ = $[10,20,10]$.\n- We ask a query for subset $\\{1,2\\}$. The grader responds with $1$ since both $10$ and $20$ occur $1$ time.\n- Then we query for $\\{1,2,3\\}$. The grader responds with $2$ because frequency of $10$ is $2$.\n- Then we query for $\\{2,3\\}$. Grader responds with $1$ since both elements are distinct.\n- Lastly we query for $\\{1,3\\}$ and the grader responds with $2$ i.e frequency of $10$.","inputFormat":"First, you should read the number of test cases $T$.\n\nFor each test case, you should read two integers $N$ and $Q$.\n\nThen you may ask questions:\n- Output $?$ followed by an integer denoting the number of elements in subset followed by the indices $?$ $k$ $i_1$ $i_2$ ... $i_k$.\n- Read an integer $x$ denoting the answer to your query.\n- If the query was invalid or you have exceeded the query limit, judge returns -1 and exits with wrong answer verdict. In this case, you must also terminate your program.\n\nWhen you have determined the answer, print the character $!$ followed by $N$ space separated integers denoting the array $!$ $A_1$ $A_2$ ... $A_N$. Note that this does not count towards a query.\n\nNow you must read an integer denoting that your answer is correct or not.\n- If your answer is correct, judge prints 1. In this case, you should continue solving the remaining test cases.\n- If your answer is incorrect, judge prints -1 and exits with wrong answer verdict. You must also terminate your program in this case otherwise, you may receive any verdict. \n\n","inputFormatState":false,"outputFormat":"For each testcase, output in a single line answer given by Charlie to Tracy modulo 1000000007.\n","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"1","source_sizelimit":"50000","problem_author":"anshugarg12","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #D0011B;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>7&#9733;<\/span><span class='m-username--link'>anshugarg12<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"15-08-2021","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/anshugarg12'>anshugarg12<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/binary-search'>binary-search<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/cook132'>cook132<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/easy-medium'>easy-medium<\/a>","problem_difficulty_level":"Easy-Medium","user_zen_mode":false,"best_tag":"Binary Search","editorial_url":"https:\/\/discuss.codechef.com\/problems\/INTEREQ","time":{"view_start_date":1629658802,"submit_start_date":1629658802,"visible_start_date":1629658802,"end_date":1735669800,"current":1643797827},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=INTEREQ","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}