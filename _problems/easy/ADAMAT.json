{"category_name":"easy","status":"success","problem_code":"ADAMAT","problem_name":"Ada Matrix","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/hindi\/ADAMAT.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/bengali\/ADAMAT.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/mandarin\/ADAMAT.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/russian\/ADAMAT.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/vietnamese\/ADAMAT.pdf) as well.\r\n\r\nChef Ada has a matrix with $N$ rows (numbered $1$ through $N$ from top to bottom) and $N$ columns (numbered $1$ through $N$ from left to right) containing all integers between $1$ and $N^2$ inclusive. For each valid $i$ and $j$, let's denote the cell in the $i$-th row and $j$-th column by $(i,j)$.\r\n\r\nAda wants to sort the matrix in row-major order \u2015 for each valid $i$ and $j$, she wants the cell $(i, j)$ to contain the value $(i-1) \\cdot N + j$.\r\n\r\nIn one operation, Ada should choose an integer $L$ and <a href=\"https:\/\/en.wikipedia.org\/wiki\/Transpose\">transpose<\/a> the submatrix between rows $1$ and $L$ and columns $1$ and $L$ (inclusive). Formally, for each $i$ and $j$ ($1 \\le i, j \\le L$), the value in the cell $(i, j)$ after this operation is equal to the value in $(j, i)$ before it.\r\n\r\nThe initial state of the matrix is chosen in such a way that it is possible to sort it using a finite number of operations (possibly zero). Find the smallest number of operations required to sort the matrix.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains a single integer $N$.\r\n- The next $N$ lines describe the matrix. For each valid $i$, the $i$-th of these lines contains $N$ space-separated integers \u2015 the initial values in cells $(i, 1), (i, 2), \\ldots, (i, N)$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the smallest number of operations required to sort the matrix.\r\n\r\n### Constraints\r\n- $4 \\le N \\le 64$\r\n- the sum of $N^2$ over all test files does not exceed $3 \\cdot 10^5$\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):**\r\n- $T \\le 50$\r\n- $N = 4$\r\n\r\n**Subtask #2 (90 points):** original constraints\r\n\r\n### Example Input\r\n```\r\n1\r\n4\r\n1 2 9 13\r\n5 6 10 14\r\n3 7 11 15\r\n4 8 12 16\r\n```\r\n\r\n### Example Output\r\n```\r\n2\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** After the first operation, with $L = 2$, the resulting matrix is\r\n```\r\n1 5 9 13\r\n2 6 10 14\r\n3 7 11 15\r\n4 8 12 16\r\n```\r\n\r\nAfter the second operation, with $L = 4$, the matrix becomes sorted\r\n```\r\n1 2 3 4\r\n5 6 7 8\r\n9 10 11 12\r\n13 14 15 16\r\n```\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/hindi\/ADAMAT.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/bengali\/ADAMAT.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/mandarin\/ADAMAT.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/russian\/ADAMAT.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/SEPT20\/vietnamese\/ADAMAT.pdf) as well.\r\n\r\nChef Ada has a matrix with $N$ rows (numbered $1$ through $N$ from top to bottom) and $N$ columns (numbered $1$ through $N$ from left to right) containing all integers between $1$ and $N^2$ inclusive. For each valid $i$ and $j$, let's denote the cell in the $i$-th row and $j$-th column by $(i,j)$.\r\n\r\nAda wants to sort the matrix in row-major order \u2015 for each valid $i$ and $j$, she wants the cell $(i, j)$ to contain the value $(i-1) \\cdot N + j$.\r\n\r\nIn one operation, Ada should choose an integer $L$ and <a href=\"https:\/\/en.wikipedia.org\/wiki\/Transpose\">transpose<\/a> the submatrix between rows $1$ and $L$ and columns $1$ and $L$ (inclusive). Formally, for each $i$ and $j$ ($1 \\le i, j \\le L$), the value in the cell $(i, j)$ after this operation is equal to the value in $(j, i)$ before it.\r\n\r\nThe initial state of the matrix is chosen in such a way that it is possible to sort it using a finite number of operations (possibly zero). Find the smallest number of operations required to sort the matrix.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains a single integer $N$.\r\n- The next $N$ lines describe the matrix. For each valid $i$, the $i$-th of these lines contains $N$ space-separated integers \u2015 the initial values in cells $(i, 1), (i, 2), \\ldots, (i, N)$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the smallest number of operations required to sort the matrix.\r\n\r\n### Constraints\r\n- $4 \\le N \\le 64$\r\n- the sum of $N^2$ over all test files does not exceed $3 \\cdot 10^5$\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):**\r\n- $T \\le 50$\r\n- $N = 4$\r\n\r\n**Subtask #2 (90 points):** original constraints","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"1\r\n4\r\n1 2 9 13\r\n5 6 10 14\r\n3 7 11 15\r\n4 8 12 16","output":"2","explanation":"**Example case 1:** After the first operation, with $L = 2$, the resulting matrix is\r\n```\r\n1 5 9 13\r\n2 6 10 14\r\n3 7 11 15\r\n4 8 12 16\r\n```\r\n\r\nAfter the second operation, with $L = 4$, the matrix becomes sorted\r\n```\r\n1 2 3 4\r\n5 6 7 8\r\n9 10 11 12\r\n13 14 15 16\r\n```","isDeleted":false}]},"video_editorial_url":"https:\/\/youtu.be\/0qWUh8nUf4o","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"1","source_sizelimit":"50000","problem_author":"alei","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #D0011B;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>7&#9733;<\/span><span class='m-username--link'>alei<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"27-08-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/alei'>alei<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/alei'>alei<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/matrices'>matrices<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/sept20'>sept20<\/a>","problem_difficulty_level":"Easy","user_zen_mode":false,"best_tag":"","editorial_url":"https:\/\/discuss.codechef.com\/problems\/ADAMAT","time":{"view_start_date":1600075802,"submit_start_date":1600075802,"visible_start_date":1600075802,"end_date":1735669800,"current":1643797761},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=ADAMAT","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}