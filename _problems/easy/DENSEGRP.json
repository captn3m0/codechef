{"category_name":"easy","status":"success","problem_code":"DENSEGRP","problem_name":"Dense Graph","body":"### Read problem statements in [Bengali](https:\/\/www.codechef.com\/download\/translated\/MARCH21\/bengali\/DENSEGRP.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/MARCH21\/mandarin\/DENSEGRP.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/MARCH21\/russian\/DENSEGRP.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/MARCH21\/vietnamese\/DENSEGRP.pdf) as well.\r\n\r\nYou are given an unweighted directed graph with $N$ vertices (numbered $1$ through $N$). You are also given $2M$ ranges $[A_1, B_1], [A_2, B_2], \\ldots, [A_M, B_M]$ and $[C_1, D_1], [C_2, D_2], \\ldots, [C_M, D_M]$ describing the edges of the graph in the following way: For each $i$ ($1 \\le i \\le M$) and for each pair of vertices $u \\in [A_i, B_i]$, $v \\in [C_i, D_i]$, there is an edge from $u$ to $v$.\r\n\r\nFinally, you are given two vertices $X$ and $Y$. Find the shortest distance from $X$ to $Y$ or determine that there is no path from $X$ to $Y$.\r\n \r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains four space-separated integers $N$, $M$, $X$ and $Y$.\r\n- $M$ lines follow. For each valid $i$, the $i$-th of these lines contains four space-separated integers $A_i$, $B_i$, $C_i$ and $D_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the shortest distance from vertex $X$ to vertex $Y$, or $-1$ if there is no path from $X$ to $Y$.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10^5$\r\n- $1 \\le N \\le 10^9$\r\n- $1 \\le M \\le 2 \\cdot 10^5$\r\n- $1 \\le X, Y \\le N$\r\n- $1 \\le A_i \\le B_i \\le N$ and $1 \\le C_i \\le D_i \\le N$ for each valid $i$\r\n- the sum of $M$ over all test cases does not exceed $2 \\cdot 10^5$\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):** \r\n- $1 \\le N \\le 10,000$\r\n- $1 \\le M \\le 5,000$\r\n- the sum of $M$ over all test cases does not exceed $5,000$\r\n\r\n**Subtask #2 (10 points):** for any two of the $2M$ given ranges (denoted by $[x_1, x_2]$ and $[x_3, x_4]$), one of the following conditions holds:\r\n- $[x_1, x_2] = [x_3, x_4]$\r\n- they are non-overlapping, i.e. $x_2 \\lt x_3$ or $x_4 \\lt x_1$\r\n\r\n**Subtask #3 (20 points):** for any two of the $2M$ given ranges (denoted by $[x_1, x_2]$ and $[x_3, x_4]$), one of the following conditions holds:\r\n- one range lies inside the other, i.e. $x_1 \\le x_3 \\le x_4 \\le x_2$ or $x_3 \\le x_1 \\le x_2 \\le x_4$\r\n- they are non-overlapping, i.e. $x_2 \\lt x_3$ or $x_4 \\lt x_1$\r\n\r\n**Subtask #4 (60 points):** original constraints\r\n\r\n### Example Input\r\n```\r\n3\r\n5 2 1 2\r\n1 2 4 5\r\n5 5 2 3\r\n6 1 3 4\r\n1 6 3 3\r\n2 1 2 2\r\n1 1 1 1\r\n```\r\n\r\n### Example Output\r\n```\r\n2\r\n-1\r\n0\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** The shortest path is $1 \\rightarrow 5 \\rightarrow 2$.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Bengali](https:\/\/www.codechef.com\/download\/translated\/MARCH21\/bengali\/DENSEGRP.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/MARCH21\/mandarin\/DENSEGRP.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/MARCH21\/russian\/DENSEGRP.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/MARCH21\/vietnamese\/DENSEGRP.pdf) as well.\r\n\r\nYou are given an unweighted directed graph with $N$ vertices (numbered $1$ through $N$). You are also given $2M$ ranges $[A_1, B_1], [A_2, B_2], \\ldots, [A_M, B_M]$ and $[C_1, D_1], [C_2, D_2], \\ldots, [C_M, D_M]$ describing the edges of the graph in the following way: For each $i$ ($1 \\le i \\le M$) and for each pair of vertices $u \\in [A_i, B_i]$, $v \\in [C_i, D_i]$, there is an edge from $u$ to $v$.\r\n\r\nFinally, you are given two vertices $X$ and $Y$. Find the shortest distance from $X$ to $Y$ or determine that there is no path from $X$ to $Y$.\r\n \r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains four space-separated integers $N$, $M$, $X$ and $Y$.\r\n- $M$ lines follow. For each valid $i$, the $i$-th of these lines contains four space-separated integers $A_i$, $B_i$, $C_i$ and $D_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the shortest distance from vertex $X$ to vertex $Y$, or $-1$ if there is no path from $X$ to $Y$.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10^5$\r\n- $1 \\le N \\le 10^9$\r\n- $1 \\le M \\le 2 \\cdot 10^5$\r\n- $1 \\le X, Y \\le N$\r\n- $1 \\le A_i \\le B_i \\le N$ and $1 \\le C_i \\le D_i \\le N$ for each valid $i$\r\n- the sum of $M$ over all test cases does not exceed $2 \\cdot 10^5$\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):** \r\n- $1 \\le N \\le 10,000$\r\n- $1 \\le M \\le 5,000$\r\n- the sum of $M$ over all test cases does not exceed $5,000$\r\n\r\n**Subtask #2 (10 points):** for any two of the $2M$ given ranges (denoted by $[x_1, x_2]$ and $[x_3, x_4]$), one of the following conditions holds:\r\n- $[x_1, x_2] = [x_3, x_4]$\r\n- they are non-overlapping, i.e. $x_2 \\lt x_3$ or $x_4 \\lt x_1$\r\n\r\n**Subtask #3 (20 points):** for any two of the $2M$ given ranges (denoted by $[x_1, x_2]$ and $[x_3, x_4]$), one of the following conditions holds:\r\n- one range lies inside the other, i.e. $x_1 \\le x_3 \\le x_4 \\le x_2$ or $x_3 \\le x_1 \\le x_2 \\le x_4$\r\n- they are non-overlapping, i.e. $x_2 \\lt x_3$ or $x_4 \\lt x_1$\r\n\r\n**Subtask #4 (60 points):** original constraints","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"3\r\n5 2 1 2\r\n1 2 4 5\r\n5 5 2 3\r\n6 1 3 4\r\n1 6 3 3\r\n2 1 2 2\r\n1 1 1 1","output":"2\r\n-1\r\n0","explanation":"**Example case 1:** The shortest path is $1 \\rightarrow 5 \\rightarrow 2$.","isDeleted":false}]},"video_editorial_url":"https:\/\/youtu.be\/_PybsTATV_U","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"4","source_sizelimit":"50000","problem_author":"sawarnik123","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span class='m-username--link'>sawarnik123<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"12-12-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/breadth-first-search'>breadth-first-search<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/easy-medium'>easy-medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/march21'>march21<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/sawarnik123'>sawarnik123<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/segment-tree'>segment-tree<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/shortest-path'>shortest-path<\/a>","problem_difficulty_level":"Easy-Medium","user_zen_mode":false,"best_tag":"Shortest Path","editorial_url":"https:\/\/discuss.codechef.com\/problems\/DENSEGRP","time":{"view_start_date":1104528600,"submit_start_date":1104528600,"visible_start_date":1104528600,"end_date":1735669800,"current":1643797801},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=DENSEGRP","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}