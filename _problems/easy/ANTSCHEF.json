{"category_name":"easy","status":"success","problem_code":"ANTSCHEF","problem_name":"Chef and Ants","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/JAN21\/hindi\/ANTSCHEF.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/JAN21\/bengali\/ANTSCHEF.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JAN21\/mandarin\/ANTSCHEF.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/JAN21\/russian\/ANTSCHEF.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JAN21\/vietnamese\/ANTSCHEF.pdf) as well.\r\n\r\nChef has been researching ant colonies for many years and finally discovered all their secrets.\r\n\r\nAn ant colony consists of $N$ distinct lines (numbered $1$ through $N$) that pass through a point $\\mathsf{O}$, which is the queen's home. For each valid $i$, there are $M_i$ ants on the $i$-th line.\r\n\r\nFor each valid $i$ and $j$, the $j$-th ant on the $i$-th line initially has a non-zero coordinate $X_{i,j}$ with the following meaning:\r\n- The distance of this ant from $\\mathsf{O}$ is $|X_{i,j}|$.\r\n- Let's choose a direction along the $i$-th line from $\\mathsf{O}$. The exact way in which this direction is chosen does not matter here, it only needs to be the same for all ants on the same line.\r\n- If $X_{i,j}$ is positive, this ant is at the distance $|X_{i,j}|$ from $\\mathsf{O}$ in the chosen direction. Otherwise, it is at this distance from $\\mathsf{O}$ in the opposite direction.\r\n\r\nIn other words, two ants $j$ and $k$ on a line $i$ are at the same side of $\\mathsf{O}$ if the signs of $X_{i,j}$ and $X_{i,k}$ are the same or on opposite sides if the signs are different.\r\n\r\nAll ants move with the same constant speed. Initially, all of them are moving towards $\\mathsf{O}$. Whenever two or more ants meet (possibly at $\\mathsf{O}$), all of these ants turn around and start moving in the opposite directions with the same speed. We call this a *collision*. Even if an ant reaches $\\mathsf{O}$ without meeting an ant there, it keeps moving in the same direction. An ant may change direction multiple times.\r\n\r\nHelp Chef find the total number of collisions between ants. Note that even if more than two ants meet, it counts as only one collision.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains a single integer $N$.\r\n- $N$ lines follow. For each valid $i$, the $i$-th of these lines contains an integer $M_i$, followed by a space and $M_i$ space-separated integers $X_{i,1}, X_{i,2}, \\ldots, X_{i,M_i}$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the number of collisions between ants.\r\n\r\n### Constraints\r\n- $1 \\leq T \\leq 1,000$\r\n- $1 \\leq N \\leq 2 \\cdot 10^5$\r\n- $1 \\leq M_i \\leq 5 \\cdot 10^5$ for each valid $i$\r\n- $1 \\leq |X_{i,j}| \\leq 10^9$ for each valid $i,j$\r\n- $X_{i,j} \\lt X_{i,j+1}$ for each valid $i,j$\r\n- the sum of $N$ over all test cases does not exceed $2 \\cdot 10^5$\r\n- the sum of $M_1 + M_2 + \\ldots + M_N$ over all test cases does not exceed $10^6$\r\n\r\n### Subtasks\r\n**Subtask #1 (30 points):** $N = 1$\r\n\r\n**Subtask #2 (70 points):** original constraints\r\n\r\n### Example Input\r\n```\r\n1\r\n2\r\n2 -2 1\r\n1 2\r\n```\r\n\r\n### Example Output\r\n```\r\n2\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** First, the ants on the first line collide at the coordinate $-1\/2$ and change directions. Finally, ant $2$ on the first line collides with the only ant on the second line; this happens at $\\mathsf{O}$. No collisions happen afterwards.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/JAN21\/hindi\/ANTSCHEF.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/JAN21\/bengali\/ANTSCHEF.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JAN21\/mandarin\/ANTSCHEF.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/JAN21\/russian\/ANTSCHEF.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JAN21\/vietnamese\/ANTSCHEF.pdf) as well.\r\n\r\nChef has been researching ant colonies for many years and finally discovered all their secrets.\r\n\r\nAn ant colony consists of $N$ distinct lines (numbered $1$ through $N$) that pass through a point $\\mathsf{O}$, which is the queen's home. For each valid $i$, there are $M_i$ ants on the $i$-th line.\r\n\r\nFor each valid $i$ and $j$, the $j$-th ant on the $i$-th line initially has a non-zero coordinate $X_{i,j}$ with the following meaning:\r\n- The distance of this ant from $\\mathsf{O}$ is $|X_{i,j}|$.\r\n- Let's choose a direction along the $i$-th line from $\\mathsf{O}$. The exact way in which this direction is chosen does not matter here, it only needs to be the same for all ants on the same line.\r\n- If $X_{i,j}$ is positive, this ant is at the distance $|X_{i,j}|$ from $\\mathsf{O}$ in the chosen direction. Otherwise, it is at this distance from $\\mathsf{O}$ in the opposite direction.\r\n\r\nIn other words, two ants $j$ and $k$ on a line $i$ are at the same side of $\\mathsf{O}$ if the signs of $X_{i,j}$ and $X_{i,k}$ are the same or on opposite sides if the signs are different.\r\n\r\nAll ants move with the same constant speed. Initially, all of them are moving towards $\\mathsf{O}$. Whenever two or more ants meet (possibly at $\\mathsf{O}$), all of these ants turn around and start moving in the opposite directions with the same speed. We call this a *collision*. Even if an ant reaches $\\mathsf{O}$ without meeting an ant there, it keeps moving in the same direction. An ant may change direction multiple times.\r\n\r\nHelp Chef find the total number of collisions between ants. Note that even if more than two ants meet, it counts as only one collision.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains a single integer $N$.\r\n- $N$ lines follow. For each valid $i$, the $i$-th of these lines contains an integer $M_i$, followed by a space and $M_i$ space-separated integers $X_{i,1}, X_{i,2}, \\ldots, X_{i,M_i}$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the number of collisions between ants.\r\n\r\n### Constraints\r\n- $1 \\leq T \\leq 1,000$\r\n- $1 \\leq N \\leq 2 \\cdot 10^5$\r\n- $1 \\leq M_i \\leq 5 \\cdot 10^5$ for each valid $i$\r\n- $1 \\leq |X_{i,j}| \\leq 10^9$ for each valid $i,j$\r\n- $X_{i,j} \\lt X_{i,j+1}$ for each valid $i,j$\r\n- the sum of $N$ over all test cases does not exceed $2 \\cdot 10^5$\r\n- the sum of $M_1 + M_2 + \\ldots + M_N$ over all test cases does not exceed $10^6$\r\n\r\n### Subtasks\r\n**Subtask #1 (30 points):** $N = 1$\r\n\r\n**Subtask #2 (70 points):** original constraints","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"1\r\n2\r\n2 -2 1\r\n1 2","output":"2","explanation":"**Example case 1:** First, the ants on the first line collide at the coordinate $-1\/2$ and change directions. Finally, ant $2$ on the first line collides with the only ant on the second line; this happens at $\\mathsf{O}$. No collisions happen afterwards.","isDeleted":false}]},"video_editorial_url":"https:\/\/youtu.be\/MuTeQP5IN78","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"2","source_sizelimit":"50000","problem_author":"arayi","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #684273;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>4&#9733;<\/span><span class='m-username--link'>arayi<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"28-10-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/arayi'>arayi<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/easy-medium'>easy-medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/greedy'>greedy<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/implementation'>implementation<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/jan21'>jan21<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/observation'>observation<\/a>","problem_difficulty_level":"Easy-Medium","user_zen_mode":false,"best_tag":"","editorial_url":"https:\/\/discuss.codechef.com\/problems\/ANTSCHEF","time":{"view_start_date":1104528600,"submit_start_date":1104528600,"visible_start_date":1104528600,"end_date":1735669800,"current":1643797765},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=ANTSCHEF","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}