{"category_name":"easy","status":"success","problem_code":"UNICOLOR","problem_name":"Uniform","body":"### Read problem statements in [Russian](https:\/\/www.codechef.com\/download\/translated\/LTIME94\/russian\/UNICOLOR.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/LTIME94\/bengali\/UNICOLOR.pdf), and [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/LTIME94\/mandarin\/UNICOLOR.pdf) as well.\r\n\r\nIn a school, there are $C$ clubs (numbered $1$ through $C$) that students can participate in. Each student can be in zero, one or multiple clubs.\r\n\r\nTomorrow, there is a school assembly and $N$ students (numbered $1$ through $N$) will be standing in a line. Each student should wear one of $M$ single-colour shirts provided by the school. The only restriction is that for each club, students in this club must wear shirts with the same colour (possibly the same colour for multiple clubs).\r\n\r\nStudents in the same clubs try to stand near each other. Formally, for each club $i$, you are given $x_i$ segments \u2014 let's denote them by $[l_1,r_1],[l_2,r_2], \\ldots, [l_{x_i},r_{x_i}]$, where $1 \\le l_1 \\le r_1 \\lt l_2 \\le r_2 \\lt \\ldots \\lt l_{x_i} \\le r_{x_i} \\le N$ \u2014 such for each valid $j$, the students $l_j, l_j+1, \\ldots, r_j$ belong to this club.\r\n\r\nDetermine the number of ways in which the students can choose the colours of their shirts. Two ways to choose colours are considered different if there is at least one student wearing a shirt with a different colour. Since this number can be very large, compute it modulo $998,244,353$.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains three space-separated integers $C$, $N$ and $M$. \r\n- Then, $2C$ lines follow. For each valid $i$, the $(2i-1)$-th of these lines contains a single integer $x_i$ and the $2i$-th line contains $2 \\cdot x_i$ space-separated integers $l_1,r_1,l_2,r_2, \\ldots, l_{x_i},r_{x_i}$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2014 the number of ways to choose colours modulo $998,244,353$.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $1 \\le N, M \\le 10^9$\r\n- $1 \\le C \\le 1,000$\r\n- $1 \\le x_i \\le 100$ for each valid $i$\r\n\r\n### Subtasks\r\n**Subtask #1 (30 points):** $N \\le 1,000$\r\n\r\n**Subtask #2 (70 points):** original constraints\r\n \r\n### Example Input\r\n```\r\n1\r\n2 6 3\r\n2\r\n1 2 5 6\r\n1\r\n4 6\r\n```\r\n\r\n### Example Output\r\n```\r\n9\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** Students $5$ and $6$ are in both clubs, so these two clubs must wear shirts with the same colour. Student $3$ does not participate in any club and can wear a shirt with any colour out of the three available options.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Russian](https:\/\/www.codechef.com\/download\/translated\/LTIME94\/russian\/UNICOLOR.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/LTIME94\/bengali\/UNICOLOR.pdf), and [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/LTIME94\/mandarin\/UNICOLOR.pdf) as well.\r\n\r\nIn a school, there are $C$ clubs (numbered $1$ through $C$) that students can participate in. Each student can be in zero, one or multiple clubs.\r\n\r\nTomorrow, there is a school assembly and $N$ students (numbered $1$ through $N$) will be standing in a line. Each student should wear one of $M$ single-colour shirts provided by the school. The only restriction is that for each club, students in this club must wear shirts with the same colour (possibly the same colour for multiple clubs).\r\n\r\nStudents in the same clubs try to stand near each other. Formally, for each club $i$, you are given $x_i$ segments \u2014 let's denote them by $[l_1,r_1],[l_2,r_2], \\ldots, [l_{x_i},r_{x_i}]$, where $1 \\le l_1 \\le r_1 \\lt l_2 \\le r_2 \\lt \\ldots \\lt l_{x_i} \\le r_{x_i} \\le N$ \u2014 such for each valid $j$, the students $l_j, l_j+1, \\ldots, r_j$ belong to this club.\r\n\r\nDetermine the number of ways in which the students can choose the colours of their shirts. Two ways to choose colours are considered different if there is at least one student wearing a shirt with a different colour. Since this number can be very large, compute it modulo $998,244,353$.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains three space-separated integers $C$, $N$ and $M$. \r\n- Then, $2C$ lines follow. For each valid $i$, the $(2i-1)$-th of these lines contains a single integer $x_i$ and the $2i$-th line contains $2 \\cdot x_i$ space-separated integers $l_1,r_1,l_2,r_2, \\ldots, l_{x_i},r_{x_i}$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2014 the number of ways to choose colours modulo $998,244,353$.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $1 \\le N, M \\le 10^9$\r\n- $1 \\le C \\le 1,000$\r\n- $1 \\le x_i \\le 100$ for each valid $i$\r\n\r\n### Subtasks\r\n**Subtask #1 (30 points):** $N \\le 1,000$\r\n\r\n**Subtask #2 (70 points):** original constraints","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"1\r\n2 6 3\r\n2\r\n1 2 5 6\r\n1\r\n4 6","output":"9","explanation":"**Example case 1:** Students $5$ and $6$ are in both clubs, so these two clubs must wear shirts with the same colour. Student $3$ does not participate in any club and can wear a shirt with any colour out of the three available options.","isDeleted":false}]},"video_editorial_url":"https:\/\/youtu.be\/iW5WZIpruP4","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"1","source_sizelimit":"50000","problem_author":"trafagar3","problem_author_html_handle":"trafagar3","problem_tester":"","problem_tester_html_handle":"","date_added":"2-01-2021","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/binary-exponentation'>binary-exponentation<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/easy-medium'>easy-medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/ltime94'>ltime94<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/trafagar3'>trafagar3<\/a>","problem_difficulty_level":"Easy-Medium","user_zen_mode":false,"best_tag":"Binary Exponentation","editorial_url":"https:\/\/discuss.codechef.com\/problems\/UNICOLOR","time":{"view_start_date":1616864402,"submit_start_date":1616864402,"visible_start_date":1616864402,"end_date":1735669800,"current":1643797902},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=UNICOLOR","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}