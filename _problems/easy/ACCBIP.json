{"category_name":"easy","status":"success","problem_code":"ACCBIP","problem_name":"Insanely Hard School Exams","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/AUG20\/hindi\/ACCBIP.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/AUG20\/bengali\/ACCBIP.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/AUG20\/mandarin\/ACCBIP.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/AUG20\/russian\/ACCBIP.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/AUG20\/vietnamese\/ACCBIP.pdf) as well.\r\n\r\nAfter failing to clear his school mathematics examination, infinitepro decided to prepare very hard for his upcoming re-exam, starting with the topic he is weakest at \u2015 computational geometry.\r\n\r\nBeing an artist, infinitepro has $C$ pencils (numbered $1$ through $C$); each of them draws with one of $C$ distinct colours. He draws $N$ lines (numbered $1$ through $N$) in a 2D Cartesian coordinate system; for each valid $i$, the $i$-th line is drawn with the $c_i$-th pencil and it is described by the equation $y = a_i \\cdot x + b_i$.\r\n\r\nNow, infinitepro calls a triangle *truly-geometric* if each of its sides is part of some line he drew and all three sides have the same colour. He wants to count these triangles, but there are too many of them! After a lot of consideration, he decided to erase a subset of the $N$ lines he drew. He wants to do it with his eraser, which has length $K$.\r\n\r\nWhenever erasing a line with a colour $i$, the length of the eraser decreases by $V_i$. In other words, when the eraser has length $k$ and we use it to erase a line with a colour $i$, the length of the eraser decreases to $k-V_i$; if $k \\lt V_i$, it is impossible to erase such a line.\r\n\r\nSince infinitepro has to study for the re-exam, he wants to minimise the number of truly-geometric triangles. Can you help him find the minimum possible number of truly-geometric triangles which can be obtained by erasing a subset of the $N$ lines in an optimal way? He promised a grand treat for you if he passes the examination!\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of the input contains three space-separated integers $N$, $C$ and $K$.\r\n- $N$ lines follow. For each $i$ ($1 \\le i \\le N$), the $i$-th of these lines contains three space-separated integers $a_i$, $b_i$ and $c_i$.\r\n- The last line contains $C$ space-separated integers $V_1, V_2, \\ldots, V_C$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the smallest possible number of truly-geometric triangles after erasing lines.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $1 \\le C \\le N \\le 3,000$\r\n- $0 \\le K \\le 3,000$\r\n- $0 \\le a_i, b_i \\le 10^9$ for each valid $i$\r\n- $1 \\le c_i \\le C$ for each valid $i$\r\n- $0 \\le V_i \\le K$ for each valid $i$\r\n- no two lines coincide, regardless of their colours\r\n- no three lines are concurrent\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):**\r\n- $N \\le 10$\r\n- $K \\le 100$\r\n\r\n**Subtask 2 (15 points):**\r\n- $V_1 = V_2 = \\ldots = V_C$\r\n- no two lines are parallel\r\n\r\n**Subtask #3 (25 points):** no two lines are parallel\r\n\r\n**Subtask #4 (50 points):** original constraints\r\n\r\n### Example Input\r\n```\r\n2\r\n7 2 13\r\n1 10 1\r\n1 14 2\r\n6 4 1\r\n2 2 1\r\n0 12 2\r\n2 11 2\r\n0 6 1\r\n8 10\r\n6 1 20\r\n1 5 1\r\n2 11 1\r\n4 0 1\r\n6 8 1\r\n0 11 1\r\n3 3 1\r\n9\r\n```\r\n\r\n### Example Output\r\n```\r\n2\r\n4\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** We can remove exactly one line. Initially, we have $5$ truly geometric triangles (see the image below; red is colour $1$ and green is colour $2$).\r\n- Removing any line with colour $2$ brings the total number of truly-geometric triangles down to $4+0=4$.\r\n- Removing any line with colour $1$ brings the total number of truly-geometric triangles down to $1+1=2$.\r\n\r\nThus, the smallest number of truly-geometric triangles we can obtain is $2$.\r\n\r\n![desc](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/AUG20\/ACCBIP\/ACCBIP.png)\r\n\r\n**Example case 2:** We can remove at most $2$ lines and removing any $2$ lines gives us a total of $4$ truly-geometric triangles.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/AUG20\/hindi\/ACCBIP.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/AUG20\/bengali\/ACCBIP.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/AUG20\/mandarin\/ACCBIP.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/AUG20\/russian\/ACCBIP.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/AUG20\/vietnamese\/ACCBIP.pdf) as well.\r\n\r\nAfter failing to clear his school mathematics examination, infinitepro decided to prepare very hard for his upcoming re-exam, starting with the topic he is weakest at \u2015 computational geometry.\r\n\r\nBeing an artist, infinitepro has $C$ pencils (numbered $1$ through $C$); each of them draws with one of $C$ distinct colours. He draws $N$ lines (numbered $1$ through $N$) in a 2D Cartesian coordinate system; for each valid $i$, the $i$-th line is drawn with the $c_i$-th pencil and it is described by the equation $y = a_i \\cdot x + b_i$.\r\n\r\nNow, infinitepro calls a triangle *truly-geometric* if each of its sides is part of some line he drew and all three sides have the same colour. He wants to count these triangles, but there are too many of them! After a lot of consideration, he decided to erase a subset of the $N$ lines he drew. He wants to do it with his eraser, which has length $K$.\r\n\r\nWhenever erasing a line with a colour $i$, the length of the eraser decreases by $V_i$. In other words, when the eraser has length $k$ and we use it to erase a line with a colour $i$, the length of the eraser decreases to $k-V_i$; if $k \\lt V_i$, it is impossible to erase such a line.\r\n\r\nSince infinitepro has to study for the re-exam, he wants to minimise the number of truly-geometric triangles. Can you help him find the minimum possible number of truly-geometric triangles which can be obtained by erasing a subset of the $N$ lines in an optimal way? He promised a grand treat for you if he passes the examination!\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of the input contains three space-separated integers $N$, $C$ and $K$.\r\n- $N$ lines follow. For each $i$ ($1 \\le i \\le N$), the $i$-th of these lines contains three space-separated integers $a_i$, $b_i$ and $c_i$.\r\n- The last line contains $C$ space-separated integers $V_1, V_2, \\ldots, V_C$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the smallest possible number of truly-geometric triangles after erasing lines.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $1 \\le C \\le N \\le 3,000$\r\n- $0 \\le K \\le 3,000$\r\n- $0 \\le a_i, b_i \\le 10^9$ for each valid $i$\r\n- $1 \\le c_i \\le C$ for each valid $i$\r\n- $0 \\le V_i \\le K$ for each valid $i$\r\n- no two lines coincide, regardless of their colours\r\n- no three lines are concurrent\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):**\r\n- $N \\le 10$\r\n- $K \\le 100$\r\n\r\n**Subtask 2 (15 points):**\r\n- $V_1 = V_2 = \\ldots = V_C$\r\n- no two lines are parallel\r\n\r\n**Subtask #3 (25 points):** no two lines are parallel\r\n\r\n**Subtask #4 (50 points):** original constraints","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"2\r\n7 2 13\r\n1 10 1\r\n1 14 2\r\n6 4 1\r\n2 2 1\r\n0 12 2\r\n2 11 2\r\n0 6 1\r\n8 10\r\n6 1 20\r\n1 5 1\r\n2 11 1\r\n4 0 1\r\n6 8 1\r\n0 11 1\r\n3 3 1\r\n9","output":"2\r\n4","explanation":"**Example case 1:** We can remove exactly one line. Initially, we have $5$ truly geometric triangles (see the image below; red is colour $1$ and green is colour $2$).\r\n- Removing any line with colour $2$ brings the total number of truly-geometric triangles down to $4+0=4$.\r\n- Removing any line with colour $1$ brings the total number of truly-geometric triangles down to $1+1=2$.\r\n\r\nThus, the smallest number of truly-geometric triangles we can obtain is $2$.\r\n\r\n![desc](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/AUG20\/ACCBIP\/ACCBIP.png)\r\n\r\n**Example case 2:** We can remove at most $2$ lines and removing any $2$ lines gives us a total of $4$ truly-geometric triangles.","isDeleted":false}]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"1","source_sizelimit":"50000","problem_author":"infinitepro","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #3366CC;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>3&#9733;<\/span><span class='m-username--link'>infinitepro<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"19-04-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/aug20'>aug20<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/combinatorics'>combinatorics<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/daniel_1999'>daniel_1999<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/dynamic-programming'>dynamic-programming<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/greedy'>greedy<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/infinitepro'>infinitepro<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/infinitepro'>infinitepro<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium'>medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/rishup_nitdgp'>rishup_nitdgp<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"Dynamic Programming","editorial_url":"https:\/\/discuss.codechef.com\/problems\/ACCBIP","time":{"view_start_date":1597656602,"submit_start_date":1597656602,"visible_start_date":1597656602,"end_date":1735669800,"current":1643797761},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=ACCBIP","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}