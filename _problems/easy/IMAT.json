{"category_name":"easy","status":"success","problem_code":"IMAT","problem_name":"Intersection Matrix","body":"You are given a matrix $A$ with $N$ rows and $M$ columns. We can select some non-empty subset of rows and some non-empty subset of columns of the given matrix and add all the elements which occur at the intersection of selected rows and columns. This value is called the *happiness* of the selected rows and columns. For example, let the matrix be the following:\r\n\r\n$1$  $2$  $3$  \r\n$7$  $5$  $6$  \r\n$2$  $1$  $2$  \r\n\r\nLet rows be numbered $1$ to $N$ from top to bottom and columns numbered $1$ to $M$ from left to right. If we select rows $1$ and $3$ and columns $1$ and $2$, we get a happiness of $1 + 2 + 2 + 1 = 6$. \r\n\r\nWe are also given an integer $B$. We need to tell the number of ways to select some non-empty subset of rows and some non-empty subset of columns so that their happiness is $B$. Since the answer can be large, find it modulo $10^9+7$.\r\n\r\n\r\n###Input\r\n\r\n- The first line contains an integer $T$, the number of test cases.\r\n- The first line of each test case contains three integers $N$, $M$ and $B$ - the number of rows, the number of columns, and the intended happiness, respectively.\r\n- Each of the next $N$ lines of the test case contains $M$ space-separated integers. The $j$-th element in the $i$-th line represents the element $A[i][j]$ in the $i$-th row and $j$-th column.\r\n\r\n###Output\r\nFor each test case, output in a separate line, the number of ways to select some non-empty subset of rows and some non-empty subset of columns so that their happiness is $B$, modulo $10^9+7$.\r\n\r\n###Constraints \r\n- $1 \\leq T \\leq 3$\r\n- $1 \\leq N\\cdot M \\leq 200$\r\n- $1 \\leq A[i][j] , B \\leq 10^5$\r\n\r\n###Subtasks\r\n**Subtask #1 (15 points):**\r\n- $1 \\leq N\\cdot M \\leq 10$\r\n\r\n**Subtask #2 (25 points):**\r\n- $1 \\leq N\\cdot M \\leq 40$\r\n\r\n**Subtask #3 (35 points):**\r\n- $1 \\leq N\\cdot M \\leq 144$\r\n\r\n**Subtask #4 (25 points):**\r\n- original constraints\r\n\r\n\r\n\r\n\r\n###Sample Input\r\n    1\r\n    3 3 6\r\n    1 2 3\r\n    7 5 6\r\n    2 1 2\r\n\r\n###Sample Output\r\n    4\t\r\n###Explanation\r\nThere are $4$ ways to select subsets of rows and columns to get happiness equal to $6$.\r\n\r\nSelect rows $\\{1,3\\}$ and columns $\\{1,2\\}$. The elements at the intersections are $\\{1,2,2,1\\}$. So, the happiness is $1 + 2 + 2 + 1 = 6$.\r\n\r\nSelect rows $\\{1\\}$ and columns $\\{1,2,3\\}$. The elements at the intersections are $\\{1,2,3\\}$. So, the happiness is $1 + 2 + 3 = 6$.\r\n\r\nSelect rows $\\{2\\}$ and columns $\\{3\\}$. The elements at the intersections are $\\{6\\}$. So, the happiness is $6$.\r\n\r\nSelect rows $\\{2,3\\}$ and columns $\\{2\\}$. The elements at the intersections are $\\{5,1\\}$. So, the happiness is $5 + 1 = 6$. \r\n\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"You are given a matrix $A$ with $N$ rows and $M$ columns. We can select some non-empty subset of rows and some non-empty subset of columns of the given matrix and add all the elements which occur at the intersection of selected rows and columns. This value is called the *happiness* of the selected rows and columns. For example, let the matrix be the following:\r\n\r\n$1$  $2$  $3$  \r\n$7$  $5$  $6$  \r\n$2$  $1$  $2$  \r\n\r\nLet rows be numbered $1$ to $N$ from top to bottom and columns numbered $1$ to $M$ from left to right. If we select rows $1$ and $3$ and columns $1$ and $2$, we get a happiness of $1 + 2 + 2 + 1 = 6$. \r\n\r\nWe are also given an integer $B$. We need to tell the number of ways to select some non-empty subset of rows and some non-empty subset of columns so that their happiness is $B$. Since the answer can be large, find it modulo $10^9+7$.\r\n\r\n\r\n###Input\r\n\r\n- The first line contains an integer $T$, the number of test cases.\r\n- The first line of each test case contains three integers $N$, $M$ and $B$ - the number of rows, the number of columns, and the intended happiness, respectively.\r\n- Each of the next $N$ lines of the test case contains $M$ space-separated integers. The $j$-th element in the $i$-th line represents the element $A[i][j]$ in the $i$-th row and $j$-th column.\r\n\r\n###Output\r\nFor each test case, output in a separate line, the number of ways to select some non-empty subset of rows and some non-empty subset of columns so that their happiness is $B$, modulo $10^9+7$.\r\n\r\n###Constraints \r\n- $1 \\leq T \\leq 3$\r\n- $1 \\leq N\\cdot M \\leq 200$\r\n- $1 \\leq A[i][j] , B \\leq 10^5$\r\n\r\n###Subtasks\r\n**Subtask #1 (15 points):**\r\n- $1 \\leq N\\cdot M \\leq 10$\r\n\r\n**Subtask #2 (25 points):**\r\n- $1 \\leq N\\cdot M \\leq 40$\r\n\r\n**Subtask #3 (35 points):**\r\n- $1 \\leq N\\cdot M \\leq 144$\r\n\r\n**Subtask #4 (25 points):**\r\n- original constraints","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"1\r\n    3 3 6\r\n    1 2 3\r\n    7 5 6\r\n    2 1 2","output":"4","explanation":"There are $4$ ways to select subsets of rows and columns to get happiness equal to $6$.\r\n\r\nSelect rows $\\{1,3\\}$ and columns $\\{1,2\\}$. The elements at the intersections are $\\{1,2,2,1\\}$. So, the happiness is $1 + 2 + 2 + 1 = 6$.\r\n\r\nSelect rows $\\{1\\}$ and columns $\\{1,2,3\\}$. The elements at the intersections are $\\{1,2,3\\}$. So, the happiness is $1 + 2 + 3 = 6$.\r\n\r\nSelect rows $\\{2\\}$ and columns $\\{3\\}$. The elements at the intersections are $\\{6\\}$. So, the happiness is $6$.\r\n\r\nSelect rows $\\{2,3\\}$ and columns $\\{2\\}$. The elements at the intersections are $\\{5,1\\}$. So, the happiness is $5 + 1 = 6$.","isDeleted":false}]},"video_editorial_url":"https:\/\/youtu.be\/RQT8nSfLX8w","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"0.5","source_sizelimit":"50000","problem_author":"zankanotachi","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span class='m-username--link'>zankanotachi<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"19-04-2021","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/easy-medium'>easy-medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/knapsack'>knapsack<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/ltime95'>ltime95<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/meet-in-middle'>meet-in-middle<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/zankanotachi'>zankanotachi<\/a>","problem_difficulty_level":"Easy-Medium","user_zen_mode":false,"best_tag":"Meet In Middle","editorial_url":"https:\/\/discuss.codechef.com\/problems\/IMAT","time":{"view_start_date":1619802000,"submit_start_date":1619802000,"visible_start_date":1619802000,"end_date":1735669800,"current":1643797825},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=IMAT","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}