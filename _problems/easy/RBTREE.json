{"category_name":"easy","status":"success","problem_code":"RBTREE","problem_name":"Chef and Red Black Tree","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3> Read problems statements in <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/NOV14\/mandarin\/RBTREE.pdf\">Mandarin Chinese <\/a> and <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/NOV14\/russian\/RBTREE.pdf\">Russian<\/a>.<\/h3>\n<p>Chef likes trees a lot. Today he has an infinte full binary tree (each node has exactly two childs) with special properties.<br \/>\nChef's tree has the following special properties :<\/p>\n<ul>\n<li>Each node of the tree is either colored <b>red<\/b> or <b>black<\/b>.<\/li>\n<li>Root of the tree is <b>black<\/b> intially.<\/li>\n<li>Both childs of a <b>red<\/b> colored node are <b>black<\/b> and both childs of a <b>black<\/b> colored node are <b>red<\/b>.<\/li>\n<\/ul>\n<p>\nThe root of the tree is labelled as 1. For a node labelled <b>v<\/b>, it's left child is labelled as <b>2*v<\/b> and it's right child is labelled as <b>2*v+1<\/b>.\n<\/p>\n<p>\nChef wants to fulfill <b>Q<\/b> queries on this tree. Each query belongs to any of the following three types:\n<\/p>\n<ul>\n<li><b>Qi<\/b> \t   Change color of all <b>red<\/b> colored nodes to <b>black<\/b> and all <b>black<\/b> colored nodes to <b>red<\/b>.<\/li>\n<li><b>Qb x y<\/b>  Count the number of <b>black<\/b> colored nodes on the path from node <b>x<\/b> to node <b>y<\/b> (both inclusive).<\/li>\n<li><b>Qr x y<\/b>  Count the number of <b>red<\/b> colored nodes on the path from node <b>x<\/b> to node <b>y<\/b> (both inclusive).<\/li>\n<\/ul>\n<p>Help chef accomplishing this task.<br \/>\n<br \/><br \/>\n<b>Input<\/b><br \/><br \/>\nFirst line of the input contains an integer <b>Q<\/b> denoting the number of queries. Next <b>Q<\/b> lines of the input contain <b>Q<\/b> queries (one per line). Each query belongs to one of the three types mentioned above.<br \/>\n<br \/><br \/>\n<b>Output<\/b><br \/><br \/>\nFor each query of type <b>Qb<\/b> or <b>Qr<\/b>, print the required answer.<br \/>\n<br \/><br \/>\n<b>Constraints<\/b><br \/><\/p>\n<ul>\n<b>\n<li>1&lt;=Q&lt;=10<sup>5<\/sup><\/li>\n<p><\/p><\/b><br \/>\n<b>\n<li>1&lt;=x,y&lt;=10<sup>9<\/sup><\/li>\n<p><\/p><\/b>\n<\/ul>\n<p><br \/><br \/>\n<b>Sample Input<\/b><br \/><br \/>\n5<br \/>\nQb 4 5<br \/>\nQr 4 5<br \/>\nQi<br \/>\nQb 4 5<br \/>\nQr 4 5<br \/>\n<br \/><br \/>\n<b>Sample Output<\/b><br \/><br \/>\n2<br \/>\n1<br \/>\n1<br \/>\n2<br \/>\n<br \/><br \/>\n<b>Explanation<\/b><br \/><br \/>\nWith the initial configuration of the tree, Path from node 4 to node 5 is 4->2->5 and color of nodes on the path is B->R->B.  <\/p>\n<ul>\n<li>Number of black nodes are 2.<\/li>\n<li>Number of red nodes are 1. <\/li>\n<\/ul>\n<p>After Query Qi, New configuration of the path from node 4 to node 5 is R->B->R.<\/p>\n<ul>\n<li>Number of black nodes are 1.<\/li>\n<li>Number of red nodes are 2. <\/li>\n<\/ul>\n<p><br \/><br \/>\n<b>Scoring<\/b><\/p>\n<ul>\n<li> Subtask #1: <b>1&lt;=Q&lt;=100  1&lt;=x,y&lt;=1000<\/b>   \t         \t                      \u00a0\u00a0<b>: 27 pts<\/b><\/li>\n<li> Subtask #2: <b>1&lt;=Q&lt;=10<sup>3<\/sup>  1&lt;=x,y&lt;=10<sup>5<\/sup>   \u00a0 \u00a0\u00a0: \u00a0<b>25 pts<\/b><\/b><\/li>\n<p><\/p>\n<li> Subtask #3: <b>1&lt;=Q&lt;=10<sup>5<\/sup>  1&lt;=x,y&lt;=10<sup>9<\/sup>   \u00a0 \u00a0\u00a0: \u00a0<b>48 pts<\/b><\/b><\/li>\n<p>\n<\/p><\/ul>\n","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 4.9.2, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYTH, PYTH 3.4, RUBY, SCALA, SCM guile, SCM qobi, ST, TCL, TEXT, WSPC","max_timelimit":"1","source_sizelimit":"50000","problem_author":"ma5termind","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #3366CC;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>3&#9733;<\/span><span>ma5termind<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"28-09-2014","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/ad-hoc'>\n                    ad-hoc\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/easy'>\n                    easy\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/graph'>\n                    graph\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/lca'>\n                    lca\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/ma5termind'>\n                    ma5termind\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/nov14'>\n                    nov14\n                <\/a>","editorial_url":"http:\/\/discuss.codechef.com\/problems\/RBTREE","user":{"username":null},"time":{"view_start_date":1416216600,"submit_start_date":1416216600,"visible_start_date":1416216600,"end_date":1735669800,"current":1493558178},"todo":false,"problem_status":"unattempted"}