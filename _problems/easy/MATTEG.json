{"category_name":"easy","status":"success","problem_code":"MATTEG","problem_name":"Mathison and the teleportation game","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3>Read problems statements in <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/LTIME51\/mandarin\/MATTEG.pdf\">mandarin chinese<\/a>, <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/LTIME51\/russian\/MATTEG.pdf\">russian<\/a> and <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/LTIME51\/vietnamese\/MATTEG.pdf\">vietnamese<\/a> as well.<\/h3>\n\n<p>\n  Mathison and Chef are playing a new teleportation game. This game is played on a <b>R<\/b>\u00d7<b>C<\/b> board where each cell contains some value. A cell at x-th row and y-th column is denoted by (x,y). The purpose of this game is to collect a number of values by\n teleporting from one cell to another. A teleportation can be performed using a <abbr title=\"teleportation pair\">tel-pair<\/abbr>.\n<\/p>\n\n<p>\n  A player is  given <b>N<\/b> <abbr title=\"teleportation pairs\">tel-pairs<\/abbr>. <b>Each tel-pair can be used at most once and a player can use them in any order they like<\/b>. Suppose a player is at cell <b>(a, b)<\/b> and the tel-pair is <b>(dx, dy)<\/b>. Then, the player can reach in one teleportation\n  any cell <b>(c, d)<\/b> from  <b>(a, b)<\/b>  such that <b>|a \u2212 c| = dx<\/b> and <b>|b \u2212 d| = dy<\/b>.\n<\/p>\n\n<p>\n  It is Mathison\u2019s turn next in the game to make a sequence of moves. <br \/>\n  He would like to know what is the highest value of a <abbr title=\"sequence of cells\">path<\/abbr>\n  of length <b> at most N+1<\/b> that starts in <b>(Sx, Sy)<\/b> and uses some (possibly all) of the tel-pairs given.\n<\/p>\n\n<h3>Input<\/h3>\n<p>\n  The first line contains a single integer, <b>T<\/b>, the number of tests.\n<\/p>\n\n<p>\n  Each test starts with three integers, <b>R<\/b>, <b>C<\/b>, and <b>N<\/b>, representing the number of rows, columns, and tel-pairs.\n<\/p>\n\n<p>\n  The next line contains two integers, <b>Sx<\/b>, and <b>Sy<\/b>, representing the coordinates of the starting cell.\n<\/p>\n\n<p>\n  The next two lines will contain the description of the tel-pairs. The first one will contain <b>N<\/b> integers, the x-component of each tel-pair.\n  The second one will contain <b>N<\/b> integers, the y-component of each tel-pair.\n<\/p>\n\n<p>\n  Next, there will be <b>R<\/b> lines, each containing <b>C<\/b> integers, the description of the board.\n<\/p>\n\n<h3>Output<\/h3>\n<p>\n  The output file will contain <b>T<\/b> lines. Each line will contain the answer (i.e. the highest value of a path) to the corresponding test.\n<\/p>\n\n<h3>Constraints and notes<\/h3>\n<ul>\n<li>1 \u2264 <b>T<\/b> \u2264 100<\/li>\n<li>1 \u2264 <b>R, C<\/b> \u2264 1000<\/li>\n<li>1 \u2264 <b>N<\/b> \u2264 9<\/li>\n<li>0 \u2264 <b>Sx<\/b> &lt; <b>R<\/b><\/li>\n<li>0 \u2264 <b>Sy<\/b> &lt; <b>C<\/b><\/li>\n<li>0 \u2264 <b>dx<\/b> \u2264 <b>R<\/b><\/li>\n<li>0 \u2264 <b>dy<\/b> \u2264 <b>C<\/b><\/li>\n<li>The value of a cell is a natural number between 1 and 1,000,000 (i.e. 10<sup>6<\/sup>).<\/li>\n<li>You are allowed to visit a cell multiple times!<\/li>\n<li>It's <b>not<\/b> allowed to go outside the board!<\/li>\n<li>If a cell is visited more than once, its value should be taken into account every single time!<\/li>\n<li>You don't have to use all tel-pairs (but you may want to).<\/li>\n<li>The length of a path is equal to the number of cells in the path.<\/li>\n<li>The value of a path is equal to the sum of values of the cells in the path.<\/li>\n<li><b>Note: You may want to use faster reading methods!<\/b><\/li>\n<li><b>Note: The time limits (TLs) are given per input file!<\/b><\/li>\n<\/ul>\n\n<h3>Subtaks<\/h3>\n<p><b>Subtask #1<\/b> (15 points):\n<ul>\n<li><b>T<\/b> \u2264 100<\/li>\n<li><b>R, C<\/b> \u2264 10<\/li>\n<li><b>N<\/b> \u2264 4<\/li>\n<li><b>TL<\/b> = 1s<\/li>\n<\/ul>\n<\/p>\n\n<p><b>Subtask #2<\/b> (25 points):\n<ul>\n<li><b>T<\/b> \u2264 25<\/li>\n<li><b>R, C<\/b> \u2264 100<\/li>\n<li><b>N<\/b> \u2264 8<\/li>\n<li><b>TL<\/b> = 1.5s<\/li>\n<\/ul>\n<\/p>\n\n<p><b>Subtask #3<\/b> (30 points):\n<ul>\n<li><b>T<\/b> \u2264 5<\/li>\n<li><b>R, C<\/b> \u2264 1000<\/li>\n<li><b>N<\/b> \u2264 8<\/li>\n<li><b>TL<\/b> = 2s<\/li>\n<\/ul>\n<\/p>\n\n<p><b>Subtask #4<\/b> (30 points):\n<ul>\n<li><b>T<\/b> \u2264 5<\/li>\n<li><b>R, C<\/b> \u2264 1000<\/li>\n<li><b>N<\/b> \u2264 9<\/li>\n<li><b>TL<\/b> = 2.5s<\/li>\n<\/ul>\n<\/p>\n\n<h3>Example<\/h3>\n<pre><b>Input:<\/b>\n3\n5 5 2\n2 2\n1 2\n2 1\n10 11 62 14 15\n57 23 34 75 21\n17 12 <b>14<\/b> 11 53\n84 61 24 <b>85<\/b> 22\n43 <b>89<\/b> 14 15 43\n3 3 2\n0 0\n1 1\n1 1\n<b>9<\/b> 8 7\n5 <b>6<\/b> 4\n1 3 2\n2 2 1\n1 1\n2\n2\n5 6\n8 <b>3<\/b>\n\n<b>Output:<\/b>\n188\n24\n3\n<\/pre>\n\n<h3>Explanation<\/h3>\n<pre>\nFirst test\nMathison starts at (2, 2).\nMathison has two tel-pairs (2, 1) and (1, 2).\nThe following path (i.e. bolded numbers) generates the maximum value: (2, 2) \u2192 (4, 1) \u2192 (3, 3)\n\nSecond test\nMathison starts at (0, 0).\nMathison has two tel-pairs (1, 1) and (1, 1).\nThe following path (i.e. bolded numbers) generates the maximum value: (0, 0) \u2192 (1, 1) \u2192 (0, 0)\n\nThird test\nMathison starts at (1, 1).\nMathison has one tel-pair, (2, 2).\nHe can't use the tel-pair so the answer is 3 (the value of the starting cell).\n<\/pre>\n","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 6.3, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, kotlin, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYPY, PYTH, PYTH 3.5, RUBY, rust, SCALA, SCM chicken, SCM guile, SCM qobi, ST, swift, TCL, TEXT, WSPC","max_timelimit":"1 - 2.5","source_sizelimit":"50000","problem_author":"alexvaleanu","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #684273;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>4&#9733;<\/span><span>alexvaleanu<\/span>","problem_tester":"kingofnumbers","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>kingofnumbers<\/span>","date_added":"23-08-2017","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/alexvaleanu'>\n                    alexvaleanu\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/bitmasking'>\n                    bitmasking\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/dynamic-programming'>\n                    dynamic-programming\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/ltime51'>\n                    ltime51\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/medium'>\n                    medium\n                <\/a>","editorial_url":"https:\/\/discuss.codechef.com\/problems\/MATTEG","time":{"view_start_date":1503768600,"submit_start_date":1503768600,"visible_start_date":1503768600,"end_date":1735669800,"current":1514816005},"user":{"username":null},"todo":false,"problem_status":"unattempted"}