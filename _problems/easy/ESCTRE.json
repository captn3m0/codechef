{"category_name":"easy","status":"success","problem_code":"ESCTRE","problem_name":"Escape the Tree ","body":"### Read problems statements in [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK116\/mandarin\/ESCTRE.pdf), [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/COOK116\/vietnamese\/ESCTRE.pdf), and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK116\/bengali\/ESCTRE.pdf) as well.\r\n\r\nChef is trying to make his birthday party adventurous. He recently heard about *escape the room* games, so he wants to prepare his own version of such a game.\r\n\r\nFirst, Chef will lock his friends in the root of a full binary tree with depth $h$, i.e. with $2^{h+1}-1$ nodes (numbered $1$ through $2^{h+1}-1$). The root has number $1$, but the other nodes may be numbered arbitrarily. His friends can only escape this tree by reaching a *special leaf node*. They do not have any other information about the structure of the tree or the special node.\r\n\r\nThe friends need to find the number of the special node. In order to do that, they may ask at most $2h+1$ queries of the following two types:\r\n1. Choose a node $x$. Chef's response to this query is the distance between node $x$ and the special node.\r\n2. Choose a node $x$ and an integer $y$. Consider all leaf nodes at the distance $y$ from node $x$. If there is at least one such node, Chef chooses one such node and his response is the number of the node he chose. Otherwise, Chef's response is $0$.\r\n\r\nHelp Chef's friends find the special node and escape the tree.\r\n\r\n### Interaction\r\n- First, you should read a line containing a single integer $T$ denoting the number of test cases. The description of interaction for $T$ test cases follows.\r\n- For each test case, you should start by reading a line containing a single integer $h$ \u2015 the height of the full binary tree.\r\n- Then, you may ask queries.\r\n    - To ask a query of the first type, you should print a line containing two space-separated integers $1$ and $x$ ($1 \\le x \\le 2^{h+1}-1$). Then, you must read a line containing a single integer \u2015 the answer to your query, or $-1$ if the query is invalid or if you have asked too many queries.\r\n    - To ask a query of the second type, you should print a line containing three space-separated integers $2$, $x$ and $y$ ($1 \\le x \\le 2^{h+1}-1$, $0 \\le y \\le 2h$). Then, you must read a line containing a single integer \u2015 the answer to your query, or $-1$ if the query is invalid or if you have asked too many queries.\r\n- Finally, you should print a line containing two space-separated integers $3$ and $x$, where $x$ is the number of the special leaf node. Then, you must read a line containing a single integer: $1$ if your answer was correct, or $-1$ if it was incorrect or if you have asked too many queries. If your answer was correct, you should continue solving the remaining test cases.\r\n\r\nNote that when you receive an answer $-1$, you should immediately terminate your program to receive a Wrong Answer verdict; otherwise, you may receive any verdict. For each test case, the grader decides that you have asked too many queries as soon as it detects that you have printed $2h+3$ lines \u2015 printing the answer is included, so this corresponds to asking more than $2h+1$ queries.\r\n\r\nDon't forget to flush the output after printing each line!\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $2 \\le h \\le 15$\r\n\r\n### Example\r\n```\r\nYou                         Grader\r\n                            1\r\n                            2\r\n1 5\r\n                            3\r\n2 5 2\r\n                            0\r\n2 5 3\r\n                            3\r\n1 3\r\n                            0\r\n3 3\r\n                            1\r\n```\r\n\r\n### Note\r\n**Example case 1:** This [tree](https:\/\/ibb.co\/jvvXnnh) is used by Chef. The special leaf node is node $3$.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problems statements in [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK116\/mandarin\/ESCTRE.pdf), [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/COOK116\/vietnamese\/ESCTRE.pdf), and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK116\/bengali\/ESCTRE.pdf) as well.\r\n\r\nChef is trying to make his birthday party adventurous. He recently heard about *escape the room* games, so he wants to prepare his own version of such a game.\r\n\r\nFirst, Chef will lock his friends in the root of a full binary tree with depth $h$, i.e. with $2^{h+1}-1$ nodes (numbered $1$ through $2^{h+1}-1$). The root has number $1$, but the other nodes may be numbered arbitrarily. His friends can only escape this tree by reaching a *special leaf node*. They do not have any other information about the structure of the tree or the special node.\r\n\r\nThe friends need to find the number of the special node. In order to do that, they may ask at most $2h+1$ queries of the following two types:\r\n1. Choose a node $x$. Chef's response to this query is the distance between node $x$ and the special node.\r\n2. Choose a node $x$ and an integer $y$. Consider all leaf nodes at the distance $y$ from node $x$. If there is at least one such node, Chef chooses one such node and his response is the number of the node he chose. Otherwise, Chef's response is $0$.\r\n\r\nHelp Chef's friends find the special node and escape the tree.\r\n\r\n### Interaction\r\n- First, you should read a line containing a single integer $T$ denoting the number of test cases. The description of interaction for $T$ test cases follows.\r\n- For each test case, you should start by reading a line containing a single integer $h$ \u2015 the height of the full binary tree.\r\n- Then, you may ask queries.\r\n    - To ask a query of the first type, you should print a line containing two space-separated integers $1$ and $x$ ($1 \\le x \\le 2^{h+1}-1$). Then, you must read a line containing a single integer \u2015 the answer to your query, or $-1$ if the query is invalid or if you have asked too many queries.\r\n    - To ask a query of the second type, you should print a line containing three space-separated integers $2$, $x$ and $y$ ($1 \\le x \\le 2^{h+1}-1$, $0 \\le y \\le 2h$). Then, you must read a line containing a single integer \u2015 the answer to your query, or $-1$ if the query is invalid or if you have asked too many queries.\r\n- Finally, you should print a line containing two space-separated integers $3$ and $x$, where $x$ is the number of the special leaf node. Then, you must read a line containing a single integer: $1$ if your answer was correct, or $-1$ if it was incorrect or if you have asked too many queries. If your answer was correct, you should continue solving the remaining test cases.\r\n\r\nNote that when you receive an answer $-1$, you should immediately terminate your program to receive a Wrong Answer verdict; otherwise, you may receive any verdict. For each test case, the grader decides that you have asked too many queries as soon as it detects that you have printed $2h+3$ lines \u2015 printing the answer is included, so this corresponds to asking more than $2h+1$ queries.\r\n\r\nDon't forget to flush the output after printing each line!\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $2 \\le h \\le 15$\r\n\r\n### Example\r\n```\r\nYou                         Grader\r\n                            1\r\n                            2\r\n1 5\r\n                            3\r\n2 5 2\r\n                            0\r\n2 5 3\r\n                            3\r\n1 3\r\n                            0\r\n3 3\r\n                            1\r\n```\r\n\r\n### Note\r\n**Example case 1:** This [tree](https:\/\/ibb.co\/jvvXnnh) is used by Chef. The special leaf node is node $3$.\r\n","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, NEM","max_timelimit":"2","source_sizelimit":"50000","problem_author":"ezio_26","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span class='m-username--link'>ezio_26<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"15-03-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/cook116'>cook116<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/easy-medium'>easy-medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/ezio_26'>ezio_26<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/interactive'>interactive<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/tmwilliamlin'>tmwilliamlin<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/trees'>trees<\/a>","problem_difficulty_level":"Easy-Medium","user_zen_mode":false,"best_tag":"","editorial_url":"https:\/\/discuss.codechef.com\/problems\/ESCTRE","time":{"view_start_date":1584901802,"submit_start_date":1584901802,"visible_start_date":1584901802,"end_date":1735669800,"current":1643797808},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=ESCTRE","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}