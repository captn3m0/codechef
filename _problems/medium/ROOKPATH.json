{"category_name":"medium","status":"success","problem_code":"ROOKPATH","problem_name":"Rook Path","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/hindi\/ROOKPATH.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/bengali\/ROOKPATH.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/mandarin\/ROOKPATH.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/russian\/ROOKPATH.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/vietnamese\/ROOKPATH.pdf) as well.\r\n\r\nThere is a chessboard with $N$ rows (numbered $1$ through $N$) and $N$ columns (numbered $1$ through $N$). $M$ squares on this chessboard (numbered $1$ through $M$) are marked. For each valid $i$, the $i$-th of the marked squares is in the $r_i$-th row and $c_i$-th column.\r\n\r\nYou should perform the following process:\r\n- First, you take a rook and put this rook on one of the marked squares.\r\n- Then you move the rook $M-1$ times; since it is a rook, each of these moves must be to a marked square in the same row or the same column as the square where the rook was currently standing.\r\n- The rook must visit each of the marked squares exactly once. In each move, squares strictly between those where the rook stands immediately before and after this move are not visited by the rook.\r\n- Also, the directions of the moves must alternate \u2015 you may not move the rook in the same row twice or in the same column twice in any two consecutive moves.\r\n\r\nFind one valid path for the rook that visits the marked squares. It is guaranteed that at least one such path exists. If there are multiple solutions, you may find any one of them.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $M$.\r\n- $M$ lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $r_i$ and $c_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing $M$ space-separated integers \u2015 the indices of marked squares in the order in which the rook should visit them. These integers should form a permutation of $1, 2, \\ldots, M$.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $1 \\le N, M \\le 50,000$\r\n- $1 \\le r_i, c_i \\le N$ for each valid $i$\r\n- all marked squares are distinct\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):** $M \\le 15$\r\n\r\n**Subtask #2 (90 points):** original constraints\r\n\r\n### Example Input\r\n```\r\n2\r\n2 4\r\n1 1\r\n1 2\r\n2 1\r\n2 2\r\n1 1\r\n1 1\r\n```\r\n\r\n### Example Output\r\n```\r\n1 3 4 2\r\n1\r\n```\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/hindi\/ROOKPATH.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/bengali\/ROOKPATH.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/mandarin\/ROOKPATH.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/russian\/ROOKPATH.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/LTIME90\/vietnamese\/ROOKPATH.pdf) as well.\r\n\r\nThere is a chessboard with $N$ rows (numbered $1$ through $N$) and $N$ columns (numbered $1$ through $N$). $M$ squares on this chessboard (numbered $1$ through $M$) are marked. For each valid $i$, the $i$-th of the marked squares is in the $r_i$-th row and $c_i$-th column.\r\n\r\nYou should perform the following process:\r\n- First, you take a rook and put this rook on one of the marked squares.\r\n- Then you move the rook $M-1$ times; since it is a rook, each of these moves must be to a marked square in the same row or the same column as the square where the rook was currently standing.\r\n- The rook must visit each of the marked squares exactly once. In each move, squares strictly between those where the rook stands immediately before and after this move are not visited by the rook.\r\n- Also, the directions of the moves must alternate \u2015 you may not move the rook in the same row twice or in the same column twice in any two consecutive moves.\r\n\r\nFind one valid path for the rook that visits the marked squares. It is guaranteed that at least one such path exists. If there are multiple solutions, you may find any one of them.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $M$.\r\n- $M$ lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $r_i$ and $c_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing $M$ space-separated integers \u2015 the indices of marked squares in the order in which the rook should visit them. These integers should form a permutation of $1, 2, \\ldots, M$.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $1 \\le N, M \\le 50,000$\r\n- $1 \\le r_i, c_i \\le N$ for each valid $i$\r\n- all marked squares are distinct\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):** $M \\le 15$\r\n\r\n**Subtask #2 (90 points):** original constraints\r\n\r\n### Example Input\r\n```\r\n2\r\n2 4\r\n1 1\r\n1 2\r\n2 1\r\n2 2\r\n1 1\r\n1 1\r\n```\r\n\r\n### Example Output\r\n```\r\n1 3 4 2\r\n1\r\n```\r\n","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"https:\/\/youtu.be\/c2vU4mi20u0","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"1","source_sizelimit":"50000","problem_author":"ildar_adm","problem_author_html_handle":"ildar_adm","problem_tester":"","problem_tester_html_handle":"","date_added":"27-11-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/eulerian-tour'>eulerian-tour<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/graphs'>graphs<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/ildar_adm'>ildar_adm<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/ltime90'>ltime90<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium'>medium<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"Eulerian Tour","editorial_url":"https:\/\/discuss.codechef.com\/problems\/ROOKPATH","time":{"view_start_date":1104528600,"submit_start_date":1104528600,"visible_start_date":1104528600,"end_date":1735669800,"current":1643797973},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=ROOKPATH","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}