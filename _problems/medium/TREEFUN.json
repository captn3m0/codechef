{"category_name":"medium","status":"success","problem_code":"TREEFUN","problem_name":"Tree Fun","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><p style=\"text-align:justify\">David is a computer science student who loves his future profession. He is one of those who think that trees grow down, not up.<\/p>\n<p style=\"text-align:justify\">David likes connected undirected acyclic graphs, also known as trees. He especially likes solving problems about trees. Recently David found a piece of paper with a tree with <b>N<\/b> vertices drawn on it. He also found <b>M<\/b> queries on the same piece of paper, where each query was a non-empty list of some vertices of this tree. For each query, it was asked to find the number of vertices in the tree (which didn't belong to the list) such that if you removed this vertex and all edges incident to it from the tree, then all vertices from the list would belong to pairwise different connected components.<\/p>\n<p style=\"text-align:justify\">David spent seven unhappy days and six sleepless nights trying to solve this problem efficiently. He is still trying. As you're known to be a good problem solver, David's friend asked for your help. David won't sleep until he knows the answer to each query. Write a program which answers all the queries correctly.<\/p>\n<h3>Input<\/h3>\n<p style=\"text-align:justify\">The first line of the input contains a single integer <b>T<\/b>, the number of test cases (no more than 5). Each test case is described as follows. The first line contains two integers <b>N<\/b> and <b>M<\/b> (2 \u2264 <b>N<\/b> \u2264 50000, 1 \u2264 <b>M<\/b> \u2264 50000), the number of vertices in the tree and the number of queries, respectively. <b>N<\/b>-1 lines follow, describing the edges of the tree. The <b>i<sup>th<\/sup><\/b> line contains two integers <b>X<sub>i<\/sub><\/b> and <b>Y<sub>i<\/sub><\/b> (1 \u2264 <b>X<sub>i<\/sub><\/b>, <b>Y<sub>i<\/sub><\/b> \u2264 <b>N<\/b>, <b>X<sub>i<\/sub><\/b> \u2260 <b>Y<sub>i<\/sub><\/b>), the indices of the vertices connected by the <b>i<sup>th<\/sup><\/b> edge. Then <b>M<\/b> lines follow, describing the queries. The <b>i<sup>th<\/sup><\/b> line contains an integer <b>K<sub>i<\/sub><\/b> (2 \u2264 <b>K<sub>i<\/sub><\/b> \u2264 <b>N<\/b>) followed by <b>K<sub>i<\/sub><\/b> distinct integers <b>A<sub>i, j<\/sub><\/b> (1 \u2264 <b>A<sub>i, j<\/sub><\/b> \u2264 <b>N<\/b>), the indices of the vertices in the <b>i<sup>th<\/sup><\/b> query.<\/p>\n<p style=\"text-align:justify\">It is guaranteed that the given graph is a tree in all the test cases. The sum of all <b>K<sub>i<\/sub><\/b> in each test case doesn't exceed 100000.<\/p>\n<h3>Output<\/h3>\n<p style=\"text-align:justify\">For each test case output <b>M<\/b> lines containing a single integer each -- the answer to the corresponding query from the input.<\/p>\n<h3>Example<\/h3>\n<pre>\n<b>Input:<\/b>\n1\n5 3\n1 2\n1 3\n1 4\n4 5\n2 2 5\n3 2 3 4\n3 1 3 5\n\n<b>Output:<\/b>\n2\n1\n0\n<\/pre><h3>Explanation<\/h3>\n<p style=\"text-align:justify\">In the first query, vertex 1 is such a vertex. If you remove vertex 1 and all the edges that connect 1 to other vertices, then vertices 2 and 5 will belong to separate connected components. Similarly, vertex 4 is also valid.<\/p>\n<p style=\"text-align:justify\">In the second query, vertex 1 is the only valid vertex. If you remove vertex 1 and all the edges that connect 1 to other vertices, then the connected components will be {2}, {3} and {4, 5}. It's easy to see that vertices 2 and 3 will belong to separate components, vertices 3 and 4 will belong to separate components, and vertices 2 and 4 will belong to separate components.<\/p>\n<p style=\"text-align:justify\">In the third query, you cannot remove a single vertex from the set {2, 4} (and the corresponding edges) so that any pair of vertices from the set {1, 3, 5} will be in separate connected components.<\/p>\n","languages_supported":"C, CPP 4.9.2, CPP14, JAVA","max_timelimit":"1","source_sizelimit":"50000","problem_author":"gennady.korotkevich","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #D0011B;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>7&#9733;<\/span><span>gennady.korotkevich<\/span>","problem_tester":"gamabunta","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #666666;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>1&#9733;<\/span><span>gamabunta<\/span>","date_added":"18-10-2012","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/cook27'>\n                    cook27\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/gennady.korotkevich'>\n                    gennady.korotkevich\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/graph'>\n                    graph\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/lca'>\n                    lca\n                <\/a>","user":{"username":null},"time":{"view_start_date":1350845139,"submit_start_date":1350845139,"visible_start_date":1350845041,"end_date":1735669800,"current":1493557949},"todo":false,"problem_status":"unattempted"}