{"category_name":"medium","status":"success","problem_code":"INTRPATH","problem_name":"Intersecting Paths","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/hindi\/INTRPATH.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/bengali\/INTRPATH.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/mandarin\/INTRPATH.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/russian\/INTRPATH.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/vietnamese\/INTRPATH.pdf) as well.\r\n\r\nYou are given a tree (a connected undirected graph without cycles) with $N$ vertices numbered $1$ through $N$. For each pair of vertices $u$ and $v$, let's denote the simple path between them by $(u, v)$; the paths are undirected, so $(u, v)$ is the same path as $(v, u)$.\r\n\r\nYou should answer $Q$ queries. In each query, you are given two vertices $u$ and $v$. Then, for each simple path $(a, b)$ in the tree, we define *perfect intersection* as follows:\r\n- Let's denote the sets of vertices in the paths $(u, v)$ and $(a, b)$ by $S_1$ and $S_2$ respectively (a path contains its endpoints too).\r\n- The path $(a, b)$ intersects perfectly with $(u, v)$ if $|S_1 \\cap S_2| = 1$, i.e. these paths have exactly one common vertex.\r\n\r\nThe answer to the query is the number of paths which intersect perfectly with the path $(u, v)$.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $Q$.\r\n- Each of the next $N-1$ lines contains two space-separated integers $u$ and $v$ denoting that vertices $u$ and $v$ are connected by an edge.\r\n- Each of the next $Q$ lines contains two space-separated integers $u$ and $v$ describing one query.\r\n\r\n### Output\r\nFor each query, print a single line containing one integer \u2014 the answer to this query.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $1 \\le N, Q \\le 3 \\cdot 10^5$\r\n- $1 \\le u, v \\le N$\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):** $1 \\le N, Q \\le 100$\r\n\r\n**Subtask #2 (20 points):** $1 \\le N, Q \\le 1,000$\r\n\r\n**Subtask #3 (70 points):**\r\n- $T \\le 5$\r\n- $1 \\le N \\le 250,000$\r\n- $1 \\le Q \\le 3 \\cdot 10^5$\r\n\r\n### Example Input\r\n```\r\n1\r\n6 2\r\n1 2\r\n1 3\r\n1 4\r\n2 5\r\n2 6\r\n4 5\r\n1 3\r\n```\r\n\r\n### Example Output\r\n```\r\n6\r\n9\r\n```\r\n\r\n### Explanation\r\n**Example case 1:**\r\n\r\n<img src=\"https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/JUNE19\/INTRPATH\/INTRPATH.png\">\r\n\r\nIn the first query, the paths that intersect perfectly with the given path $(4, 5)$ are $(1, 1)$, $(1, 3)$, $(2, 2)$, $(2, 6)$, $(4, 4)$ and $(5, 5)$.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/hindi\/INTRPATH.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/bengali\/INTRPATH.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/mandarin\/INTRPATH.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/russian\/INTRPATH.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JUNE19\/vietnamese\/INTRPATH.pdf) as well.\r\n\r\nYou are given a tree (a connected undirected graph without cycles) with $N$ vertices numbered $1$ through $N$. For each pair of vertices $u$ and $v$, let's denote the simple path between them by $(u, v)$; the paths are undirected, so $(u, v)$ is the same path as $(v, u)$.\r\n\r\nYou should answer $Q$ queries. In each query, you are given two vertices $u$ and $v$. Then, for each simple path $(a, b)$ in the tree, we define *perfect intersection* as follows:\r\n- Let's denote the sets of vertices in the paths $(u, v)$ and $(a, b)$ by $S_1$ and $S_2$ respectively (a path contains its endpoints too).\r\n- The path $(a, b)$ intersects perfectly with $(u, v)$ if $|S_1 \\cap S_2| = 1$, i.e. these paths have exactly one common vertex.\r\n\r\nThe answer to the query is the number of paths which intersect perfectly with the path $(u, v)$.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $Q$.\r\n- Each of the next $N-1$ lines contains two space-separated integers $u$ and $v$ denoting that vertices $u$ and $v$ are connected by an edge.\r\n- Each of the next $Q$ lines contains two space-separated integers $u$ and $v$ describing one query.\r\n\r\n### Output\r\nFor each query, print a single line containing one integer \u2014 the answer to this query.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10$\r\n- $1 \\le N, Q \\le 3 \\cdot 10^5$\r\n- $1 \\le u, v \\le N$\r\n\r\n### Subtasks\r\n**Subtask #1 (10 points):** $1 \\le N, Q \\le 100$\r\n\r\n**Subtask #2 (20 points):** $1 \\le N, Q \\le 1,000$\r\n\r\n**Subtask #3 (70 points):**\r\n- $T \\le 5$\r\n- $1 \\le N \\le 250,000$\r\n- $1 \\le Q \\le 3 \\cdot 10^5$","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"1\r\n6 2\r\n1 2\r\n1 3\r\n1 4\r\n2 5\r\n2 6\r\n4 5\r\n1 3","output":"6\r\n9","explanation":"**Example case 1:**\r\n\r\n<img src=\"https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/JUNE19\/INTRPATH\/INTRPATH.png\">\r\n\r\nIn the first query, the paths that intersect perfectly with the given path $(4, 5)$ are $(1, 1)$, $(1, 3)$, $(2, 2)$, $(2, 6)$, $(4, 4)$ and $(5, 5)$.","isDeleted":false}]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, NEM","max_timelimit":"4","source_sizelimit":"50000","problem_author":"aman_robotics","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span class='m-username--link'>aman_robotics<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"30-04-2019","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/aman_robotics'>aman_robotics<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/june19'>june19<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/junechallenge'>junechallenge<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"","editorial_url":"","time":{"view_start_date":1560763800,"submit_start_date":1560763800,"visible_start_date":1560763800,"end_date":1735669800,"current":1643797949},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=INTRPATH","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}