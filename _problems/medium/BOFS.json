{"category_name":"medium","status":"success","problem_code":"BOFS","problem_name":"Beauty of Segments","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/hindi\/BOFS.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/bengali\/BOFS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/mandarin\/BOFS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/russian\/BOFS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/vietnamese\/BOFS.pdf) as well.\n\nYou are given $N$ segments $(l_1, r_1), (l_2, r_2), (l_N, r_N)$ and two integers $A$ and $B$. Let's define *playing a game* with two parameters $(x, y)$, where $0 \\le x \\le N$, as the following recursive process:\n- If $x = 0$, the game ends immediately.\n- Otherwise, if $y \\le l_x$ or $r_x \\le y$, end this game and play a game with $(x-1, y)$.\n- Otherwise (if $l_x \\lt y \\lt r_x$), you must choose one of the following options:\n    - Pay $A$ coins, end this game and play a game with $(x-1, y)$.\n    - Pay $B$ coins, end this game and play two independent games \u2014 a game with $(x-1, l_x)$ and a game with $(x-1, r_x)$.\n\nYou should answer $Q$ independent queries. In each query, you are given two integers $x$ and $y$ and you should start by playing a game with parameters $(x, y)$. Your goal is to reach a state when you should not play any games, since you have successfully ended every game you should have played. Find the minimum number of coins required for reaching this state.\n\n### Input\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\n- The first line of each test case contains four space-separated integers $N$, $Q$, $A$ and $B$.\n- For each $i$ ($1 \\le i \\le N$), the $i$-th of the next $N$ lines contains two space-separated integers $l_i$ and $r_i$.\n- $Q$ lines follow. Each of these lines contains two space-separated integers $x$ and $y$ describing a query.\n\n### Output\nFor each query, print a single line containing one integer \u2014 the minimum number of coins.\n\n### Constraints\n- $1 \\le T \\le 100$\n- $1 \\le N, Q \\le 2 \\cdot 10^5$\n- $1 \\le l_i \\le r_i \\le 2 \\cdot 10^5$ for each valid $i$\n- $1 \\le x \\le N$\n- $1 \\le y \\le 2 \\cdot 10^5$\n- $1 \\le A, B \\le 2 \\cdot 10^5$\n- the sum of $N$ over all test cases does not exceed $5 \\cdot 10^5$\n- the sum of $Q$ over all test cases does not exceed $5 \\cdot 10^5$\n\n### Subtasks\n**Subtask #1 (40 points):** $Q, N \\le 10^3$\n- the sum of $N$ over all test cases does not exceed $5 \\cdot 10^3$\n- the sum of $Q$ over all test cases does not exceed $5 \\cdot 10^3$\n\n**Subtask #2 (60 points):** original constraints\n\n### Example Input\n```\n1\n4 3 3 4\n3 5\n3 5\n1 3\n2 5\n4 4\n4 5\n1 4\n```\n\n### Example Output\n```\n7\n0\n3\n```\n\n### Explanation\n**Example case 1:** One of the strategies that use the minimum number of coins is:\n- Pay $3$ coins and play a game with $(3, 4)$.\n- In the game with $(3, 4)$, you just play a game with $(2, 4)$, since $4$ is outside the $3$-rd segment.\n- In the game with $(2, 4)$, pay $4$ coins and play games with $(1, 3)$ and $(1, 5)$.\n- Both of these games end without paying any more coins. The only thing left is playing games with $(0, 3)$ and $(0, 5)$, which end immediately, also without paying any coins.\n\nThe total number of coins used in this strategy is $7$.\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/hindi\/BOFS.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/bengali\/BOFS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/mandarin\/BOFS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/russian\/BOFS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/LTIME75\/vietnamese\/BOFS.pdf) as well.\n\nYou are given $N$ segments $(l_1, r_1), (l_2, r_2), (l_N, r_N)$ and two integers $A$ and $B$. Let's define *playing a game* with two parameters $(x, y)$, where $0 \\le x \\le N$, as the following recursive process:\n- If $x = 0$, the game ends immediately.\n- Otherwise, if $y \\le l_x$ or $r_x \\le y$, end this game and play a game with $(x-1, y)$.\n- Otherwise (if $l_x \\lt y \\lt r_x$), you must choose one of the following options:\n    - Pay $A$ coins, end this game and play a game with $(x-1, y)$.\n    - Pay $B$ coins, end this game and play two independent games \u2014 a game with $(x-1, l_x)$ and a game with $(x-1, r_x)$.\n\nYou should answer $Q$ independent queries. In each query, you are given two integers $x$ and $y$ and you should start by playing a game with parameters $(x, y)$. Your goal is to reach a state when you should not play any games, since you have successfully ended every game you should have played. Find the minimum number of coins required for reaching this state.\n\n### Input\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\n- The first line of each test case contains four space-separated integers $N$, $Q$, $A$ and $B$.\n- For each $i$ ($1 \\le i \\le N$), the $i$-th of the next $N$ lines contains two space-separated integers $l_i$ and $r_i$.\n- $Q$ lines follow. Each of these lines contains two space-separated integers $x$ and $y$ describing a query.\n\n### Output\nFor each query, print a single line containing one integer \u2014 the minimum number of coins.\n\n### Constraints\n- $1 \\le T \\le 100$\n- $1 \\le N, Q \\le 2 \\cdot 10^5$\n- $1 \\le l_i \\le r_i \\le 2 \\cdot 10^5$ for each valid $i$\n- $1 \\le x \\le N$\n- $1 \\le y \\le 2 \\cdot 10^5$\n- $1 \\le A, B \\le 2 \\cdot 10^5$\n- the sum of $N$ over all test cases does not exceed $5 \\cdot 10^5$\n- the sum of $Q$ over all test cases does not exceed $5 \\cdot 10^5$\n\n### Subtasks\n**Subtask #1 (40 points):** $Q, N \\le 10^3$\n- the sum of $N$ over all test cases does not exceed $5 \\cdot 10^3$\n- the sum of $Q$ over all test cases does not exceed $5 \\cdot 10^3$\n\n**Subtask #2 (60 points):** original constraints","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"1\n4 3 3 4\n3 5\n3 5\n1 3\n2 5\n4 4\n4 5\n1 4","output":"7\n0\n3","explanation":"**Example case 1:** One of the strategies that use the minimum number of coins is:\n- Pay $3$ coins and play a game with $(3, 4)$.\n- In the game with $(3, 4)$, you just play a game with $(2, 4)$, since $4$ is outside the $3$-rd segment.\n- In the game with $(2, 4)$, pay $4$ coins and play games with $(1, 3)$ and $(1, 5)$.\n- Both of these games end without paying any more coins. The only thing left is playing games with $(0, 3)$ and $(0, 5)$, which end immediately, also without paying any coins.\n\nThe total number of coins used in this strategy is $7$.","isDeleted":false}]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, NEM","max_timelimit":"2","source_sizelimit":"50000","problem_author":"farhod_farmon","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #D0011B;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>7&#9733;<\/span><span class='m-username--link'>farhod_farmon<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"21-06-2019","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/farhod_farmon'>farhod_farmon<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/lazy-propagation'>lazy-propagation<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/ltime75'>ltime75<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium'>medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/segment-tree'>segment-tree<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/taran_1407'>taran_1407<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"Segment Tree","editorial_url":"https:\/\/discuss.codechef.com\/problems\/BOFS","time":{"view_start_date":1567272600,"submit_start_date":1567272600,"visible_start_date":1567272600,"end_date":1735669800,"current":1643797923},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=BOFS","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}