{"category_name":"medium","status":"success","problem_code":"CHAOSEMP","problem_name":"Destroy the EMP Chip","body":"### Read problem statements in [Bengali](https:\/\/www.codechef.com\/download\/translated\/APRIL21\/bengali\/CHAOSEMP.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/APRIL21\/mandarin\/CHAOSEMP.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/APRIL21\/russian\/CHAOSEMP.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/APRIL21\/vietnamese\/CHAOSEMP.pdf) as well.\r\n\r\n**This is an interactive problem.**\r\n\r\nA mysterious organisation has stolen an EMP chip prototype from a high-tech US facility. IGI knows the consequences of the chip falling into the wrong hands. Since it is just a prototype, they wish to destroy it completely instead of attempting to retrieve it. The best opportunity to do so is when the chip is being transferred from one base to another in a secured truck.\r\n\r\nThe truck can move on an infinite two-dimensional plane. Initially, it is located at some point with integer coordinates $(H, K)$. Unfortunately, this point and the route the truck is going to follow are unknown.\r\n\r\nTo accomplish his task, David Jones can use two kinds of weapons with the following feedback systems:\r\n1. Hellfire \u2015 Launched towards a single point $(X, Y)$. Anything lying at this point is instantly destroyed. Let's denote the location of the truck at this point in time by $(A, B)$. Then, the feedback is one of the following strings:\r\n    - \"O\" if $X = A$ and $Y = B$\r\n    - \"PY\" if $X \\gt A$ and $Y = B$\r\n    - \"NY\" if $X \\lt A$ and $Y = B$\r\n    - \"XP\" if $X = A$ and $Y \\gt B$\r\n    - \"XN\" if $X = A$ and $Y \\lt B$\r\n    - \"PP\" if $X \\gt A$ and $Y \\gt B$\r\n    - \"PN\" if $X \\gt A$ and $Y \\lt B$\r\n    - \"NP\" if $X \\lt A$ and $Y \\gt B$\r\n    - \"NN\" if $X \\lt A$ and $Y \\lt B$\r\n\r\n2. Ring of Fire \u2015 Applied on a rectangular region with a bottom left corner $(X_1, Y_1)$ and a top right corner $(X_2, Y_2)$. Anything lying on the perimeter of the rectangle gets instantly destroyed. Let's denote the location of the truck at this point in time by $(A, B)$. Then, the feedback is one of the following strings:\r\n    - \"O\" if $(A, B)$ lies on the perimeter of the rectangle\r\n    - \"IN\" if $(A, B)$ lies strictly inside the rectangle\r\n    - \"OUT\" if $(A, B)$ lies outside the rectangle\r\n\r\nIn addition, if an attack is unsuccessful, the truck moves exactly $D$ units in one of the four possible axis-parallel directions, i.e. it moves from its current position $(A, B)$ to $(A+D, B)$ or $(A, B+D)$ or $(A-D, B)$ or $(A, B-D)$ (not necessarily the same direction for all unsuccessful attacks). The value of $D$ is fixed and known to be either $0$ (the truck does not move) or $1$.\r\n\r\nEach weapon may be used multiple times and they may be used in any order. However, since using the weapons is costly, you may only make up to $Q$ attacks (with both types of weapons in total). Obviously, your task is to destroy the truck, i.e. to receive \"O\" as the feedback.\r\n\r\n### Interaction\r\n- First, you should read a line containing three space-separated integers $T$, $Q$ and $D$. You should solve $T$ test cases, each with the same parameters $Q$ and $D$. The description of interaction for $T$ test cases follows.\r\n- For each test case, you may make up to $Q$ queries. For each query:\r\n    - If you want to use a Hellfire attack, print a single line containing three space-separated integers $1$, $X$ and $Y$ ($-2 \\cdot 10^{18} \\leq X, Y \\leq 2\\cdot 10^{18}$).\r\n    - If you want to use a Ring of Fire attack, print a single line containing five space-separated integers $2$, $X_1$, $Y_1$, $X_2$ and $Y_2$ ($-2 \\cdot 10^{18} \\leq X_1 \\leq X_2 \\leq 2 \\cdot 10^{18}$ and $-2 \\cdot 10^{18} \\leq Y_1 \\leq Y_2 \\leq 2 \\cdot 10^{18}$).\r\n    - Then, you should read a single line containing one string. If you ask an invalid query or exceed the query limit, this string is \"FAILED\" and you should immediately terminate your program to receive the Wrong Answer verdict. Otherwise, this string is the feedback for your attack.\r\n- As soon as you receive feedback \"O\", you should stop making queries and continue solving the remaining test cases.\r\n\r\nNote: Some of the test files use a non-adaptive grader, while some use an adaptive grader, where the initial point and the route are not fixed at the start, but the answers to your queries are chosen in such a way that there is always at least one initial point $(H,K)$ and sequence of moves which are consistent with all answers.\r\n\r\n**Don't forget to flush the output after printing each line!**\r\n\r\n### Constraints \r\n- $T = 2048$\r\n- $|H|, |K| \\leq 10^{18}$\r\n- $D \\in \\{0, 1\\}$\r\n\r\n### Subtasks\r\n**Subtask 1 (12 points):** $Q = 72$, $D = 0$\r\n\r\n**Subtask 2 (20 points):** $Q = 66$, $D = 1$\r\n\r\n**Subtask 3 (32 points):** $Q = 65$, $D = 1$\r\n\r\n**Subtask 4 (36 points):** $Q = 64$, $D = 1$\r\n\r\n### Example\r\n```\r\nYou         Grader\r\n            1 64 1\r\n1 0 0\r\n            NN\r\n1 2 3\r\n            XP\r\n2 1 0 3 3\r\n            IN\r\n1 4 0\r\n            PN\r\n1 -1 1\r\n            NY\r\n2 -2 1 2 2\r\n            O\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** The truck follows the route $(1, 2)\\rightarrow (2, 2)\\rightarrow (2, 1)\\rightarrow (3, 1)\\rightarrow (2, 1)\\rightarrow (1, 1)$. During the interaction:\r\n- The truck is initially located at $(1, 2)$.\r\n- The first attack is Hellfire at the point $(0, 0)$. The attack is unsuccessful and the feedback is \"NN\".\r\n- The truck moves to the point $(2, 2)$.\r\n- The second attack is Hellfire at the point $(2, 3)$. The attack is unsuccessful and the feedback is \"XP\".\r\n- The truck moves to the point $(2, 1)$.\r\n- The third attack is Ring of Fire at the perimeter of the rectangle with the bottom left corner $(1, 0)$ and the top right corner $(3, 3)$. Since the truck lies inside this rectangle, the attack is unsuccessful and the feedback is \"IN\".\r\n- The truck moves to the point $(3, 1)$.\r\n- The fourth attack is Hellfire at the point $(4, 0)$. The attack is unsuccessful and the feedback is \"PN\".\r\n- The truck moves to the point $(2, 1)$.\r\n- The fifth attack is Hellfire at the point $(-1, 1)$. The attack is unsuccessful and the feedback is \"NY\".\r\n- The truck moves to the point $(1, 1)$.\r\n- The sixth attack is Ring of Fire at the perimeter of the rectangle with the bottom left corner $(-2, 1)$ and the top right corner $(2, 2)$. Since the truck lies on this perimeter, the attack is successful and the feedback is \"O\", since the truck with the EMP chip is destroyed.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Bengali](https:\/\/www.codechef.com\/download\/translated\/APRIL21\/bengali\/CHAOSEMP.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/APRIL21\/mandarin\/CHAOSEMP.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/APRIL21\/russian\/CHAOSEMP.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/APRIL21\/vietnamese\/CHAOSEMP.pdf) as well.\r\n\r\n**This is an interactive problem.**\r\n\r\nA mysterious organisation has stolen an EMP chip prototype from a high-tech US facility. IGI knows the consequences of the chip falling into the wrong hands. Since it is just a prototype, they wish to destroy it completely instead of attempting to retrieve it. The best opportunity to do so is when the chip is being transferred from one base to another in a secured truck.\r\n\r\nThe truck can move on an infinite two-dimensional plane. Initially, it is located at some point with integer coordinates $(H, K)$. Unfortunately, this point and the route the truck is going to follow are unknown.\r\n\r\nTo accomplish his task, David Jones can use two kinds of weapons with the following feedback systems:\r\n1. Hellfire \u2015 Launched towards a single point $(X, Y)$. Anything lying at this point is instantly destroyed. Let's denote the location of the truck at this point in time by $(A, B)$. Then, the feedback is one of the following strings:\r\n    - \"O\" if $X = A$ and $Y = B$\r\n    - \"PY\" if $X \\gt A$ and $Y = B$\r\n    - \"NY\" if $X \\lt A$ and $Y = B$\r\n    - \"XP\" if $X = A$ and $Y \\gt B$\r\n    - \"XN\" if $X = A$ and $Y \\lt B$\r\n    - \"PP\" if $X \\gt A$ and $Y \\gt B$\r\n    - \"PN\" if $X \\gt A$ and $Y \\lt B$\r\n    - \"NP\" if $X \\lt A$ and $Y \\gt B$\r\n    - \"NN\" if $X \\lt A$ and $Y \\lt B$\r\n\r\n2. Ring of Fire \u2015 Applied on a rectangular region with a bottom left corner $(X_1, Y_1)$ and a top right corner $(X_2, Y_2)$. Anything lying on the perimeter of the rectangle gets instantly destroyed. Let's denote the location of the truck at this point in time by $(A, B)$. Then, the feedback is one of the following strings:\r\n    - \"O\" if $(A, B)$ lies on the perimeter of the rectangle\r\n    - \"IN\" if $(A, B)$ lies strictly inside the rectangle\r\n    - \"OUT\" if $(A, B)$ lies outside the rectangle\r\n\r\nIn addition, if an attack is unsuccessful, the truck moves exactly $D$ units in one of the four possible axis-parallel directions, i.e. it moves from its current position $(A, B)$ to $(A+D, B)$ or $(A, B+D)$ or $(A-D, B)$ or $(A, B-D)$ (not necessarily the same direction for all unsuccessful attacks). The value of $D$ is fixed and known to be either $0$ (the truck does not move) or $1$.\r\n\r\nEach weapon may be used multiple times and they may be used in any order. However, since using the weapons is costly, you may only make up to $Q$ attacks (with both types of weapons in total). Obviously, your task is to destroy the truck, i.e. to receive \"O\" as the feedback.\r\n\r\n### Interaction\r\n- First, you should read a line containing three space-separated integers $T$, $Q$ and $D$. You should solve $T$ test cases, each with the same parameters $Q$ and $D$. The description of interaction for $T$ test cases follows.\r\n- For each test case, you may make up to $Q$ queries. For each query:\r\n    - If you want to use a Hellfire attack, print a single line containing three space-separated integers $1$, $X$ and $Y$ ($-2 \\cdot 10^{18} \\leq X, Y \\leq 2\\cdot 10^{18}$).\r\n    - If you want to use a Ring of Fire attack, print a single line containing five space-separated integers $2$, $X_1$, $Y_1$, $X_2$ and $Y_2$ ($-2 \\cdot 10^{18} \\leq X_1 \\leq X_2 \\leq 2 \\cdot 10^{18}$ and $-2 \\cdot 10^{18} \\leq Y_1 \\leq Y_2 \\leq 2 \\cdot 10^{18}$).\r\n    - Then, you should read a single line containing one string. If you ask an invalid query or exceed the query limit, this string is \"FAILED\" and you should immediately terminate your program to receive the Wrong Answer verdict. Otherwise, this string is the feedback for your attack.\r\n- As soon as you receive feedback \"O\", you should stop making queries and continue solving the remaining test cases.\r\n\r\nNote: Some of the test files use a non-adaptive grader, while some use an adaptive grader, where the initial point and the route are not fixed at the start, but the answers to your queries are chosen in such a way that there is always at least one initial point $(H,K)$ and sequence of moves which are consistent with all answers.\r\n\r\n**Don't forget to flush the output after printing each line!**\r\n\r\n### Constraints \r\n- $T = 2048$\r\n- $|H|, |K| \\leq 10^{18}$\r\n- $D \\in \\{0, 1\\}$\r\n\r\n### Subtasks\r\n**Subtask 1 (12 points):** $Q = 72$, $D = 0$\r\n\r\n**Subtask 2 (20 points):** $Q = 66$, $D = 1$\r\n\r\n**Subtask 3 (32 points):** $Q = 65$, $D = 1$\r\n\r\n**Subtask 4 (36 points):** $Q = 64$, $D = 1$\r\n\r\n### Example\r\n```\r\nYou         Grader\r\n            1 64 1\r\n1 0 0\r\n            NN\r\n1 2 3\r\n            XP\r\n2 1 0 3 3\r\n            IN\r\n1 4 0\r\n            PN\r\n1 -1 1\r\n            NY\r\n2 -2 1 2 2\r\n            O\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** The truck follows the route $(1, 2)\\rightarrow (2, 2)\\rightarrow (2, 1)\\rightarrow (3, 1)\\rightarrow (2, 1)\\rightarrow (1, 1)$. During the interaction:\r\n- The truck is initially located at $(1, 2)$.\r\n- The first attack is Hellfire at the point $(0, 0)$. The attack is unsuccessful and the feedback is \"NN\".\r\n- The truck moves to the point $(2, 2)$.\r\n- The second attack is Hellfire at the point $(2, 3)$. The attack is unsuccessful and the feedback is \"XP\".\r\n- The truck moves to the point $(2, 1)$.\r\n- The third attack is Ring of Fire at the perimeter of the rectangle with the bottom left corner $(1, 0)$ and the top right corner $(3, 3)$. Since the truck lies inside this rectangle, the attack is unsuccessful and the feedback is \"IN\".\r\n- The truck moves to the point $(3, 1)$.\r\n- The fourth attack is Hellfire at the point $(4, 0)$. The attack is unsuccessful and the feedback is \"PN\".\r\n- The truck moves to the point $(2, 1)$.\r\n- The fifth attack is Hellfire at the point $(-1, 1)$. The attack is unsuccessful and the feedback is \"NY\".\r\n- The truck moves to the point $(1, 1)$.\r\n- The sixth attack is Ring of Fire at the perimeter of the rectangle with the bottom left corner $(-2, 1)$ and the top right corner $(2, 2)$. Since the truck lies on this perimeter, the attack is successful and the feedback is \"O\", since the truck with the EMP chip is destroyed.\r\n","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"https:\/\/youtu.be\/rVijKWnOW8I","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"2","source_sizelimit":"50000","problem_author":"jay_1048576","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span class='m-username--link'>jay_1048576<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"19-03-2021","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/april21'>april21<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/binary-search'>binary-search<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/geometry'>geometry<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/interactive'>interactive<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/jay_1048576'>jay_1048576<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium'>medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/observation'>observation<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"Binary Search","editorial_url":"https:\/\/discuss.codechef.com\/problems\/CHAOSEMP","time":{"view_start_date":1618219800,"submit_start_date":1618219800,"visible_start_date":1618219800,"end_date":1735669800,"current":1643797926},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=CHAOSEMP","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}