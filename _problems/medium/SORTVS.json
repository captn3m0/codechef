{"category_name":"medium","status":"success","problem_code":"SORTVS","problem_name":"Sorting Vases","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/MAY20\/hindi\/SORTVS.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/MAY20\/bengali\/SORTVS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/MAY20\/mandarin\/SORTVS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/MAY20\/russian\/SORTVS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/MAY20\/vietnamese\/SORTVS.pdf) as well.\r\n\r\nChef has $N$ vases in a row (numbered $1$ through $N$, initially from left to right). He wants to sort them in a particular order which he finds the most beautiful. You are given a permutation $p_1, p_2, \\ldots, p_N$ of the integers $1$ through $N$; for each valid $i$, Chef wants the $i$-th vase to end up as the $p_i$-th vase from the left.\r\n\r\nIn order to achieve this, Chef can swap vases. Any two vases can be swapped in $1$ minute. Chef also has a very efficient, but limited, robot at his disposal. You are given $M$ pairs $(X_1,Y_1), (X_2,Y_2), \\ldots, (X_M,Y_M)$. For each valid $i$, the robot can instantly swap two vases whenever one of them is at the position $X_i$ and the other at the position $Y_i$. Note that the initial positions of the vases are irrelevant to the robot.\r\n\r\nFormally, Chef, at any moment, may choose to perform one of the following actions, until the vases are sorted in the desired order:\r\n- Choose two indices $i$ and $j$ ($1 \\le i, j \\le N$) and swap the vases that are currently at the positions $i$ and $j$. It takes $1$ minute to perform this action.\r\n- Choose an integer $k$ ($1 \\le k \\le M$) and order the robot to swap the vases that are currently at the positions $X_k$ and $Y_k$. It takes $0$ minutes to perform this action.\r\n\r\nChef cannot perform multiple operations at the same time \u2015 if he chooses to perform some operation of the first type, he has to wait for $1$ minute before performing any further operations.\r\n\r\nWhat is the minimum number of minutes that Chef needs to sort the vases?\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $M$.\r\n- The second line contains $N$ space-separated integers $p_1, p_2, \\ldots, p_N$.\r\n- $M$ lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $X_i$ and $Y_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the minimum number of minutes Chef needs to sort the vases.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 100$\r\n- $1 \\le N \\le 18$\r\n- $0 \\le M \\le 18$\r\n- $1 \\le p_i \\le N$ for each valid $i$\r\n- $1 \\le X_i, Y_i \\le N$ for each valid $i$\r\n- $X_i \\neq Y_i$ for each valid $i$\r\n- $N \\gt 10$ holds in at most one test case\r\n\r\n### Subtasks\r\n**Subtask #1 (20 points):** $M = 0$\r\n\r\n**Subtask #2 (20 points):** $N \\le 5$\r\n\r\n**Subtask #3 (60 points):** original constraints\r\n\r\n### Example Input\r\n```\r\n3\r\n3 1\r\n2 3 1\r\n2 3\r\n5 10\r\n2 4 5 1 3\r\n1 2\r\n1 3\r\n1 4\r\n1 5\r\n2 3\r\n2 4\r\n2 5\r\n3 4\r\n3 5\r\n4 5\r\n4 1\r\n3 1 4 2\r\n1 2\r\n```\r\n\r\n### Example Output\r\n```\r\n1\r\n0\r\n2\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** Chef can ask the robot to swap the vases at the positions $2$ and $3$, and then he can swap the vases at the positions $1$ and $2$.\r\n\r\n**Example case 2:** The robot can swap each pair of vases, so the answer is $0$.\r\n\r\n**Example case 3:** Chef can swap the vases at the positions $1$ and $4$, then ask the robot to swap the vases at the positions $1$ and $2$, and then swap the vases at the positions $3$ and $4$, taking a total of two minutes.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/MAY20\/hindi\/SORTVS.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/MAY20\/bengali\/SORTVS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/MAY20\/mandarin\/SORTVS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/MAY20\/russian\/SORTVS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/MAY20\/vietnamese\/SORTVS.pdf) as well.\r\n\r\nChef has $N$ vases in a row (numbered $1$ through $N$, initially from left to right). He wants to sort them in a particular order which he finds the most beautiful. You are given a permutation $p_1, p_2, \\ldots, p_N$ of the integers $1$ through $N$; for each valid $i$, Chef wants the $i$-th vase to end up as the $p_i$-th vase from the left.\r\n\r\nIn order to achieve this, Chef can swap vases. Any two vases can be swapped in $1$ minute. Chef also has a very efficient, but limited, robot at his disposal. You are given $M$ pairs $(X_1,Y_1), (X_2,Y_2), \\ldots, (X_M,Y_M)$. For each valid $i$, the robot can instantly swap two vases whenever one of them is at the position $X_i$ and the other at the position $Y_i$. Note that the initial positions of the vases are irrelevant to the robot.\r\n\r\nFormally, Chef, at any moment, may choose to perform one of the following actions, until the vases are sorted in the desired order:\r\n- Choose two indices $i$ and $j$ ($1 \\le i, j \\le N$) and swap the vases that are currently at the positions $i$ and $j$. It takes $1$ minute to perform this action.\r\n- Choose an integer $k$ ($1 \\le k \\le M$) and order the robot to swap the vases that are currently at the positions $X_k$ and $Y_k$. It takes $0$ minutes to perform this action.\r\n\r\nChef cannot perform multiple operations at the same time \u2015 if he chooses to perform some operation of the first type, he has to wait for $1$ minute before performing any further operations.\r\n\r\nWhat is the minimum number of minutes that Chef needs to sort the vases?\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $M$.\r\n- The second line contains $N$ space-separated integers $p_1, p_2, \\ldots, p_N$.\r\n- $M$ lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $X_i$ and $Y_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing one integer \u2015 the minimum number of minutes Chef needs to sort the vases.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 100$\r\n- $1 \\le N \\le 18$\r\n- $0 \\le M \\le 18$\r\n- $1 \\le p_i \\le N$ for each valid $i$\r\n- $1 \\le X_i, Y_i \\le N$ for each valid $i$\r\n- $X_i \\neq Y_i$ for each valid $i$\r\n- $N \\gt 10$ holds in at most one test case\r\n\r\n### Subtasks\r\n**Subtask #1 (20 points):** $M = 0$\r\n\r\n**Subtask #2 (20 points):** $N \\le 5$\r\n\r\n**Subtask #3 (60 points):** original constraints","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"3\r\n3 1\r\n2 3 1\r\n2 3\r\n5 10\r\n2 4 5 1 3\r\n1 2\r\n1 3\r\n1 4\r\n1 5\r\n2 3\r\n2 4\r\n2 5\r\n3 4\r\n3 5\r\n4 5\r\n4 1\r\n3 1 4 2\r\n1 2","output":"1\r\n0\r\n2","explanation":"**Example case 1:** Chef can ask the robot to swap the vases at the positions $2$ and $3$, and then he can swap the vases at the positions $1$ and $2$.\r\n\r\n**Example case 2:** The robot can swap each pair of vases, so the answer is $0$.\r\n\r\n**Example case 3:** Chef can swap the vases at the positions $1$ and $4$, then ask the robot to swap the vases at the positions $1$ and $2$, and then swap the vases at the positions $3$ and $4$, taking a total of two minutes.","isDeleted":false}]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"1","source_sizelimit":"50000","problem_author":"arthurfn","problem_author_html_handle":"arthurfn","problem_tester":null,"problem_tester_html_handle":"","date_added":"9-03-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/arthurfn'>arthurfn<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/arthurfn'>arthurfn<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/may20'>may20<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium'>medium<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"","editorial_url":"https:\/\/discuss.codechef.com\/problems\/SORTVS","time":{"view_start_date":1589189402,"submit_start_date":1589189402,"visible_start_date":1589189402,"end_date":1735669800,"current":1643797978},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=SORTVS","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}