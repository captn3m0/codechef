{"category_name":"medium","status":"success","problem_code":"MARRAYS","problem_name":"Chef and Magic Arrays","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3>Read problems statements in <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/OCT17\/mandarin\/MARRAYS.pdf\">mandarin chinese<\/a>, <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/OCT17\/russian\/MARRAYS.pdf\">russian<\/a> and <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/OCT17\/vietnamese\/MARRAYS.pdf\">vietnamese<\/a> as well.<\/h3>\n\n<p>Yesterday Chef had cooked <b>N<\/b> very tasty dishes. A dish is prepared of several ingredients. You are given this information by <b>N<\/b> arrays, each array contains elements equal to the number of ingredients used in that dish. Also, an element of the array denotes the tastiness of the ingredient in the corresponding dish.<\/p>\n\n<p>Chef placed his <b>N<\/b> dishes in a line, one after the other. You can make a simple observation that the last ingredient of a dish will be a neighbor of the first ingredient of the next dish. Of course, this is not valid for the <b>N<\/b>-th dish, as it's the last dish.<\/p>\n<p>\n\n<p>Overall quality of these dishes will be calculated as follows. Consider dish <b>i<\/b> and <b>i + 1<\/b>, if the last ingredient of dish <b>i<\/b> be of tastiness <b>x<\/b>, and the first ingredient of dish <b>i + 1<\/b> of tastiness of <b>y<\/b>, then the quality of dish will be increased by <b>|x - y| * i<\/b>, where (|t| denotes the absolute value of t).<\/p>\n\n<p>Chef wants to maximize the quality of the dish. For each dish, he is allowed to take its ingredients and cyclically rotate\/shift them by as many rotations as he wishes. Find the maximum possible quality of the dishes that he can obtain.<\/p>\n\n<h3>Input<\/h3>\n<p>The first line of the input contains an integer <b>T<\/b> denoting the number of test cases.<\/p>\n<p>The first line of each test case contains a single integer <b>N<\/b> denoting the number of dishes. <\/p>\n<p>Next <b>N<\/b> lines follows. <b>i<\/b>-th line contains integer <b>M<\/b> denoting the number of ingredients in <b>i<\/b>-th dish and <b>M<\/b> space-separated integers <b>A<sub>1<\/sub><\/b>, <b>A<sub>2<\/sub><\/b>, ..., <b>A<sub>M<\/sub><\/b> denoting the tastiness of ingredients of <b>i<\/b>-th dish.\". <\/p>\n\n<h3>Output<\/h3>\n<p>For each test case, output in a single line an integer corresponding to the maximum possible quality of the dishes.<\/p>\n\n<h3>Constraints<\/h3>\n<ul>\n<li>Total number of ingredients over all the test cases in a single test file won't exceed 10<sup>6<\/sup><\/li>\n<li><b>M<\/b> \u2265 <b>1<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>A<sub>i<\/sub><\/b> \u2264 <b>10<sup>6<\/sup><\/b><\/li>\n<\/ul>\n\n<h3>Subtasks<\/h3>\n<ul>\n<li><b>Subtask #1 (20 points)<\/b>: Total number of dishes = 2.<\/li>\n<li><b>Subtask #2 (30 points)<\/b>: <b>1<\/b> \u2264 <b>A<sub>i<\/sub><\/b> \u2264 <b>500<\/b><\/li>\n<li><b>Subtask #3 (50 points)<\/b>: original constraints<\/li>\n<\/ul>\n\n<h3>Example<\/h3>\n<pre><b>Input:<\/b>\n3\n3\n3 1 2 3\n2 3 2\n2 4 5\n2\n2 1 2\n2 4 5\n3\n2 1 2\n3 3 2 5\n2 4 5\n\n<b>Output:<\/b>\n8\n4\n10\n<\/pre>\n\n<h3>Explanation<\/h3>\n<pre><p><b>Example case 1.<\/b> \n01) 123|32|45 = 0 * 1 + 2 * 2 = 4\n02) 312|32|45 = 1 * 1 + 2 * 2 = 5\n03) 231|32|45 = 2 * 1 + 2 * 2 = 6\n04) 123|23|45 = 1 * 1 + 1 * 2 = 3\n05) 312|23|45 = 0 * 1 + 1 * 2 = 2\n06) 231|23|45 = 1 * 1 + 1 * 2 = 3\n07) 123|32|54 = 0 * 1 + 3 * 2 = 6\n08) 312|32|54 = 1 * 1 + 3 * 2 = 7 \n<b>09) 231|32|54 = 2 * 1 + 3 * 2 = 8<\/b>\n10) 123|23|54 = 1 * 1 + 2 * 2 = 5\n11) 312|23|54 = 0 * 1 + 2 * 2 = 4\n12) 231|23|54 = 1 * 1 + 2 * 2 = 5<\/p><\/pre>","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, COB, CPP 4.3.2, CPP 6.3, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, kotlin, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYPY, PYTH, PYTH 3.5, RUBY, rust, SCALA, SCM chicken, SCM guile, SCM qobi, ST, swift, TCL, TEXT, WSPC","max_timelimit":"2","source_sizelimit":"50000","problem_author":"berezin","problem_author_html_handle":"berezin","problem_tester":"alex_2oo8","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #D0011B;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>7&#9733;<\/span><span>alex_2oo8<\/span>","date_added":"23-01-2014","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/berezin'>\n                    berezin\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/dynamic-programming'>\n                    dynamic-programming\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/easy-medium'>\n                    easy-medium\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/oct17'>\n                    oct17\n                <\/a>","editorial_url":"https:\/\/discuss.codechef.com\/problems\/MARRAYS","time":{"view_start_date":1508146200,"submit_start_date":1508146200,"visible_start_date":1508146200,"end_date":1735669800,"current":1514816021},"user":{"username":null},"todo":false,"problem_status":"unattempted"}