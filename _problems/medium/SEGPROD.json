{"category_name":"medium","status":"success","problem_code":"SEGPROD","problem_name":"Product on the segment by modulo ","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3>Read problems statements in <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/NOV17\/mandarin\/SEGPROD.pdf\">Mandarin chinese<\/a>, <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/NOV17\/russian\/SEGPROD.pdf\">Russian<\/a> and <a target=\"_blank\" \nhref=\"http:\/\/www.codechef.com\/download\/translated\/NOV17\/vietnamese\/SEGPROD.pdf\">Vietnamese<\/a> as well.<\/h3>\n\n\n<p>Given an array <b> A <\/b> of <b> N <\/b> integers and an integer <b> P <\/b> ( not necessarily prime ). You are required to answer <b> Q <\/b> queries, <b>i<\/b>-th query is described by two numbers <b>L<sub>i<\/sub>, R<sub>i<\/sub><\/b>, the answer to the query is the product of all numbers in array A from index <b>L<sub>i<\/sub><\/b> to index <\/b>R<sub>i<\/sub><\/b> modulo <b>P<\/b>. You have to answer the queries in online mode, that is you can't know a query before you answer all queries that are before it.<\/p>\n<p>\u00a0<\/p>\n\n\n<h3>Input<\/h3>\n<p>the first line contains one integer <b> T <\/b>, the number of test-cases.<\/p>\n\n<p>the first line of each test-case contains <b> N, P, Q <\/b>.<\/p>\n\n<p>the third line contains <b>N<\/b> space-separated integers, the of elements array <b> A <\/b>.<\/p>\n\n<p>the fourth line contains array <b>B<\/b> which consists of floor(Q\/64) + 2 integers <\/b>. Let's number the queries starting from 0. If <b>i<\/b> is divisible by 64 then: \n<\/br>\n<b> L<sub>i<\/sub> = (B<sub>i \/ 64<\/sub> + x) mod N, R<sub>i<\/sub> = (B<sub>i \/ 64 + 1<\/sub> + x) mod n <\/b>.<br>\nOtherwise: <b> L<sub>i<\/sub> = (L<sub>i-1<\/sub> + x) mod N, R<sub>i<\/sub> =  (R<sub>i-1<\/sub> + x) mod N <\/b>. If <b> L<sub>i<\/sub> > R<sub>i<\/sub> <\/b> you should swap them. here x is equal to 0 if it's the first query, otherwise it's equal to the answer of the previous query plus 1 modulo <b>P<\/b>.\n\n<h3>Output<\/h3>\n<p>After each test-case you have to print one number - the value of x after the the last query modulo P<\/p>\n\n<h3>Constraints<\/h3>\n<ul>\n<li><b>1<\/b> \u2264 <b>T<\/b> \u2264 <b>100<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>N<\/b> \u2264 <b>10<sup>6<\/sup><\/b><\/li>\n<li><b>1<\/b> \u2264 <b>Q<\/b> \u2264 <b>2 * 10<sup>7<\/sup><\/b><\/li>\n<li><b>2<\/b> \u2264 <b>P<\/b> \u2264 <b>10<sup>9<\/sup><\/b><\/li>\n<li><b>0<\/b> \u2264 <b> A <sub> i <\/sub> <\/b> \u2264 <b>10<sup>9<\/sup><\/b><\/li>\n<li><b>0<\/b> \u2264 <b>B<sub> i <\/sub> <\/b> \u2264 <b>n - 1<\/b><\/li>\n<li>The sum of <b>N<\/b> over all testcases does not exceed 10<sup>6<\/sup> and sum of <b>Q<\/b> over all testcases does not exceed 2 * 10<sup>7<\/sup> <\/li>\n<\/ul>\n\n<h3>Subtasks<\/h3>\n<ul>\n<li><b>Subtask 1<\/b> (20 points) : <b>P<\/b> is prime and all numbers of A in range [1; <b>P<\/b> - 1]<\/li> \n<li><b>Subtask 1<\/b> (20 points) : <b>P = <b>x<sup>k<\/sup><\/b><\/b> where x is prime and k is integer   and all numbers of A in range [1; <b>P<\/b> - 1]<\/li> \n<li><b>Subtask 3<\/b> (60 points) : Original constraints <\/li>\n<\/ul>\n<p>\u00a0<\/p>\n<h3>Example<\/h3>\n<pre><b>Input:<\/b>\n2\n6 113 3\n1 2 3 4 5 6\n1 4\n6 113 70\n1 2 3 4 5 6\n1 4 3\n\n\n<b>Output:<\/b>\n8\n21\n<\/pre>","languages_supported":"ADA, ASM, BASH, BF, C, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 6.3, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, kotlin, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYPY, PYTH, PYTH 3.5, RUBY, rust, SCALA, SCM chicken, SCM guile, SCM qobi, ST, swift, TCL, TEXT, WSPC","max_timelimit":"4","source_sizelimit":"50000","problem_author":"altruist_","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #684273;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>4&#9733;<\/span><span>altruist_<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"22-08-2017","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/altruist_'>\n                    altruist_\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/medium-hard'>\n                    medium-hard\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/nov17'>\n                    nov17\n                <\/a>","editorial_url":"https:\/\/discuss.codechef.com\/problems\/SEGPROD","time":{"view_start_date":1510579800,"submit_start_date":1510579800,"visible_start_date":1510579800,"end_date":1735669800,"current":1514816024},"user":{"username":null},"todo":false,"problem_status":"unattempted"}