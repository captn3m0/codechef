{"category_name":"medium","status":"success","problem_code":"GCDLEN","problem_name":"Maximal GCD","body":"### Read problems statements in [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK131\/mandarin\/GCDLEN.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/COOK131\/russian\/GCDLEN.pdf), [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/COOK131\/vietnamese\/GCDLEN.pdf) and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK131\/bengali\/GCDLEN.pdf) as well. \n\nChef has found an integer array $A$ of length $N$. He defines the *beauty* of an array as the maximal value of $\\gcd(A_l, A_{l+1}, \\ldots, A_r) \\cdot (r - l + 1)$ over all the subsegments $[l, r]$ of the array $A$.\n\nChef loves to explore, so aside from the beauty of the initial array, he wants to know the beauty of the array after performing each of $Q$ updates. Each update replaces a subsegment of the array with an arithmetic progression. Updates are cumulative.\n\nFormally, in each update you are given four integers $l$, $r$, $x$, and $y$. Then for each $i\\in [l, r]$, you must replace $A_i$ with $x+y(i-l)$.\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"- $1 \\le N, Q \\le 10^5$\n- $1 \\le A_i, x \\le 10^9$\n- $0\\le y\\le 10^9$\n- $1 \\le l \\le r \\le N$\n- It is guaranteed that after each update, no element of $A$ is greater than $10^9$.\n- The sum of $N$ over all test cases does not exceed $10^5$.\n- The sum of $Q$ over all test cases does not exceed $10^5$.\n","constraintsState":true,"subtasks":"","subtasksState":false,"statement":"### Read problems statements in [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK131\/mandarin\/GCDLEN.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/COOK131\/russian\/GCDLEN.pdf), [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/COOK131\/vietnamese\/GCDLEN.pdf) and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK131\/bengali\/GCDLEN.pdf) as well. \n\nChef has found an integer array $A$ of length $N$. He defines the *beauty* of an array as the maximal value of $\\gcd(A_l, A_{l+1}, \\ldots, A_r) \\cdot (r - l + 1)$ over all the subsegments $[l, r]$ of the array $A$.\n\nChef loves to explore, so aside from the beauty of the initial array, he wants to know the beauty of the array after performing each of $Q$ updates. Each update replaces a subsegment of the array with an arithmetic progression. Updates are cumulative.\n\nFormally, in each update you are given four integers $l$, $r$, $x$, and $y$. Then for each $i\\in [l, r]$, you must replace $A_i$ with $x+y(i-l)$.\n","inputFormat":"- The first line contains an integer $T$ - the number of test cases. Then the test cases follow. \n- The first line of each test case contains two integers $N$ and $Q$ - the length of the array and the number of updates.\n- The second line contains $N$ integers - the array $A$.\n- The next $Q$ lines each contains four integers $l$, $r$, $x$, $y$ - the description of an update: an arithmetic progression with the initial term $x$ and the common difference $y$ on the subsegment $[l, r]$.","inputFormatState":true,"outputFormat":"For each test case, output $Q+1$ lines. In the first line for each test case output the beauty of the initial array, in the $i$-th ($2 \\le i \\le Q + 1$) line for each test case output the beauty of the array after performing $i-1$ changes.\n","outputFormatState":true,"sampleTestCases":[{"id":"1","input":"1\n6 5\n2 6 4 10 9 12\n4 5 12 6\n2 5 2 4\n2 6 6 3\n1 5 7 3\n1 6 4 0","output":"12\n18\n14\n18\n19\n24","explanation":"After the first operation $A = [2, 6, 4, 12, 18, 12]$. The maximum value is reached on the segment $[4, 6]$.\n\nAfter the second operation $A = [2, 2, 6, 10, 14, 12]$. The maximum value is reached on the segment $[5, 5]$.","isDeleted":false}]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"2.5","source_sizelimit":"50000","problem_author":"karpovich","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span class='m-username--link'>karpovich<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"15-07-2021","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/cook131'>cook131<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/gcdqueries'>gcdqueries<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/greatest-common-divisor'>greatest-common-divisor<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/karpovich'>karpovich<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/lazy-propagation'>lazy-propagation<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium-hard'>medium-hard<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/segment-tree'>segment-tree<\/a>","problem_difficulty_level":"Medium-Hard","user_zen_mode":false,"best_tag":"Segment Tree","editorial_url":"https:\/\/discuss.codechef.com\/problems\/GCDLEN","time":{"view_start_date":1627492504,"submit_start_date":1627492504,"visible_start_date":1627492504,"end_date":1735669800,"current":1643797944},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=GCDLEN","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}