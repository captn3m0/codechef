{"category_name":"medium","status":"success","problem_code":"SOLDIERS","problem_name":"Chef and Reordering","body":"### Read problem statements in [Bengali](https:\/\/www.codechef.com\/download\/translated\/LTIME93\/bengali\/SOLDIERS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/LTIME93\/mandarin\/SOLDIERS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/LTIME93\/russian\/SOLDIERS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/LTIME93\/vietnamese\/SOLDIERS.pdf) as well.\r\n\r\nThere are $N$ cells (numbered $1$ through $N$). Initially, each cell contains a single Chef.\r\n\r\nYou are given $Q$ pairs of cell ranges $[L_1, R_1], [L_2, R_2], \\ldots, [L_Q, R_Q]$. Consider a sequence of integers $a_1, a_2, \\ldots, a_N$, where $1 \\le a_i \\le N$ for each valid $i$. For each $k$ from $1$ to $Q$, the following process is performed:\r\n- For each $i$ ($L_k \\le i \\le R_k$), the Chef from cell $i$ moves to cell $a_i$. All Chefs move at the same time.\r\n- We check if each cell contains exactly one Chef afterwards. If there is a cell which does not contain exactly one Chef, the sequence $a$ is *invalid* and we stop.\r\n\r\nYou should find a sequence $a$ which is not invalid. (Note that for such a sequence, each cell contains exactly one Chef at any point.) In addition, you are given an integer $p$ with the following meaning:\r\n- If $p = 0$, you should find the lexicographically smallest sequence $a$.\r\n- If $p = 1$, you should find the lexicographically largest sequence $a$.\r\n\r\n### Input\r\n- The first line of the input contains two space-separated integers $T$ and $p$, where $T$ denotes the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $Q$.\r\n- $Q$ lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $L_i$ and $R_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing $N$ space-separated integers $a_1, a_2, \\ldots, a_N$.\r\n- If $p = 0$, the sequence $a_1, a_2, \\ldots, a_N$ should be the lexicographically smallest valid sequence.\r\n- If $p = 1$, the sequence $a_1, a_2, \\ldots, a_N$ should be the lexicographically largest valid sequence.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10^3$\r\n- $0 \\le p \\le 1$\r\n- $1 \\le N, Q \\le 2 \\cdot 10^5$\r\n- $1 \\le L_i \\le R_i \\le N$ for each valid $i$\r\n- the sum of $N$ over all test cases does not exceed $2 \\cdot 10^5$\r\n- the sum of $Q$ over all test cases does not exceed $2 \\cdot 10^5$\r\n\r\n### Subtasks\r\n**Subtask #1 (15 points):** $p = 0$\r\n\r\n**Subtask #2 (35 points):**\r\n- $p = 1$\r\n- the sum of $N$ over all test cases does not exceed $10^3$\r\n- the sum of $Q$ over all test cases does not exceed $10^3$\r\n\r\n**Subtask #3 (50 points):** $p = 1$\r\n\r\n### Example Input 1\r\n```\r\n2 0\r\n7 3\r\n2 5\r\n7 7\r\n3 4\r\n1 2\r\n1 1\r\n1 1\r\n```\r\n\r\n### Example Output 1\r\n```\r\n1 2 3 4 5 1 7 \r\n1\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** Whenever a Chef should move from some cell $i$, we have $a_i = i$, so the Chefs do not move. That means the sequence $[1, 2, 3, 4, 5, 1, 7]$ is valid and it can be proved that it is lexicographically smallest, too.\r\n\r\n### Example Input 2\r\n```\r\n2 1\r\n7 3\r\n2 5\r\n7 7\r\n3 4\r\n1 2\r\n1 1\r\n1 1\r\n```\r\n\r\n### Example Output 2\r\n```\r\n7 5 4 3 2 7 7 \r\n1\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** The Chefs move like this:\r\n- first, $2 \\rightarrow 5, 3 \\rightarrow 4, 4 \\rightarrow 3, 5 \\rightarrow 2$; then, there is still exactly one Chef in each cell\r\n- next, Chef $7$ stays in his cell\r\n- finally, the Chefs in cells $3$ and $4$ swap places\r\n\r\nThere is no point when there are two Chefs in a single cell at the same time, so the sequence $[7, 5, 4, 3, 2, 7, 7]$ is valid and it can be proved that it is lexicographically largest, too.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Bengali](https:\/\/www.codechef.com\/download\/translated\/LTIME93\/bengali\/SOLDIERS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/LTIME93\/mandarin\/SOLDIERS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/LTIME93\/russian\/SOLDIERS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/LTIME93\/vietnamese\/SOLDIERS.pdf) as well.\r\n\r\nThere are $N$ cells (numbered $1$ through $N$). Initially, each cell contains a single Chef.\r\n\r\nYou are given $Q$ pairs of cell ranges $[L_1, R_1], [L_2, R_2], \\ldots, [L_Q, R_Q]$. Consider a sequence of integers $a_1, a_2, \\ldots, a_N$, where $1 \\le a_i \\le N$ for each valid $i$. For each $k$ from $1$ to $Q$, the following process is performed:\r\n- For each $i$ ($L_k \\le i \\le R_k$), the Chef from cell $i$ moves to cell $a_i$. All Chefs move at the same time.\r\n- We check if each cell contains exactly one Chef afterwards. If there is a cell which does not contain exactly one Chef, the sequence $a$ is *invalid* and we stop.\r\n\r\nYou should find a sequence $a$ which is not invalid. (Note that for such a sequence, each cell contains exactly one Chef at any point.) In addition, you are given an integer $p$ with the following meaning:\r\n- If $p = 0$, you should find the lexicographically smallest sequence $a$.\r\n- If $p = 1$, you should find the lexicographically largest sequence $a$.\r\n\r\n### Input\r\n- The first line of the input contains two space-separated integers $T$ and $p$, where $T$ denotes the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $Q$.\r\n- $Q$ lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $L_i$ and $R_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing $N$ space-separated integers $a_1, a_2, \\ldots, a_N$.\r\n- If $p = 0$, the sequence $a_1, a_2, \\ldots, a_N$ should be the lexicographically smallest valid sequence.\r\n- If $p = 1$, the sequence $a_1, a_2, \\ldots, a_N$ should be the lexicographically largest valid sequence.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 10^3$\r\n- $0 \\le p \\le 1$\r\n- $1 \\le N, Q \\le 2 \\cdot 10^5$\r\n- $1 \\le L_i \\le R_i \\le N$ for each valid $i$\r\n- the sum of $N$ over all test cases does not exceed $2 \\cdot 10^5$\r\n- the sum of $Q$ over all test cases does not exceed $2 \\cdot 10^5$\r\n\r\n### Subtasks\r\n**Subtask #1 (15 points):** $p = 0$\r\n\r\n**Subtask #2 (35 points):**\r\n- $p = 1$\r\n- the sum of $N$ over all test cases does not exceed $10^3$\r\n- the sum of $Q$ over all test cases does not exceed $10^3$\r\n\r\n**Subtask #3 (50 points):** $p = 1$\r\n\r\n### Example Input 1\r\n```\r\n2 0\r\n7 3\r\n2 5\r\n7 7\r\n3 4\r\n1 2\r\n1 1\r\n1 1\r\n```\r\n\r\n### Example Output 1\r\n```\r\n1 2 3 4 5 1 7 \r\n1\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** Whenever a Chef should move from some cell $i$, we have $a_i = i$, so the Chefs do not move. That means the sequence $[1, 2, 3, 4, 5, 1, 7]$ is valid and it can be proved that it is lexicographically smallest, too.\r\n\r\n### Example Input 2\r\n```\r\n2 1\r\n7 3\r\n2 5\r\n7 7\r\n3 4\r\n1 2\r\n1 1\r\n1 1\r\n```\r\n\r\n### Example Output 2\r\n```\r\n7 5 4 3 2 7 7 \r\n1\r\n```\r\n\r\n### Explanation\r\n**Example case 1:** The Chefs move like this:\r\n- first, $2 \\rightarrow 5, 3 \\rightarrow 4, 4 \\rightarrow 3, 5 \\rightarrow 2$; then, there is still exactly one Chef in each cell\r\n- next, Chef $7$ stays in his cell\r\n- finally, the Chefs in cells $3$ and $4$ swap places\r\n\r\nThere is no point when there are two Chefs in a single cell at the same time, so the sequence $[7, 5, 4, 3, 2, 7, 7]$ is valid and it can be proved that it is lexicographically largest, too.\r\n","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"https:\/\/youtu.be\/UZIoLmkpCu8","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"1","source_sizelimit":"50000","problem_author":"shishyando","problem_author_html_handle":"shishyando","problem_tester":"","problem_tester_html_handle":"","date_added":"23-02-2021","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/hashing'>hashing<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/ltime93'>ltime93<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium'>medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/shishyando'>shishyando<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"","editorial_url":"https:\/\/discuss.codechef.com\/problems\/SOLDIERS","time":{"view_start_date":1104528600,"submit_start_date":1104528600,"visible_start_date":1104528600,"end_date":1735669800,"current":1643797978},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=SOLDIERS","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}