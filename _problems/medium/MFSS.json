{"category_name":"medium","status":"success","problem_code":"MFSS","problem_name":"Maximum Frequent Subarray Sum","body":"### Read problem statements in [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JUNE21\/vietnamese\/MFSS.pdf),\r\n[Bengali](https:\/\/www.codechef.com\/download\/translated\/JUNE21\/bengali\/MFSS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JUNE21\/mandarin\/MFSS.pdf), and [Russian](https:\/\/www.codechef.com\/download\/translated\/JUNE21\/russian\/MFSS.pdf) as well. \r\n\r\nAkash has just learned the <i>maximum subarray sum<\/i> problem. And while thinking about the solution, he came up with a new problem, the <i>maximum frequent subarray sum<\/i> problem.\r\n\r\nIn this problem, you will be given an array $A$ of $N$ integers. You have to choose a non-empty subarray with the maximum possible score. The score of a subarray is calculated as \r\n$$\\mathrm{score}(l, r) = (A_l+\\cdots+A_r) \\cdot (\\mathrm{occurrences})$$\r\n Here, $\\mathrm{occurrences}$ is the number of occurrences of that subarray in $A$.\r\n\r\nNow Akash can't solve this problem, so please help him solve it.\r\n\r\n###Input\r\n\r\n- The first line contains an integer $T$, the number of test cases. Then the test cases follow. \r\n- The first line of each test case contains an integer $n$, the size of the array.\r\n- The second line contains $n$ integers $A_1,\\ldots, A_N$.\r\n\r\n###Output\r\nFor each test case, output the maximum possible score in a new line.\r\n\r\n###Constraints \r\n- $1 \\leq T \\leq 2 \\cdot 10^5$\r\n- $1 \\leq n \\leq 10^5$\r\n- $-10^7 \\leq A_i \\leq 10^7$\r\n- The sum of $n$ over all test cases $\\leq 3 \\cdot 10^5 $\r\n\r\n###Subtasks\r\n- **Subtask 1 (10 points):** $1 \\leq n \\leq 100 $, the sum of $n$ over all test cases $\\leq 300$\r\n- **Subtask 2 (15 points):** $1 \\leq n \\leq 1000 $, the sum of $n$ over all test cases $\\leq 3000$\r\n- **Subtask 3 (75 points):** original constraints\r\n\r\n###Sample Input\r\n```\r\n2\r\n6\r\n10 8 -20 5 5 5 \r\n10\r\n-5 1 7 -1 2 -4 10 0 -11 3\r\n```\r\n\r\n###Sample Output\r\n```\r\n20\r\n15\r\n```\r\n\t\r\n###Explanation\r\nIn the first test case, the maximum score is attained by subarray $[5, 5]$, its score is $(5+5) \\cdot 2 = 20$ since it occurs twice in $A$.\r\n\r\nIn the second test case, the maximum score is attained by both subarrays $[1, 7, -1, 2, -4, 10]$ and $[1, 7, -1, 2, -4, 10, 0]$. Both have sum $15$ and occur once, so their scores are $15 \\cdot 1 = 15 $.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JUNE21\/vietnamese\/MFSS.pdf),\r\n[Bengali](https:\/\/www.codechef.com\/download\/translated\/JUNE21\/bengali\/MFSS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JUNE21\/mandarin\/MFSS.pdf), and [Russian](https:\/\/www.codechef.com\/download\/translated\/JUNE21\/russian\/MFSS.pdf) as well. \r\n\r\nAkash has just learned the <i>maximum subarray sum<\/i> problem. And while thinking about the solution, he came up with a new problem, the <i>maximum frequent subarray sum<\/i> problem.\r\n\r\nIn this problem, you will be given an array $A$ of $N$ integers. You have to choose a non-empty subarray with the maximum possible score. The score of a subarray is calculated as \r\n$$\\mathrm{score}(l, r) = (A_l+\\cdots+A_r) \\cdot (\\mathrm{occurrences})$$\r\n Here, $\\mathrm{occurrences}$ is the number of occurrences of that subarray in $A$.\r\n\r\nNow Akash can't solve this problem, so please help him solve it.\r\n\r\n###Input\r\n\r\n- The first line contains an integer $T$, the number of test cases. Then the test cases follow. \r\n- The first line of each test case contains an integer $n$, the size of the array.\r\n- The second line contains $n$ integers $A_1,\\ldots, A_N$.\r\n\r\n###Output\r\nFor each test case, output the maximum possible score in a new line.\r\n\r\n###Constraints \r\n- $1 \\leq T \\leq 2 \\cdot 10^5$\r\n- $1 \\leq n \\leq 10^5$\r\n- $-10^7 \\leq A_i \\leq 10^7$\r\n- The sum of $n$ over all test cases $\\leq 3 \\cdot 10^5 $\r\n\r\n###Subtasks\r\n- **Subtask 1 (10 points):** $1 \\leq n \\leq 100 $, the sum of $n$ over all test cases $\\leq 300$\r\n- **Subtask 2 (15 points):** $1 \\leq n \\leq 1000 $, the sum of $n$ over all test cases $\\leq 3000$\r\n- **Subtask 3 (75 points):** original constraints\r\n\r\n###Sample Input\r\n```\r\n2\r\n6\r\n10 8 -20 5 5 5 \r\n10\r\n-5 1 7 -1 2 -4 10 0 -11 3\r\n```\r\n\r\n###Sample Output\r\n```\r\n20\r\n15\r\n```\r\n\t\r\n###Explanation\r\nIn the first test case, the maximum score is attained by subarray $[5, 5]$, its score is $(5+5) \\cdot 2 = 20$ since it occurs twice in $A$.\r\n\r\nIn the second test case, the maximum score is attained by both subarrays $[1, 7, -1, 2, -4, 10]$ and $[1, 7, -1, 2, -4, 10, 0]$. Both have sum $15$ and occur once, so their scores are $15 \\cdot 1 = 15 $.\r\n","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"1","source_sizelimit":"50000","problem_author":"upobir","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span class='m-username--link'>upobir<\/span>","problem_tester":"iscsi","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span class='m-username--link'>iscsi<\/span>","date_added":"31-05-2021","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/june21'>june21<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium'>medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/segment-tree'>segment-tree<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/suffix-trees'>suffix-trees<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/upobir'>upobir<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"Segment Tree","editorial_url":"https:\/\/discuss.codechef.com\/problems\/MFSS","time":{"view_start_date":1623663000,"submit_start_date":1623663000,"visible_start_date":1623663000,"end_date":1735669800,"current":1643797959},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=MFSS","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}