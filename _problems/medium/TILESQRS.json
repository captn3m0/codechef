{"category_name":"medium","status":"success","problem_code":"TILESQRS","problem_name":"Guess the Tiling","body":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/JAN21\/hindi\/TILESQRS.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/JAN21\/bengali\/TILESQRS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JAN21\/mandarin\/TILESQRS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/JAN21\/russian\/TILESQRS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JAN21\/vietnamese\/TILESQRS.pdf) as well.\r\n\r\n**This is an interactive problem.**\r\n\r\nChef wants to decorate his kitchen with tiles. However, he is running out of money and needs to get the work done at a discount. The Slash Decorators are very proud of their skills and give an offer to Chef.\r\n\r\nThe kitchen is a square grid with length $N$ units and width $N$ units. It is divided into $N$ rows and $N$ columns. The rows are numbered $1$ through $N$ from top to bottom. Similarly, the columns are numbered $1$ through $N$ from left to right. Let's denote a cell in the $i$-th row and $j$-th column by $(i,j)$. The Slash Decorators want to use $N^2$ colourful tiles with dimensions $1 \\times 1$ to cover the whole kitchen. The tiles can be placed in two orientations as shown in the figure below.\r\n\r\n![](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/jay_1048576\/Tilings.png)\r\n\r\nNote that each of these two orientations can be converted to the other by rotating it $90^{\\circ}$ clockwise.\r\n\r\nThe Slash Decorators initially filled all the cells of the kitchen with tiles, where each tile is placed in one of the two possible orientations. Chef does not know this initial configuration and his task is to find it by asking up to $Q$ queries. In each query:\r\n- Chef chooses a cell in the grid.\r\n- The Slash Decorators rotate the tile in the cell $90^{\\circ}$ clockwise.\r\n- Then, the Slash Decorators find all squares with area $2$ formed by the blue diagonal lines (shown in the figure below) and tell Chef the number of these squares.\r\n\r\n![](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/jay_1048576\/Example%20Square%20of%20Area%202.png)\r\n\r\nIn addition, the Slash Decorators initially tell Chef the number of squares with area $2$ formed by the blue diagonal lines in the initial configuration. Let's denote this number by $K$.\r\n\r\nFor example, in the configuration shown below, there are $3$ squares with area $2$.\r\n\r\n![](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/jay_1048576\/Sample%20Grid.png)\r\n\r\nThe queries are not independent, i.e. a tile rotated in a query stays rotated in subsequent queries. Chef may choose the same tile in multiple queries; in such a case, this tile is rotated multiple times.\r\n\r\nThe offer is that if Chef guesses the initial configuration correctly, the work will be done for free. Please help him. You play as Chef and the grader plays as the Slash Decorators. You should find the configuration the kitchen is in (the orientations of all tiles) when you finish asking queries; note that this is equivalent to finding the initial configuration.\r\n\r\n### Interaction\r\n- First, you should read a line containing a single integer $T$ \u2015 the number of test cases. The description of interaction for $T$ test cases follows.\r\n- For each test case, you should start by reading a line containing three space-separated integers $N$, $Q$ and $K$.\r\n- Then, you may ask queries. For each query:\r\n    - Print a line containing three space-separated integers $1$, $X$ and $Y$.\r\n    - The grader rotates the tile in the cell $(X, Y)$.\r\n    - Then, read a line containing a single integer $Z$. If you ask an invalid query or more than $Q$ queries, $Z = -1$. Otherwise, $Z$ denotes the number of squares with area $2$ formed by the blue diagonal lines.\r\n- Once you know the current configuration:\r\n    - Print a line containing a single integer $2$.\r\n    - Then, for each $i$ ($1 \\le i \\le N$), print a line containing $N$ space-separated integers; for each valid $j$, the $j$-th of these integers should be $0$ or $1$ if the cell $(i,j)$ currently contains a tile in the first orientation or the second orientation, respectively, shown in the first figure.\r\n- Finally, you should read a line containing a single integer. If your guess was incorrect, this integer is $-1$. Otherwise, this integer is $1$ and you should continue solving the remaining test cases.\r\n\r\nIf you receive $-1$, you should terminate your program immediately to receive the Wrong Answer verdict. Otherwise, you may receive any verdict. Don't forget to flush the output after printing each line!\r\n\r\n### Constraints\r\n- $1 \\leq T \\leq 1,000$\r\n- $2 \\le N \\le 200$\r\n- the sum of $Q$ over all test cases does not exceed $3 \\cdot 10^5$\r\n\r\n### Subtasks\r\n**Subtask #1 (1 point):**\r\n- $N \\in \\{2, 4\\}$\r\n- $Q=2^{N^2}$\r\n\r\n**Subtask #2 (11 points):**\r\n- $N \\leq 100$\r\n- $Q = 12 \\cdot N^2$\r\n\r\n**Subtask #3 (22 points):** $Q = 5 \\cdot N^2$\r\n\r\n**Subtask #4 (66 points):** $Q = 4 \\cdot N^2$\r\n\r\n### Example\r\n```\r\nYou     Grader\r\n        2\r\n        2 16 0\r\n1 2 2\r\n        0\r\n1 1 2\r\n        1\r\n1 1 1\r\n        0\r\n2\r\n1 1\r\n1 0\r\n        1\r\n        4 64 3\r\n1 2 2\r\n        1\r\n1 3 2\r\n        0\r\n1 2 1\r\n        0\r\n1 3 1\r\n        1\r\n1 1 3\r\n        1\r\n1 1 4\r\n        1\r\n1 2 4\r\n        2\r\n1 4 3\r\n        2\r\n1 3 4\r\n        2\r\n1 4 4\r\n        3\r\n2\r\n0 1 0 1\r\n0 1 1 0\r\n1 0 0 1\r\n1 0 1 0\r\n        1\r\n```\r\n\r\n### Explanation\r\n**Example case 1:**\r\n\r\n![](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/jay_1048576\/Sample%20Test%20Case%201%20Explanation.png)  \r\n\r\n**Example case 2:** The initial configuration is depicted in the problem statement.\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problem statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/JAN21\/hindi\/TILESQRS.pdf), [Bengali](https:\/\/www.codechef.com\/download\/translated\/JAN21\/bengali\/TILESQRS.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/JAN21\/mandarin\/TILESQRS.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/JAN21\/russian\/TILESQRS.pdf), and [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/JAN21\/vietnamese\/TILESQRS.pdf) as well.\r\n\r\n**This is an interactive problem.**\r\n\r\nChef wants to decorate his kitchen with tiles. However, he is running out of money and needs to get the work done at a discount. The Slash Decorators are very proud of their skills and give an offer to Chef.\r\n\r\nThe kitchen is a square grid with length $N$ units and width $N$ units. It is divided into $N$ rows and $N$ columns. The rows are numbered $1$ through $N$ from top to bottom. Similarly, the columns are numbered $1$ through $N$ from left to right. Let's denote a cell in the $i$-th row and $j$-th column by $(i,j)$. The Slash Decorators want to use $N^2$ colourful tiles with dimensions $1 \\times 1$ to cover the whole kitchen. The tiles can be placed in two orientations as shown in the figure below.\r\n\r\n![](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/jay_1048576\/Tilings.png)\r\n\r\nNote that each of these two orientations can be converted to the other by rotating it $90^{\\circ}$ clockwise.\r\n\r\nThe Slash Decorators initially filled all the cells of the kitchen with tiles, where each tile is placed in one of the two possible orientations. Chef does not know this initial configuration and his task is to find it by asking up to $Q$ queries. In each query:\r\n- Chef chooses a cell in the grid.\r\n- The Slash Decorators rotate the tile in the cell $90^{\\circ}$ clockwise.\r\n- Then, the Slash Decorators find all squares with area $2$ formed by the blue diagonal lines (shown in the figure below) and tell Chef the number of these squares.\r\n\r\n![](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/jay_1048576\/Example%20Square%20of%20Area%202.png)\r\n\r\nIn addition, the Slash Decorators initially tell Chef the number of squares with area $2$ formed by the blue diagonal lines in the initial configuration. Let's denote this number by $K$.\r\n\r\nFor example, in the configuration shown below, there are $3$ squares with area $2$.\r\n\r\n![](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/jay_1048576\/Sample%20Grid.png)\r\n\r\nThe queries are not independent, i.e. a tile rotated in a query stays rotated in subsequent queries. Chef may choose the same tile in multiple queries; in such a case, this tile is rotated multiple times.\r\n\r\nThe offer is that if Chef guesses the initial configuration correctly, the work will be done for free. Please help him. You play as Chef and the grader plays as the Slash Decorators. You should find the configuration the kitchen is in (the orientations of all tiles) when you finish asking queries; note that this is equivalent to finding the initial configuration.\r\n\r\n### Interaction\r\n- First, you should read a line containing a single integer $T$ \u2015 the number of test cases. The description of interaction for $T$ test cases follows.\r\n- For each test case, you should start by reading a line containing three space-separated integers $N$, $Q$ and $K$.\r\n- Then, you may ask queries. For each query:\r\n    - Print a line containing three space-separated integers $1$, $X$ and $Y$.\r\n    - The grader rotates the tile in the cell $(X, Y)$.\r\n    - Then, read a line containing a single integer $Z$. If you ask an invalid query or more than $Q$ queries, $Z = -1$. Otherwise, $Z$ denotes the number of squares with area $2$ formed by the blue diagonal lines.\r\n- Once you know the current configuration:\r\n    - Print a line containing a single integer $2$.\r\n    - Then, for each $i$ ($1 \\le i \\le N$), print a line containing $N$ space-separated integers; for each valid $j$, the $j$-th of these integers should be $0$ or $1$ if the cell $(i,j)$ currently contains a tile in the first orientation or the second orientation, respectively, shown in the first figure.\r\n- Finally, you should read a line containing a single integer. If your guess was incorrect, this integer is $-1$. Otherwise, this integer is $1$ and you should continue solving the remaining test cases.\r\n\r\nIf you receive $-1$, you should terminate your program immediately to receive the Wrong Answer verdict. Otherwise, you may receive any verdict. Don't forget to flush the output after printing each line!\r\n\r\n### Constraints\r\n- $1 \\leq T \\leq 1,000$\r\n- $2 \\le N \\le 200$\r\n- the sum of $Q$ over all test cases does not exceed $3 \\cdot 10^5$\r\n\r\n### Subtasks\r\n**Subtask #1 (1 point):**\r\n- $N \\in \\{2, 4\\}$\r\n- $Q=2^{N^2}$\r\n\r\n**Subtask #2 (11 points):**\r\n- $N \\leq 100$\r\n- $Q = 12 \\cdot N^2$\r\n\r\n**Subtask #3 (22 points):** $Q = 5 \\cdot N^2$\r\n\r\n**Subtask #4 (66 points):** $Q = 4 \\cdot N^2$\r\n\r\n### Example\r\n```\r\nYou     Grader\r\n        2\r\n        2 16 0\r\n1 2 2\r\n        0\r\n1 1 2\r\n        1\r\n1 1 1\r\n        0\r\n2\r\n1 1\r\n1 0\r\n        1\r\n        4 64 3\r\n1 2 2\r\n        1\r\n1 3 2\r\n        0\r\n1 2 1\r\n        0\r\n1 3 1\r\n        1\r\n1 1 3\r\n        1\r\n1 1 4\r\n        1\r\n1 2 4\r\n        2\r\n1 4 3\r\n        2\r\n1 3 4\r\n        2\r\n1 4 4\r\n        3\r\n2\r\n0 1 0 1\r\n0 1 1 0\r\n1 0 0 1\r\n1 0 1 0\r\n        1\r\n```\r\n\r\n### Explanation\r\n**Example case 1:**\r\n\r\n![](https:\/\/codechef_shared.s3.amazonaws.com\/download\/Images\/jay_1048576\/Sample%20Test%20Case%201%20Explanation.png)  \r\n\r\n**Example case 2:** The initial configuration is depicted in the problem statement.\r\n","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"https:\/\/youtu.be\/iJtRmesnVKk","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"2","source_sizelimit":"50000","problem_author":"jay_1048576","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span class='m-username--link'>jay_1048576<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"2-12-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/ad-hoc'>ad-hoc<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/interactive'>interactive<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/jan21'>jan21<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/jay_1048576'>jay_1048576<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium'>medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/observation'>observation<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"Ad Hoc","editorial_url":"https:\/\/discuss.codechef.com\/problems\/TILESQRS","time":{"view_start_date":1104528600,"submit_start_date":1104528600,"visible_start_date":1104528600,"end_date":1735669800,"current":1643797984},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=TILESQRS","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}