{"category_name":"medium","status":"success","problem_code":"DIREL","problem_name":"Distant Relatives","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3> Read problems statements in <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/COOK45\/mandarin\/DIREL.pdf\">Mandarin Chinese<\/a> and <a target=\"_blank\" href=\"http:\/\/www.codechef.com\/download\/translated\/COOK45\/russian\/DIREL.pdf\">Russian<\/a> as well.<\/h3>\n<p><\/p><p>Chef is giving a big party to all his friends and their relatives. Relatives of very far-away (by relation) will be present. Little Joe (uninvited) is curious to know how distant two people are, say <b>X<\/b> and <b>Y<\/b>.<\/p>\n<p>There are 6 fundamental relations: father relation, mother relation, son relation, daughter relation, brother relation and sister relation. Using these fundamental relations we can describe all other relations between relatives. For example, one can say that Chef Prime is son of daughter of sister of father of father of Chef Composite.<\/p>\n<p>You are given <b>R<\/b> relations of form \"<b>A<\/b> is <b>F<\/b> of <b>B<\/b>\", for <b>N<\/b> people from the party. There variable <b>F<\/b> is one of the following strings: father, mother, son, daughter, brother, sister. Also you are given <b>Q<\/b> queries of Little Joe, each query has form \"<b>X<\/b> <b>Y<\/b>\". For each query output the distance between persons <b>X<\/b> and <b>Y<\/b>. Distance is equal to the minimal number of fundamental relations appearing while describing the relation between <b>X<\/b> and <b>Y<\/b>. For example distance between Chef Prime and Chef Composite is 5. <\/p>\n<p><b>Important points:<\/b><\/p>\n<p>1. Here brother (or sister) relation is considered between children of same parents only. Hence cousins are not considered brother (or sister) .<\/p>\n<p>2. Given relations meet all the following conditions:<\/p>\n<ul>\n<li>Each person has an unique name, and each name appears in at least one relation (as <b>A<\/b>, or as <b>B<\/b>).<\/li>\n<li>No name appears more than once as the first part of relation (as <b>A<\/b>).<\/li>\n<li>There is no cyclic relations. For example, the following relations cannot appear simultaneously in some testcase \"<b>A<\/b> is <b>F<sub>1<\/sub><\/b> of <b>B<\/b>\", \"<b>B<\/b> is <b>F<sub>2<\/sub><\/b> of <b>C<\/b>\" and \"<b>C<\/b> is <b>F<sub>3<\/sub><\/b> of <b>A<\/b>\".<\/li>\n<\/ul>\n\n<p>3. One can have at most one father and at most one mother. And in Chef's land no one takes divorce!<\/p>\n<p>4. Since you should calculate the minimal fundamental relations between some persons, you need to make some conclusion. For example, if <b>X<\/b> is father of <b>Y<\/b>, and <b>Y<\/b> is brother of <b>Z<\/b>, then <b>X<\/b> is father of <b>Z<\/b>.<\/p>\n<h3>Input<\/h3>\n<p>The first line contains two integers <b>N<\/b>, number of people, and <b>R<\/b>, number of relations. Then <b>R<\/b> lines follow. Each line contains a relation of form \"<b>A<\/b> is <b>F<\/b> of <b>B<\/b>\".<\/p>\n<p>The next line contains integer <b>Q<\/b>, number of queries. Each of the next <b>Q<\/b> lines contains two space-separated strings <b>X<\/b> and <b>Y<\/b>, denoting the query of the Little Joe. <b>X<\/b> and <b>Y<\/b> are guaranteed to be valid names mentioned above in relations.<\/p>\n<h3>Output<\/h3>\n<p>Output <b>Q<\/b> lines each containing distance for <b>i<\/b><sup>th<\/sup> query. Print '-1' (without quotes) if <b>X<\/b> and <b>Y<\/b> are not related in any manner.<\/p>\n<h3>Constraints<\/h3>\n<ul>\n<li><b>2<\/b> \u2264 <b>N<\/b> \u2264 <b>256<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>R<\/b> &lt; <b>N<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>Q<\/b> \u2264 <b>16384<\/b><\/li>\n<li><b>1<\/b> \u2264 <b>Length of string A, B, X, Y<\/b> \u2264 <b>4<\/b><\/li>\n<li><b>A<\/b> \u2260 <b>B<\/b><\/li>\n<li><b>X<\/b> \u2260 <b>Y<\/b><\/li>\n<li>Input relations are correct in terms of gender.<\/li>\n<li>Each name consists of lower case alphabets (\"a-z\") only.<\/li>\n<\/ul>\n<h3>Example<\/h3>\n<pre><b>Input:<\/b>\n8 7\ntom is brother of ron\nron is brother of john\njohn is father of kel\nkel is son of cloe\ncloe is sister of ru\nanne is daughter of cloe\nru is mother of fred\n5\nkel john\nron kel\njohn ru\njohn kel\njohn anne\n\n<b>Output:<\/b>\n1\n2\n3\n1\n1\n<\/pre><p>\u00a0<\/p>\n<h3>Explanation<\/h3>\n<p>Consider the first query: kel is son of john, so the distance = 1<\/p>\n<p>Consider the second query: ron is brother of father of kel, so the distance = 2<\/p>\n<p>Consider the third query: john is father of son of sister of ru, so the distance = 3. Note that relation between john and ru can also be expressed as john is father of daughter of sister of ru<\/p>\n","languages_supported":"ADA, ASM, BASH, BF, C, C99 strict, CAML, CLOJ, CLPS, CPP 4.3.2, CPP 4.9.2, CPP14, CS2, D, ERL, FORT, FS, GO, HASK, ICK, ICON, JAVA, JS, LISP clisp, LISP sbcl, LUA, NEM, NICE, NODEJS, PAS fpc, PAS gpc, PERL, PERL6, PHP, PIKE, PRLG, PYTH, PYTH 3.4, RUBY, SCALA, SCM guile, SCM qobi, ST, TCL, TEXT, WSPC","max_timelimit":"1","source_sizelimit":"50000","problem_author":"vinayak garg","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #684273;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>4&#9733;<\/span><span>vinayak garg<\/span>","problem_tester":"gerald","problem_tester_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>gerald<\/span>","date_added":"23-02-2014","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/ad-hoc'>\n                    ad-hoc\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/cook45'>\n                    cook45\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/easy'>\n                    easy\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/graph'>\n                    graph\n                <\/a><a class='problem-tag-small ' href='\/tags\/problems\/vinayak garg'>\n                    vinayak garg\n                <\/a>","editorial_url":"http:\/\/discuss.codechef.com\/problems\/DIREL","user":{"username":null},"time":{"view_start_date":1398018600,"submit_start_date":1398018600,"visible_start_date":1398018600,"end_date":1735669800,"current":1493557625},"todo":false,"problem_status":"unattempted"}