{"category_name":"medium","status":"success","problem_code":"SAFETR","problem_name":"Safety in Treeland","body":"### Read problems statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/COOK121\/hindi\/SAFETR.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK121\/mandarin\/SAFETR.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/COOK121\/russian\/SAFETR.pdf), [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/COOK121\/vietnamese\/SAFETR.pdf), and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK121\/bengali\/SAFETR.pdf) as well.\r\n\r\nThe kingdom of Treeland consists of $N$ cities (numbered $1$ through $N$) connected by $N-1$ bidirectional roads in such a way that there is a path between each pair of cities.\r\n\r\nIn order to increase security in Treeland, the government decided to set up police offices in $K$ of its cities. For each valid $i$, the $i$-th office is in city $V_i$ and it has a *radius of efficiency* $R_i$.\r\n\r\nLet's define the security level $S_i$ of each city $i$ as follows:\r\n- Initially, the security level of each city is equal to zero.\r\n- Then, for each police office $j$ that was built ($1 \\le j \\le K$), the security levels change in the following manner:\r\n    - The security level of the city $V_j$ increases by $R_j$.\r\n    - The security levels of all cities at the distance $1$ from $V_j$ increase by $R_j-1$.\r\n    - ...\r\n    - The security levels of all cities at the distance $R_j-1$ from $V_j$ increase by $1$.\r\n- Formally, for each city $i$, the $j$-th office increases the security level of this city by $\\mathrm{max}(0, R_j - \\mathrm{distance}(i, V_j))$.\r\n\r\nAlice was in charge of calculating the new security levels of all cities after the offices were built. She already finished her job and noticed an interesting coincidence: for each valid $i$, $S_{V_i} = R_i$ holds. Now she has challenged you to find the security levels of all cities.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $K$.\r\n- Then, $N-1$ lines follow. Each of these lines contains two space-separated integers $u$ and $v$ denoting that cities $u$ and $v$ are connected by a road.\r\n- $K$ more lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $V_i$ and $R_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing $N$ space-separated integers $S_1, S_2, \\ldots, S_N$.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 2,000$\r\n- $2 \\le N, K \\le 8 \\cdot 10^5$\r\n- $1 \\le u, v \\le N$\r\n- $1 \\le V_i \\le N$ for each valid $i$\r\n- $V_1, V_2, \\ldots, V_K$ are pairwise distinct\r\n- $1 \\le R_i$ for each valid $i$\r\n- the sum of $N$ over all test cases does not exceed $8 \\cdot 10^5$\r\n\r\n### Example Input\r\n```\r\n2\r\n5 2\r\n5 2\r\n5 4\r\n5 3\r\n3 1\r\n2 1\r\n5 1\r\n5 2\r\n5 2\r\n1 2\r\n2 4\r\n3 1\r\n4 2\r\n5 2\r\n```\r\n\r\n### Example Output\r\n```\r\n0 1 0 0 1\r\n0 2 0 2 2\r\n```\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problems statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/COOK121\/hindi\/SAFETR.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK121\/mandarin\/SAFETR.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/COOK121\/russian\/SAFETR.pdf), [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/COOK121\/vietnamese\/SAFETR.pdf), and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK121\/bengali\/SAFETR.pdf) as well.\r\n\r\nThe kingdom of Treeland consists of $N$ cities (numbered $1$ through $N$) connected by $N-1$ bidirectional roads in such a way that there is a path between each pair of cities.\r\n\r\nIn order to increase security in Treeland, the government decided to set up police offices in $K$ of its cities. For each valid $i$, the $i$-th office is in city $V_i$ and it has a *radius of efficiency* $R_i$.\r\n\r\nLet's define the security level $S_i$ of each city $i$ as follows:\r\n- Initially, the security level of each city is equal to zero.\r\n- Then, for each police office $j$ that was built ($1 \\le j \\le K$), the security levels change in the following manner:\r\n    - The security level of the city $V_j$ increases by $R_j$.\r\n    - The security levels of all cities at the distance $1$ from $V_j$ increase by $R_j-1$.\r\n    - ...\r\n    - The security levels of all cities at the distance $R_j-1$ from $V_j$ increase by $1$.\r\n- Formally, for each city $i$, the $j$-th office increases the security level of this city by $\\mathrm{max}(0, R_j - \\mathrm{distance}(i, V_j))$.\r\n\r\nAlice was in charge of calculating the new security levels of all cities after the offices were built. She already finished her job and noticed an interesting coincidence: for each valid $i$, $S_{V_i} = R_i$ holds. Now she has challenged you to find the security levels of all cities.\r\n\r\n### Input\r\n- The first line of the input contains a single integer $T$ denoting the number of test cases. The description of $T$ test cases follows.\r\n- The first line of each test case contains two space-separated integers $N$ and $K$.\r\n- Then, $N-1$ lines follow. Each of these lines contains two space-separated integers $u$ and $v$ denoting that cities $u$ and $v$ are connected by a road.\r\n- $K$ more lines follow. For each valid $i$, the $i$-th of these lines contains two space-separated integers $V_i$ and $R_i$.\r\n\r\n### Output\r\nFor each test case, print a single line containing $N$ space-separated integers $S_1, S_2, \\ldots, S_N$.\r\n\r\n### Constraints\r\n- $1 \\le T \\le 2,000$\r\n- $2 \\le N, K \\le 8 \\cdot 10^5$\r\n- $1 \\le u, v \\le N$\r\n- $1 \\le V_i \\le N$ for each valid $i$\r\n- $V_1, V_2, \\ldots, V_K$ are pairwise distinct\r\n- $1 \\le R_i$ for each valid $i$\r\n- the sum of $N$ over all test cases does not exceed $8 \\cdot 10^5$","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[{"id":"1","input":"2\r\n5 2\r\n5 2\r\n5 4\r\n5 3\r\n3 1\r\n2 1\r\n5 1\r\n5 2\r\n5 2\r\n1 2\r\n2 4\r\n3 1\r\n4 2\r\n5 2","output":"0 1 0 0 1\r\n0 2 0 2 2","explanation":"","isDeleted":false}]},"video_editorial_url":"https:\/\/youtu.be\/AH9aSIw0arQ","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"3.5","source_sizelimit":"50000","problem_author":"arthurfn","problem_author_html_handle":"arthurfn","problem_tester":"","problem_tester_html_handle":"","date_added":"2-05-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/arthurfn'>arthurfn<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/arthurfn'>arthurfn<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/cook121'>cook121<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/depth-first-search'>depth-first-search<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/fenwick-tree'>fenwick-tree<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/maths'>maths<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium-hard'>medium-hard<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/psychik'>psychik<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/segment-tree'>segment-tree<\/a>","problem_difficulty_level":"Medium-Hard","user_zen_mode":false,"best_tag":"Segment Tree","editorial_url":"https:\/\/discuss.codechef.com\/problems\/SAFETR","time":{"view_start_date":1598208302,"submit_start_date":1598208302,"visible_start_date":1598208302,"end_date":1735669800,"current":1643797975},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=SAFETR","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}