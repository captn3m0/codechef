{"category_name":"medium","status":"success","problem_code":"CRYPCUR","problem_name":"Crypto Trading","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><p>AMRExchange is the latest cryptocurrency exchange that has become very popular among cryptocurrency traders.<\/p>\n<p>\nOn AMRExchange, there are <b>N<\/b> cryptocurrencies - let us denote the i<sup>th<\/sup> currency by <b>C<sub>i<\/sub><\/b>. \n<b>M<\/b> pairs of these cryptocurrencies are tradable - one unit of currency <b>C<sub>x<\/sub><\/b> can be converted to one unit of currency <b>C<sub>y<\/sub><\/b> with risk <b>C<sub>xy<\/sub><\/b>.\n<\/p>\n<p>\nMr. X, an avid cryptocurrency collector, wants to start with 1 unit of <b>any<\/b> of the <b>N<\/b> cryptocurrencies and perform a sequence of trades. He wants to do it in such a way that for each of the <b>N<\/b> cryptocurrencies, there was at least one point during the trading sequence during which he held one unit of that cryptocurrency.<\/p>\n\n<p>The overall risk of the sequence of trades is the <b>maximum risk<\/b> in the sequence of trades. Minimize the overall risk with which Mr. X can achieve this. Print \"Impossible\" if no such sequence of trades is possible.\n<\/p>\n\n<h3>Input<\/h3>\n<ul>\n\t<li>\n\t\tThe first line contains a single integer <b>T<\/b> - the total number of testcases.\n\t<\/li>\n\t<li>\n\t\tEach testcase is of the following format:\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tFirst line contains 2 space-separated integers - <b>N<\/b> and <b>M<\/b>. <b>N<\/b> denotes the number of cryptocurrencies, <b>M<\/b> denotes the number of tradable ordered cryptocurrency pairs.\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t<b>M<\/b> lines follow. Each line contains 3 space-separated positive integers - <b>C<sub>x<\/sub><\/b>, <b>C<sub>y<\/sub><\/b> and <b>C<sub>xy<\/sub><\/b>. This line denotes that one unit of currency <b>C<sub>x<\/sub><\/b> can be converted into one unit of currency <b>C<sub>y<\/sub><\/b> with risk <b>C<sub>xy<\/sub><\/b>.\n\t\t\t<\/li>\n\t\t<\/ul>\n\t<\/li>\n<\/ul>\n\n<h3>Output<\/h3>\n<ul>\n\t<li>\n\t\tFor each testcase, print the minimum overall risk with which Mr. X can own at least one unit of each cryptocurrency at some point in time.\n\t<\/li>\n\t<li>\n\t\tIf it is not possible for Mr. X to achieve this, then print \u201cImpossible\u201d.\n\t<\/li>\n<\/ul>\n\n<h3>Constraints<\/h3>\n<ul>\n\t<li>\n\t\t1 \u2264 <b>T<\/b> \u2264 5<\/li>\n\t<li>\n\t\t1 \u2264 <b>N<\/b>, <b>M<\/b> \u2264  10<sup>5<\/sup><\/li>\n\t<li>\n\t\t1 \u2264 <b>C<sub>x<\/sub><\/b>, <b>C<sub>y<\/sub><\/b> \u2264 <b>N<\/b>\n\t<\/li>\n\t<li>\n\t\t1 \u2264 <b>C<sub>xy<\/sub><\/b> \u2264 10<sup>9<\/sup><\/li>\n<\/ul>\n\n<h3>Example<\/h3>\n<pre>\n<b>Input<\/b>\n2\n3 6\n1 2 1\n2 3 3\n3 1 3\n1 3 1\n3 2 1\n3 2 5\n4 3\n1 2 1\n2 3 1\n2 4 1\n\n<b>Output<\/b>\n1\nImpossible\n<\/pre>\n\n<h3>Explanation<\/h3>\n<p><b>Testcase 1<\/b>: Mr. X can start with cryptocurrency <b>C<sub>1<\/sub><\/b> and follow the following sequence to minimize overall risk:\n<ul>\n\t<li>\n\t\tConvert <b>C<sub>1<\/sub><\/b> to <b>C<sub>3<\/sub><\/b> with risk 1.\n\t<\/li>\n\t<li>\n\t\tConvert <b>C<sub>3<\/sub><\/b> to <b>C<sub>2<\/sub><\/b> with risk 1.\n\t<\/li>\n<\/ul>\n<\/p>\n\n<p>\n\tThe overall risk would be 1.\n<\/p>\n\n<p><b>Testcase 2<\/b>: There are a total of 6 sequences of trades are possible, and none of them satisfy our property. We list them here:\n<\/p>\n\n<p>\n\tStarting with <b>C<sub>1<\/sub><\/b>:\n<\/p>\n<ul>\n\t<li>\n\t\t<b>C<sub>1<\/sub><\/b> -> <b>C<sub>2<\/sub><\/b> -> <b>C<sub>3<\/sub><\/b>\n\t<\/li>\n\t<li>\n\t\t<b>C<sub>1<\/sub><\/b> -> <b>C<sub>2<\/sub><\/b> -> <b>C<sub>4<\/sub><\/b>\n\t<\/li>\n<\/ul>\n\n<p>\n\tIn the first sequence, Mr. X won't be able to own <b>C<sub>4<\/sub><\/b> because units of <b>C<sub>3<\/sub><\/b> cannot be converted to units of <b>C<sub>4<\/sub><\/b>.\n\tSimilarly, in the second sequence,  Mr. X won't be able to own <b>C<sub>3<\/sub><\/b> because units of <b>C<sub>4<\/sub><\/b> cannot be converted to units of <b>C<sub>3<\/sub><\/b>.\n<\/p>\n\n<p>\n\tStarting with <b>C<sub>2<\/sub><\/b>:\n<\/p>\n<ul>\n\t<li>\n\t\t<b>C<sub>2<\/sub><\/b> -> <b>C<sub>3<\/sub><\/b>\n\t<\/li>\n\t<li>\n\t\t<b>C<sub>2<\/sub><\/b> -> <b>C<sub>4<\/sub><\/b>\n\t<\/li>\n<\/ul>\n\n<p>\nStarting with <b>C<sub>3<\/sub><\/b>:\n<\/p>\n<ul>\n\t<li>\n\t\t<b>C<sub>3<\/sub><\/b> (cannot be converted to any other cryptocurrency)\n\t<\/li>\n<\/ul>\n\n<p>\nStarting with <b>C<sub>4<\/sub><\/b>:\n<\/p>\n<ul>\n\t<li>\n\t\t<b>C<sub>4<\/sub><\/b> (cannot be converted to any other cryptocurrency)\n\t<\/li>\n<\/ul>\n\n<p>\nHence, there is no possible sequence using which Mr. X can own one unit of all cryptocurrencies at some point in time.\n<\/p>","languages_supported":"C, CPP14, JAVA, PYTH, PYTH 3.5, PYPY","max_timelimit":"6","source_sizelimit":"50000","problem_author":"wittyceaser","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>wittyceaser<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"23-12-2017","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/wittyceaser'>wittyceaser<\/a>","time":{"view_start_date":1517693400,"submit_start_date":1517693400,"visible_start_date":1517693400,"end_date":1735669800,"current":1525198953},"user":{"username":""},"todo":false,"problem_status":"unattempted","is_direct_submittable":false}