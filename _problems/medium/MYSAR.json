{"category_name":"medium","status":"success","problem_code":"MYSAR","problem_name":"Mysterious Sequence","body":"### Read problems statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/COOK125\/hindi\/MYSAR.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK125\/mandarin\/MYSAR.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/COOK125\/russian\/MYSAR.pdf), [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/COOK125\/vietnamese\/MYSAR.pdf), and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK125\/bengali\/MYSAR.pdf) as well.\r\n\r\n**This is an interactive problem.**\r\n\r\nJoshua is hiding a sequence $A_1, A_2, \\ldots, A_N$, where $N$ is even. He wants to play a game with you. Your goal is to guess the sequence.\r\n\r\nFirst, Joshua tells you $A_1$ and $A_N$. Then, you should ask him queries. In each query, you choose four integers $L_1$, $R_1$, $L_2$ and $R_2$ such that $1 \\le L_1 \\lt R_1 \\le N$ and $1 \\le L_2 \\lt R_2 \\le N$, and Joshua's answer is the maximum of $A_{L_1}, A_{L_1+1}, \\ldots, A_{R_1}$ minus the minimum of $A_{L_2}, A_{L_2+1}, \\ldots, A_{R_2}$.\r\n\r\nCan you find the sequence using no more than $2N$ queries?\r\n\r\n### Interaction\r\n- First, you should read a line containing three space-separated integers $N$, $A_1$ and $A_N$.\r\n- Then you may ask queries. To ask a query:\r\n    - Print a line containing the character 'Q' followed by a space and four space-separated integers $L_1$, $R_1$, $L_2$ and $R_2$.\r\n    - Then, read a line containing one integer \u2015 the answer to the query.\r\n- When you think you know the sequence, print a single line containing the character '!' followed by a space and $N$ space-separated integers $A_1, A_2, \\ldots, A_N$ describing your guess.\r\n\r\nDon't forget to flush the output after printing each line!\r\n\r\n### Constraints\r\n- $2 \\le N \\le 10^5$\r\n- $N$ is even\r\n- $1 \\le A_i \\le 10^9$ for each valid $i$\r\n\r\n### Example\r\n```\r\nYou                         Grader\r\n                            4 1 1\r\nQ 1 2 3 4\r\n                            1\r\nQ 3 4 1 3\r\n                            2\r\n! 1 2 3 1\r\n```\r\n\r\n### Explanation\r\nJoshua has the sequence $[1, 2, 3, 1]$.\r\n\r\nFor the first query, the maximum of $A_1, A_2$ is $2$ and the minimum of $A_3, A_4$ is $1$, so the answer to this query is $2 - 1 = 1$.\r\n\r\nFor the second query, the maximum of $A_3, A_4$ is $3$ and the minimum of $A_1, A_3$ is $1$, so the answer is $3 - 1 = 2$.\r\n\r\nFinally, we correctly guess the sequence by printing \"! 1 2 3 1\".\r\n\n<aside style='background: #f8f8f8;padding: 10px 15px;'><div>All submissions for this problem are available.<\/div><\/aside>","problemComponents":{"constraints":"","constraintsState":false,"subtasks":"","subtasksState":false,"statement":"### Read problems statements in [Hindi](https:\/\/www.codechef.com\/download\/translated\/COOK125\/hindi\/MYSAR.pdf), [Mandarin Chinese](https:\/\/www.codechef.com\/download\/translated\/COOK125\/mandarin\/MYSAR.pdf), [Russian](https:\/\/www.codechef.com\/download\/translated\/COOK125\/russian\/MYSAR.pdf), [Vietnamese](https:\/\/www.codechef.com\/download\/translated\/COOK125\/vietnamese\/MYSAR.pdf), and [Bengali](https:\/\/www.codechef.com\/download\/translated\/COOK125\/bengali\/MYSAR.pdf) as well.\r\n\r\n**This is an interactive problem.**\r\n\r\nJoshua is hiding a sequence $A_1, A_2, \\ldots, A_N$, where $N$ is even. He wants to play a game with you. Your goal is to guess the sequence.\r\n\r\nFirst, Joshua tells you $A_1$ and $A_N$. Then, you should ask him queries. In each query, you choose four integers $L_1$, $R_1$, $L_2$ and $R_2$ such that $1 \\le L_1 \\lt R_1 \\le N$ and $1 \\le L_2 \\lt R_2 \\le N$, and Joshua's answer is the maximum of $A_{L_1}, A_{L_1+1}, \\ldots, A_{R_1}$ minus the minimum of $A_{L_2}, A_{L_2+1}, \\ldots, A_{R_2}$.\r\n\r\nCan you find the sequence using no more than $2N$ queries?\r\n\r\n### Interaction\r\n- First, you should read a line containing three space-separated integers $N$, $A_1$ and $A_N$.\r\n- Then you may ask queries. To ask a query:\r\n    - Print a line containing the character 'Q' followed by a space and four space-separated integers $L_1$, $R_1$, $L_2$ and $R_2$.\r\n    - Then, read a line containing one integer \u2015 the answer to the query.\r\n- When you think you know the sequence, print a single line containing the character '!' followed by a space and $N$ space-separated integers $A_1, A_2, \\ldots, A_N$ describing your guess.\r\n\r\nDon't forget to flush the output after printing each line!\r\n\r\n### Constraints\r\n- $2 \\le N \\le 10^5$\r\n- $N$ is even\r\n- $1 \\le A_i \\le 10^9$ for each valid $i$\r\n\r\n### Example\r\n```\r\nYou                         Grader\r\n                            4 1 1\r\nQ 1 2 3 4\r\n                            1\r\nQ 3 4 1 3\r\n                            2\r\n! 1 2 3 1\r\n```\r\n\r\n### Explanation\r\nJoshua has the sequence $[1, 2, 3, 1]$.\r\n\r\nFor the first query, the maximum of $A_1, A_2$ is $2$ and the minimum of $A_3, A_4$ is $1$, so the answer to this query is $2 - 1 = 1$.\r\n\r\nFor the second query, the maximum of $A_3, A_4$ is $3$ and the minimum of $A_1, A_3$ is $1$, so the answer is $3 - 1 = 2$.\r\n\r\nFinally, we correctly guess the sequence by printing \"! 1 2 3 1\".\r\n","inputFormat":"","inputFormatState":false,"outputFormat":"","outputFormatState":false,"sampleTestCases":[]},"video_editorial_url":"https:\/\/youtu.be\/GOLut9gjs7s","languages_supported":"CPP14, C, JAVA, PYTH 3.6, CPP17, PYTH, PYP3, CS2, ADA, PYPY, TEXT, PAS fpc, NODEJS, RUBY, PHP, GO, HASK, TCL, PERL, SCALA, LUA, kotlin, BASH, JS, LISP sbcl, rust, PAS gpc, BF, CLOJ, R, D, CAML, FORT, ASM, swift, FS, WSPC, LISP clisp, SQL, SCM guile, PERL6, ERL, CLPS, ICK, NICE, PRLG, ICON, COB, SCM chicken, PIKE, SCM qobi, ST, SQLQ, NEM","max_timelimit":"2","source_sizelimit":"50000","problem_author":"ki0apa","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FFBF00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>5&#9733;<\/span><span class='m-username--link'>ki0apa<\/span>","problem_tester":"","problem_tester_html_handle":"","date_added":"11-12-2020","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/cook125'>cook125<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/ki0apa'>ki0apa<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/medium'>medium<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/observation'>observation<\/a>, <a class='problem-tag-small ' href='\/tags\/problems\/rajarshi_basu'>rajarshi_basu<\/a>","problem_difficulty_level":"Medium","user_zen_mode":false,"best_tag":"","editorial_url":"https:\/\/discuss.codechef.com\/problems\/MYSAR","time":{"view_start_date":1104528600,"submit_start_date":1104528600,"visible_start_date":1104528600,"end_date":1735669800,"current":1643797964},"user":{"username":null,"access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false,"problemDiscussURL":"https:\/\/discuss.codechef.com\/search?q=MYSAR","is_proctored":false,"is_user_verified_for_proctoring":null,"visitedContests":[]}