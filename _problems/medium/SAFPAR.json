
{"category_name":"medium","status":"success","problem_code":"SAFPAR","problem_name":"Safe Partition","body":"<span class=\"solution-visible-txt\">All submissions for this problem are available.<\/span><h3>Read problems statements in <a href=\"http:\/\/www.codechef.com\/download\/translated\/AUG18\/hindi\/SAFPAR.pdf\" target=\"_blank\">Hindi,<\/a>\n<a href=\"http:\/\/www.codechef.com\/download\/translated\/AUG18\/mandarin\/SAFPAR.pdf\" target=\"_blank\">Mandarin chinese<\/a>\n, <a href=\"http:\/\/www.codechef.com\/download\/translated\/AUG18\/russian\/SAFPAR.pdf\" target=\"_blank\">Russian<\/a> and <a href=\"http:\/\/www.codechef.com\/download\/translated\/AUG18\/vietnamese\/SAFPAR.pdf\" target=\"_blank\">Vietnamese<\/a> as well.<\/h3>\n\nIt's summer \u2014 the time for holidays! Chef finally finished all university exams. Now he can rest and play with sequences.\n\nToday, Chef took a sequence $A$ with $N$ elements. He wants to partition this sequence into an arbitrary number of non-empty contiguous subsequences (i.e. each of the subsequences has to consist of one or more consecutive elements of the original sequence). Each element of the original sequence must belong to exactly one subsequence.\n\nThis would be easy for Chef, so he is only interested in *safe partitions* of $A$. A safe partition is a partition into subsequences $S_1, S_2, \\dots, S_K$ such that for each valid $i$, $\\mathrm{min}(S_i) \\le |S_i| \\le \\mathrm{max}(S_i)$ \u2014 that is, for each subsequence in this partition, its length is greater or equal to its smallest element and smaller or equal to its largest element.\n\nFinding one safe partition would still be easy for Chef, so he wants to find the number of safe partitions of $A$. Since this number could be very big, please compute it modulo $1000000007$ ($10^9 + 7$).\n\n### Input\n- The first line of the input contains a single integer $N$.\n- The second line contains $N$ space-separated integers $A_1, A_2, \\dots, A_N$.\n\n### Output\nPrint a single line containing one integer \u2014 the number of safe partitions of $A$ modulo $10^9+7$.\n\n### Constraints \n- $1 \\le N \\le 5 \\cdot 10^5$\n- $1 \\le A_i \\le N$ for each valid $i$\n\n### Subtasks\n**Subtask #1 (10 points):** $1 \\le N \\le 1,000$\n\n**Subtask #2 (10 points):**\n- $1 \\le N \\le 10^5$\n- $1 \\le A_i \\le 500$ for each valid $i$\n\n**Subtask #3 (15 points):** there are exactly two different values of elements of $A$\n\n**Subtask #4 (25 points):** $A_{2i}=N$ for each valid $i$\n\n**Subtask #5 (40 points):** original constraints\n\n### Example Input\n```\n7\n1 6 2 3 4 3 4\n```\n\n### Example Output\n```\n6\n```\n\n### Explanation\nThe six safe partitions are:\n- $[1], [6, 2, 3, 4, 3, 4]$\n- $[1, 6, 2], [3, 4, 3, 4]$\n- $[1, 6, 2, 3], [4, 3, 4 ]$\n- $[1], [6, 2], [3, 4, 3, 4]$\n- $[1], [6, 2, 3], [4, 3, 4]$\n- $[1, 6], [2, 3], [4, 3, 4]$\n","languages_supported":"C, CPP14, JAVA, PYTH, PYTH 3.6, PYPY, CS2, PAS fpc, PAS gpc, RUBY, PHP, GO, NODEJS, HASK, rust, SCALA, swift, D, PERL, FORT, WSPC, ADA, CAML, ICK, BF, ASM, CLPS, PRLG, ICON, SCM qobi, PIKE, ST, NICE, LUA, BASH, NEM, LISP sbcl, LISP clisp, SCM guile, JS, ERL, TCL, kotlin, PERL6, TEXT, SCM chicken, PYP3, CLOJ, COB, FS","max_timelimit":"1","source_sizelimit":"50000","problem_author":"allllekssssa","problem_author_html_handle":"<span \n            class='rating' \n            style='display: inline-block; \n                    font-size: 10px; \n                    background: #FF7F00;\n                    padding: 0 3px; \n                    line-height: 1.3; \n                    color: white;\n                    margin-right: 2px;'>6&#9733;<\/span><span>allllekssssa<\/span>","problem_tester":null,"problem_tester_html_handle":"","date_added":"22-07-2018","tags":"<a class='problem-tag-small ' href='\/tags\/problems\/allllekssssa'>allllekssssa<\/a>","time":{"view_start_date":1534152605,"submit_start_date":1534152605,"visible_start_date":1534152605,"end_date":1735669800,"current":1559472982},"user":{"username":"","access":"default"},"todo":false,"problem_status":"unattempted","is_direct_submittable":false}